<div class="heading">
    <h2>{lang('advanced_settings')}</h2>
</div>

<form name="form1" method="post" id="main_form" enctype="multipart/form-data">
    <div class="row">
        <div class="col-md-12">
            <ul class="nav nav-tabs">
                <li class="active">
                    <a data-toggle="tab" href="#config_upload">
                        <h8>Upload</h8>
                    </a>
                </li>
                <li>
                    <a data-toggle="tab" href="#config_conversion">
                        <h8>Conversion</h8>
                    </a>
                </li>
                <li>
                    <a data-toggle="tab" href="#config_emails">
                        <h8>Emails</h8>
                    </a>
                </li>
                <li>
                    <a data-toggle="tab" href="#config_proxy">
                        <h8>Proxy</h8>
                    </a>
                </li>
                <li>
                    <a data-toggle="tab" href="#config_cache">
                        <h8>{lang|ucfirst code='cache'}</h8>
                    </a>
                </li>
                <li>
                    <a data-toggle="tab" href="#config_dev">
                        <h8>{lang|ucfirst code='dev'}</h8>
                    </a>
                </li>
                <li>
                    <a data-toggle="tab" href="#config_hosting">
                        <h8>{lang|ucfirst code='hosting'}</h8>
                    </a>
                </li>
            </ul>
            <div class="tab-content">
                <div id="config_upload" class="tab-pane active">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-12">
                                    <h3>{lang code='videos'}</h3>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-4">
                                    <label class="nowrap" for="enable_video_file_upload" title="Enable file upload">Enable video file upload</label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="yes" name="enable_video_file_upload" id="enable_video_file_upload" {if $row.enable_video_file_upload=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                </div>
                                <div class="col-md-4">
                                    <label class="nowrap" for="enable_video_remote_upload" title="Enable remote upload">Enable video remote upload</label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="yes" name="enable_video_remote_upload" id="enable_video_remote_upload" {if $row.enable_video_remote_upload=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-4">
                                    <label class="nowrap" for="activation" title="Video Activation"><span class="fa fa-question-circle tips" title="If left unchecked, all videos will be published directly. If checked, admin will have to approve videos before they appear on website"></span> Video
                                        Activation</label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="1" name="activation" id="activation" {if $row.activation=='1'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                </div>
                                <div class="col-md-4">
                                    <label class="nowrap" for="delete_mass_upload" title="Delete Mass upload"><span class="fa fa-question-circle tips" title="Delete original files once uploaded from mass upload"></span> Delete Mass upload</label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="yes" name="delete_mass_upload" id="delete_mass_upload" {if $row.delete_mass_upload=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-10">
                                    <label class="nowrap" for="video_enable_nsfw_check" title="{lang code='option_enable_nsfw_check'}">
                                        <span class="fa fa-question-circle tips" title="{lang code='tips_enable_nsfw_check'}"></span>
                                        {lang code='option_enable_nsfw_check'}
                                        <span class="ai-powered" title="{lang code='tips_powered_by_ai'}"></span>
                                    </label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="yes" name="video_enable_nsfw_check" id="video_enable_nsfw_check" {if $row.video_enable_nsfw_check=='yes' && AIVision::isAvailable()}checked{/if} type="checkbox"
                                           class="ace ace-switch ace-switch-5" {if !AIVision::isAvailable()}title="{lang code='warning_ai_requirements'}" disabled{/if}/>
                                    <span class="lbl"></span>
                                </div>
                            </div>
                            {if !AIVision::isAvailable()}
                                <div class="row">
                                    <div class="col-md-12">
                                        <img alt="warning" src="{$imageurl}/error.png"/> {lang code='warning_ai_requirements'}
                                    </div>
                                </div>
                            {/if}
                            <hr/>
                            <div class="row">
                                <div class="col-md-8">
                                    <label class="nowrap" for="video_nsfw_check_model" title="{lang code='option_nsfw_check_model'}">{lang code='option_nsfw_check_model'}</label>
                                </div>
                                <div class="col-md-4">
                                    <select class="form-control" name="video_nsfw_check_model" id="video_nsfw_check_model" {if !AIVision::isAvailable()}title="{lang code='warning_ai_requirements'}" disabled{/if}>
                                        {assign var=array_modes value=[
                                        'nudity'       => 'option_nudity'
                                        ,'nsfw'        => 'option_nsfw'
                                        ,'nudity+nsfw' => 'option_nudity_nsfw'
                                        ]}
                                        {foreach from=$array_modes item=trad key=code}
                                            <option {if $code==$row.video_nsfw_check_model}selected{/if} value="{$code}">
                                                {lang code=$trad}
                                            </option>
                                        {/foreach}
                                    </select>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="nowrap" for="max_video_duration" title="Max video duration">Max video duration</label>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <input class="form-control" name="max_video_duration" id="max_video_duration" value="{$row.max_video_duration}" size="45"/>
                                        <span class="input-group-addon" title="{lang('in_x',lang('minutes'))}">{lang code='minutes'}</span>
                                    </div>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-12">
                                    <label class="nowrap" for="allowed_video_types" title="Allowed Video extensions"><span class="fa fa-question-circle tips" title="{lang code='separated_by_commas'}"></span> Allowed Video extensions</label>
                                    <textarea class="form-control" name="allowed_video_types" id="allowed_video_types" cols="45" rows="5">{$row.allowed_video_types}</textarea>
                                </div>
                            </div>
                            <hr/>

                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-12">
                                    <h3>{lang code='photos'}</h3>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-4">
                                    <label class="nowrap" for="enable_photo_file_upload" title="Enable remote upload">Enable photo file upload</label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="yes" name="enable_photo_file_upload" id="enable_photo_file_upload" {if $row.enable_photo_file_upload=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                </div>
                                <div class="col-md-4">
                                    <label class="nowrap" for="photo_activation" title="Photo Activation"><span class="fa fa-question-circle tips" title="If left unchecked, all photos will be published directly. If checked, admin will have to approve videos before they appear on website"></span>
                                        Photo Activation</label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="1" name="photo_activation" id="photo_activation" {if $row.photo_activation=='1'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="nowrap" for="max_profile_pic_size" title="Max profile pic size">Max profile pic size</label>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <input class="form-control" name="max_profile_pic_size" id="max_profile_pic_size" value="{$row.max_profile_pic_size}" size="45"/>
                                        <span class="input-group-addon" title="{lang('in_x',lang('kb'))}">{lang code='kb'}</span>
                                    </div>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="nowrap" for="max_bg_size" title="Max Background Size">Max Background Size</label>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <input class="form-control" name="max_bg_size" id="max_bg_size" value="{$row.max_bg_size}" size="45"/>
                                        <span class="input-group-addon" title="{lang('in_x',lang('kb'))}">{lang code='kb'}</span>
                                    </div>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-10">
                                    <label class="nowrap" for="photo_enable_nsfw_check" title="{lang code='option_enable_nsfw_check'}">
                                        <span class="fa fa-question-circle tips" title="{lang code='tips_enable_nsfw_check'}"></span>
                                        {lang code='option_enable_nsfw_check'}
                                        <span class="ai-powered" title="{lang code='tips_powered_by_ai'}"></span>
                                    </label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="yes" name="photo_enable_nsfw_check" id="photo_enable_nsfw_check" {if $row.photo_enable_nsfw_check=='yes' && AIVision::isAvailable()}checked{/if} type="checkbox"
                                           class="ace ace-switch ace-switch-5" {if !AIVision::isAvailable()}title="{lang code='warning_ai_requirements'}" disabled{/if}/>
                                    <span class="lbl"></span>
                                </div>
                            </div>
                            {if !AIVision::isAvailable()}
                                <div class="row">
                                    <div class="col-md-12">
                                        <img alt="warning" src="{$imageurl}/error.png"/> {lang code='warning_ai_requirements'}
                                    </div>
                                </div>
                            {/if}
                            <hr/>
                            <div class="row">
                                <div class="col-md-8">
                                    <label class="nowrap" for="photo_nsfw_check_model" title="{lang code='option_nsfw_check_model'}">{lang code='option_nsfw_check_model'}</label>
                                </div>
                                <div class="col-md-4">
                                    <select class="form-control" name="photo_nsfw_check_model" id="photo_nsfw_check_model" {if !AIVision::isAvailable()}title="{lang code='warning_ai_requirements'}" disabled{/if}>
                                        {assign var=array_modes value=[
                                        'nudity'       => 'option_nudity'
                                        ,'nsfw'        => 'option_nsfw'
                                        ,'nudity+nsfw' => 'option_nudity_nsfw'
                                        ]}
                                        {foreach from=$array_modes item=trad key=code}
                                            <option {if $code==$row.photo_nsfw_check_model}selected{/if} value="{$code}">
                                                {lang code=$trad}
                                            </option>
                                        {/foreach}
                                    </select>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="nowrap" for="max_photo_size" title="Maximum allowed photo size">Maximum allowed photo size</label>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <input class="form-control" name="max_photo_size" id="max_photo_size" value="{$row.max_photo_size}" size="45"/>
                                        <span class="input-group-addon" title="{lang('in_x',lang('mb'))}">{lang code='mb'}</span>
                                    </div>
                                </div>
                            </div>
                            <hr/>

                            <div class="row">
                                <div class="col-md-12">
                                    <label class="nowrap" for="allowed_photo_types" title="Allowed Photo extensions"><span class="fa fa-question-circle tips" title="{lang code='separated_by_commas'}"></span> Allowed Photo extensions</label>
                                    <textarea class="form-control" name="allowed_photo_types" id="allowed_photo_types" cols="45" rows="5">{$row.allowed_photo_types}</textarea>
                                </div>
                            </div>
                            <hr/>

                        </div>

                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-12">
                                    <h3>{lang code='general'}</h3>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="nowrap" for="max_upload_size" title="Max upload file size">
                                        <span class="fa fa-question-circle tips" title="Global maximum filesize allowed to be uploaded"></span>
                                        Max upload file size
                                    </label>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <input class="form-control" name="max_upload_size" id="max_upload_size" value="{$row.max_upload_size}" size="45"/>
                                        <span class="input-group-addon" title="{lang('in_x',lang('mb'))}">{lang code='mb'}</span>
                                    </div>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-4">
                                    <label class="nowrap" for="enable_chunk_upload" title="{lang code='option_enable_chunk_upload'}">
                                        <span class="fa fa-question-circle tips" title="{lang code='tips_enable_chunk_upload'}"></span>
                                        {lang code='option_enable_chunk_upload'}
                                    </label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="yes" name="enable_chunk_upload" id="enable_chunk_upload" {if $row.enable_chunk_upload=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                </div>
                                <div class="col-md-3">
                                    <label class="nowrap" for="chunk_upload_size" title="Max upload file size">
                                        Chunk size
                                    </label>
                                </div>
                                <div class="col-md-3">
                                    <div class="input-group">
                                        <input class="form-control" name="chunk_upload_size" id="chunk_upload_size" value="{$row.chunk_upload_size}" size="45"/>
                                        <span class="input-group-addon" title="{lang('in_x',lang('mb'))}">{lang code='mb'}</span>
                                    </div>
                                </div>
                            </div>
                            <hr/>

                        </div>
                    </div>
                </div>
                <div id="config_conversion" class="tab-pane">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="nowrap" for="num_thumbs" title="Number of video thumbs">Number of video thumbs</label>
                                </div>
                                <div class="col-md-6">
                                    <input class="form-control" name="num_thumbs" id="num_thumbs" value="{$row.num_thumbs}"/>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="nowrap" for="thumb_background_color" title="{lang code='option_thumb_background_color'}">{lang code='option_thumb_background_color'}</label>
                                </div>
                                <div class="col-md-6">
                                    <input type="color" class="form-control" id="thumb_background_color" name="thumb_background_color" value="{$row.thumb_background_color}"/>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="nowrap" for="video_codec" title="Video Codec">Video Codec</label>
                                </div>
                                <div class="col-md-3">
                                    <input class="form-control" name="video_codec" id="video_codec" value="{$row.video_codec}"/>
                                </div>
                                <div class="col-md-3">
                                    <label class="nowrap" for="audio_codec" title="Audio Codec">Audio Codec</label>
                                </div>
                                <div class="col-md-3">
                                    <input class="form-control" name="audio_codec" id="audio_codec" value="{$row.audio_codec}"/>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="nowrap" for="srate" title="Audio Rate">Audio Rate</label>
                                </div>
                                <div class="col-md-3">
                                    <input class="form-control" name="srate" id="srate" value="{$row.srate}"/>
                                </div>
                                <div class="col-md-3">
                                    <label class="nowrap" for="sbrate" title="Audio Bitrate">Audio Bitrate</label>
                                </div>
                                <div class="col-md-3">
                                    <input class="form-control" name="sbrate" id="sbrate" value="{$row.sbrate}"/>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="nowrap" for="vrate" title="Frame rate target"><span class="fa fa-question-circle tips" title="Video rate will be calculated to be the closer as possible from this value"></span> Frame rate target</label>
                                </div>
                                <div class="col-md-3">
                                    <input class="form-control" name="vrate" id="vrate" value="{$row.vrate}"/>
                                </div>
                                <div class="col-md-3">
                                    <label class="nowrap" for="subtitle_format" title="Subtitle Format">Subtitle Format</label>
                                </div>
                                <div class="col-md-3">
                                    <input class="form-control" name="subtitle_format" id="subtitle_format" value="{$row.subtitle_format}"/>
                                </div>
                            </div>
                            <hr/>

                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-10">
                                    <label class="nowrap" for="chromecast_fix" title="Chromecast compatibility" class="nowrap"><span class="fa fa-question-circle tips" title="Force audio conversion to Stereo"></span> Chromecast compatibility</label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="1" name="chromecast_fix" id="chromecast_fix" {if $row.chromecast_fix=='1'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-10">
                                    <label class="nowrap" for="force_8bits" title="Improve compatibility"><span class="fa fa-question-circle tips" title="Force video to 8bits colors maximum"></span> Improve compatibility</label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="1" name="force_8bits" id="force_8bits" {if $row.force_8bits=='1'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-10">
                                    <label class="nowrap" for="extract_subtitles" title="Extract subtitles"><span class="fa fa-question-circle tips" title="Extract subtitles to dedicated files"></span> Extract subtitles</label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="1" name="extract_subtitles" id="extract_subtitles" {if $row.extract_subtitles=='1'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-6 row-size">
                                    <label><span class="fa fa-question-circle tips" title="Choose it wisely ! MP4 won't allow multiple audio tracks ; HLS won't allow download and require FFmpeg 4.3+"></span> Conversion type</label>
                                </div>
                                <div class="col-md-1">
                                    <input value="mp4" name="conversion_type" id="convesion_type_mp4" {if $row.conversion_type=='mp4'}checked{/if} type="radio" class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                </div>
                                <div class="col-md-2">
                                    <label class="nowrap" for="convesion_type_mp4" title="MP4">MP4</label>
                                </div>
                                <div class="col-md-1">
                                    <input value="hls" name="conversion_type" id="convesion_type_hls" {if $row.conversion_type=='hls'}checked{/if} type="radio" class="ace ace-switch ace-switch-5" {if $ffmpeg_version<'4.3'}disabled title='Require FFmpeg 4.3+'{/if}/>
                                    <span class="lbl"></span>
                                </div>
                                <div class="col-md-2">
                                    <label class="nowrap" for="convesion_type_hls" title="HLS">HLS</label>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-10">
                                    <label class="nowrap" for="stay_mp4" title="Stay MP4 as it is"><span class="fa fa-question-circle tips" title="Only use this option if you only want MP4 file uplad : this option disable video conversion and keep mp4 files as they are uploaded"></span> Stay MP4 as
                                        it
                                        is</label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="yes" name="stay_mp4" id="stay_mp4" {if $row.stay_mp4=='yes'}checked{/if} type="checkbox" {if $row.conversion_type=='hls'}disabled{/if} class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                    <input value="{$row.stay_mp4}" name="stay_mp4" id="stay_mp4_hidden" type="hidden" {if $row.conversion_type!='hls'}disabled{/if}/>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-10">
                                    <label class="nowrap" for="keep_audio_tracks" title="Keep audio tracks"><span class="fa fa-question-circle tips" title="Conserve all audio tracks in video files"></span> Keep audio tracks</label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="1" name="keep_audio_tracks" id="keep_audio_tracks" {if $row.keep_audio_tracks=='1'}checked{/if} type="checkbox" {if $row.conversion_type=='hls'}disabled{/if} class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                    <input value="{$row.keep_audio_tracks}" name="keep_audio_tracks" id="keep_audio_tracks_hidden" type="hidden" {if $row.conversion_type!='hls'}disabled{/if}/>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-md-10">
                                    <label class="nowrap" for="keep_subtitles" title="Keep subtitles"><span class="fa fa-question-circle tips" title="Conserve subtitles in video files"></span> Keep subtitles</label>
                                </div>
                                <div class="col-md-2 row-size">
                                    <input value="1" name="keep_subtitles" id="keep_subtitles" {if $row.keep_subtitles=='1'}checked{/if} type="checkbox" {if $row.conversion_type=='hls'}disabled{/if} class="ace ace-switch ace-switch-5"/>
                                    <span class="lbl"></span>
                                    <input value="{$row.keep_subtitles}" name="keep_subtitles" id="keep_subtitles_hidden" type="hidden" {if $row.conversion_type!='hls'}disabled{/if}/>
                                </div>
                            </div>
                            <hr/>

                        </div>

                        <div class="col-md-4">
                            <div class="alert alert-info">
                                <div class="row">
                                    <ul class="nav nav-tabs resolutions">
                                        <li style=width:130px;">
                                            Video Resolutions
                                        </li>
                                        {$first = true}
                                        {foreach from=$video_resolutions key=key item=ratio}
                                            <li class="{if $first}active{/if}">
                                                <a data-toggle="tab" href="gen_{str_replace('/','_',$key)}">
                                                    <h8>{$key}</h8>
                                                </a>
                                            </li>
                                            {$first = false}
                                        {/foreach}

                                    </ul>
                                    <div class="tab-content">
                                        {$first = true}
                                        {foreach from=$video_resolutions key=key item=ratio}
                                        <div id="gen_{str_replace('/','_',$key)}" class="tab-pane resolutions {if $first}active{/if}">
                                            {$count = 0}
                                            {foreach from=$ratio item=resolution}
                                                {if $count == 0}
                                                    <div class="row">
                                                {/if}
                                                <div class="col-md-2">
                                                    <label class="nowrap" for="gen_{$resolution.title}" title="{$resolution.title}">{$resolution.title}</label>
                                                </div>
                                                <div class="col-md-2">
                                                    <input value="yes" name="gen_{$resolution.title}" id="gen_{$resolution.title}" {if {$resolution.enabled}=='1'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                                                    <span class="lbl"></span>
                                                </div>
                                                {$count = $count+1}
                                                {if $count == 3}
                                                    </div>
                                                    <hr/>
                                                    {$count = 0}
                                                {/if}
                                            {/foreach}
                                            {if $count != 0}
                                        </div>
                                        {/if}
                                    </div>
                                    {$first = false}
                                    {/foreach}
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <ul class="nav nav-tabs resolutions">
                                    <li style=width:130px;">
                                        Video Bitrates
                                    </li>
                                    {$first = true}
                                    {foreach from=$video_resolutions key=key item=ratio}
                                        <li class="{if $first}active{/if}">
                                            <a data-toggle="tab" href="bitrates_{str_replace('/','_',$key)}">
                                                <h8>{$key}</h8>
                                            </a>
                                        </li>
                                        {$first = false}
                                    {/foreach}
                                </ul>

                                <div class="tab-content">
                                    {$first = true}
                                    {foreach from=$video_resolutions key=key item=ratio}
                                    <div id="bitrates_{str_replace('/','_',$key)}" class="tab-pane resolutions {if $first}active{/if}">
                                        {$count = 0}
                                        {foreach from=$ratio item=resolution}
                                            {if $count == 0}
                                                <div class="row">
                                            {/if}
                                            <div class="col-md-3">
                                                <label class="nowrap" for="vbrate_{$resolution.title}" title="{$resolution.title}">{$resolution.title}</label>
                                            </div>
                                            <div class="col-md-3">
                                                <input class="form-control" name="vbrate_{$resolution.title}" id="vbrate_{$resolution.title}" value="{$resolution.video_bitrate}"/>
                                            </div>
                                            {$count = $count+1}
                                            {if $count == 2}
                                                </div>
                                                <hr/>
                                                {$count = 0}
                                            {/if}
                                        {/foreach}
                                        {if $count != 0}
                                    </div>
                                    {/if}
                                </div>
                                {$first = false}
                                {/foreach}
                            </div>
                        </div>
                        <hr/>
                        <div class="row">
                            <div class="col-md-10">
                                <label class="nowrap" for="allow_conversion_1_percent" title="Allow 1% difference"><span class="fa fa-question-circle tips" title="Allow a 1% lower difference between expected video height/width and current video height/width"></span> Allow 1% difference</label>
                            </div>
                            <div class="col-md-2 row-size">
                                <input value="yes" name="allow_conversion_1_percent" id="allow_conversion_1_percent" {if $row.allow_conversion_1_percent=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                                <span class="lbl"></span>
                            </div>
                        </div>
                        <hr/>
                        <div class="row">
                            <div class="col-md-10">
                                <label class="nowrap" for="only_keep_max_resolution" title="Keep subtitles">{lang code='only_keep_max_resolution'}</label>
                            </div>
                            <div class="col-md-2 row-size">
                                <input value="yes" name="only_keep_max_resolution" id="only_keep_max_resolution" {if $row.only_keep_max_resolution=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                                <span class="lbl"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="config_emails" class="tab-pane">
            <div class="row">
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="email_sender_address" title="{lang('email_sender_address')}">{lang('email_sender_address')}</label>
                        </div>
                        <div class="col-md-6">
                            <input class="form-control" name="email_sender_address" id="email_sender_address" value="{$row.email_sender_address}"/>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="email_sender_name" title="{lang('email_sender_name')}">{lang('email_sender_name')}</label>
                        </div>
                        <div class="col-md-6">
                            <input class="form-control" name="email_sender_name" id="email_sender_name" value="{$row.email_sender_name}"/>
                        </div>
                    </div>
                    <hr/>
                </div>
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="send_comment_notification" title="Send Comment Notification">Send Comment Notification</label>
                        </div>
                        <div class="col-md-6 row-size">
                            <input value="yes" name="send_comment_notification" id="send_comment_notification" {if $row.send_comment_notification=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                            <span class="lbl"></span>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="approve_video_notification" title="Send Video Approve Notification">Send Video Approve Notification</label>
                        </div>
                        <div class="col-md-6 row-size">
                            <input value="yes" name="approve_video_notification" id="approve_video_notification" {if $row.approve_video_notification=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                            <span class="lbl"></span>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="disable_email" title="{lang code='disable_email'}">{lang code='disable_email'}</label>
                        </div>
                        <div class="col-md-6 row-size">
                            <input value="yes" name="disable_email" id="disable_email" {if $row.disable_email=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                            <span class="lbl"></span>
                        </div>
                    </div>
                    <hr/>

                </div>
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="mail_type" title="Mailer">Mailer</label>
                        </div>
                        <div class="col-md-6 row-size">
                            <select class="form-control" name="mail_type" id="mail_type">
                                <option value="mail" {if $row.mail_type=='mail'}selected{/if}>PHP mail()</option>
                                <option value="smtp" {if $row.mail_type=='smtp'}selected{/if}>smtp</option>
                            </select>
                        </div>
                    </div>
                    <hr/>
                    <div class="row config_smtp" {if $row.mail_type=='mail'}style="display:none;"{/if}>
                        <div class="col-md-6">
                            <label class="nowrap" for="smtp_host" title="SMTP Host">SMTP Host</label>
                        </div>
                        <div class="col-md-6 row-size">
                            <input class="form-control" name="smtp_host" id="smtp_host" value="{$row.smtp_host}"/>
                        </div>
                    </div>
                    <hr class="config_smtp" {if $row.mail_type=='mail'}style="display:none;"{/if}/>
                    <div class="row config_smtp" {if $row.mail_type=='mail'}style="display:none;"{/if}>
                        <div class="col-md-6">
                            <label class="nowrap" for="smtp_port" title="SMTP Port">SMTP Port</label>
                        </div>
                        <div class="col-md-6 row-size">
                            <input class="form-control" name="smtp_port" id="smtp_port" value="{$row.smtp_port}"/>
                        </div>
                    </div>
                    <hr class="config_smtp" {if $row.mail_type=='mail'}style="display:none;"{/if}/>
                    <div class="row config_smtp" {if $row.mail_type=='mail'}style="display:none;"{/if}>
                        <div class="col-md-6">
                            <label class="nowrap" for="smtp_auth" title="SMTP Auth">SMTP Auth</label>
                        </div>
                        <div class="col-md-6 row-size">
                            <input value="yes" name="smtp_auth" id="smtp_auth" {if $row.smtp_auth=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                            <span class="lbl"></span>
                        </div>
                    </div>
                    <hr class="config_smtp config_smtp_auth" {if $row.mail_type=='mail'||$row.smtp_auth!='yes'}style="display:none;"{/if}/>
                    <div class="row config_smtp config_smtp_auth" {if $row.mail_type=='mail'||$row.smtp_auth!='yes'}style="display:none;"{/if}>
                        <div class="col-md-6">
                            <label class="nowrap" for="smtp_user" title="SMTP Username">SMTP Username</label>
                        </div>
                        <div class="col-md-6 row-size">
                            <input class="form-control" name="smtp_user" id="smtp_user" value="{$row.smtp_user}"/>
                        </div>
                    </div>
                    <hr class="config_smtp config_smtp_auth" {if $row.mail_type=='mail'||$row.smtp_auth!='yes'}style="display:none;"{/if}/>
                    <div class="row config_smtp config_smtp_auth" {if $row.mail_type=='mail'||$row.smtp_auth!='yes'}style="display:none;"{/if}>
                        <div class="col-md-6">
                            <label class="nowrap" for="smtp_pass" title="SMTP Password">SMTP Password</label>
                        </div>
                        <div class="col-md-6 row-size">
                            <input class="form-control" name="smtp_pass" id="smtp_pass" value="{$row.smtp_pass}"/>
                        </div>
                    </div>
                    <hr class="config_smtp config_smtp_auth" {if $row.mail_type=='mail'||$row.smtp_auth!='yes'}style="display:none;"{/if}/>

                </div>

            </div>
        </div>
        <div id="config_proxy" class="tab-pane">
            <div class="row">
                <div class="col-md-3">
                    <div class="row">
                        <div class="col-md-8">
                            <label class="nowrap" for="proxy_enable" title="Enable proxy">Enable proxy</label>
                        </div>
                        <div class="col-md-4 row-size">
                            <input value="yes" name="proxy_enable" id="proxy_enable" {if $row.proxy_enable=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                            <span class="lbl"></span>
                        </div>
                    </div>
                    <hr/>

                    <div class="row">
                        <div class="col-md-8">
                            <label class="nowrap" for="proxy_auth" title="Enable proxy authentification">Enable proxy authentification</label>
                        </div>
                        <div class="col-md-4 row-size">
                            <input value="yes" name="proxy_auth" id="proxy_auth" {if $row.proxy_auth=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                            <span class="lbl"></span>
                        </div>
                    </div>
                    <hr/>

                </div>
                <div class="col-md-3">
                    <div class="row">
                        <div class="col-md-4">
                            <label class="nowrap" for="proxy_url" title="URL">URL</label>
                        </div>
                        <div class="col-md-8 row-size">
                            <input class="form-control" name="proxy_url" id="proxy_url" value="{$row.proxy_url}"/>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-4">
                            <label class="nowrap" for="proxy_username" title="Username">Username</label>
                        </div>
                        <div class="col-md-8 row-size">
                            <input class="form-control" name="proxy_username" id="proxy_username" value="{$row.proxy_username}"/>
                        </div>
                    </div>
                    <hr/>

                </div>
                <div class="col-md-3">
                    <div class="row">
                        <div class="col-md-4">
                            <label class="nowrap" for="proxy_port" title="Port">Port</label>
                        </div>
                        <div class="col-md-8 row-size">
                            <input class="form-control" name="proxy_port" id="proxy_port" value="{$row.proxy_port}"/>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-4">
                            <label class="nowrap" for="proxy_password" title="Password">Password</label>
                        </div>
                        <div class="col-md-8 row-size">
                            <input class="form-control" name="proxy_password" id="proxy_password" value="{$row.proxy_password}"/>
                        </div>
                    </div>
                    <hr/>
                </div>
            </div>
        </div>
        <div id="config_cache" class="tab-pane">
            <div class="row">
                <div class="col-md-12">
                    <h3>Redis</h3>
                </div>
            </div>
            <hr/>
            <div class="row">
                <div class="col-md-3">
                    <div class="row">
                        <div class="col-md-8">
                            <label class="nowrap" for="cache_enable" title="{lang code='enable_cache'}">{lang code='enable_cache'}</label>
                        </div>
                        <div class="col-md-4 row-size">
                            <input value="yes" name="cache_enable" id="cache_enable" {if $row.cache_enable=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                            <span class="lbl"></span>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-8">
                            <label class="nowrap" for="cache_auth" title="{lang code='enable_cache_authentification'}">{lang code='enable_cache_authentification'}</label>
                        </div>
                        <div class="col-md-4 row-size">
                            <input value="yes" name="cache_auth" id="cache_auth" {if $row.cache_auth=='yes'}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                            <span class="lbl"></span>
                        </div>
                    </div>
                    <hr/>
                </div>
                <div class="col-md-3">
                    <div class="row">
                        <div class="col-md-4">
                            <label class="nowrap" for="cache_host" title="{lang code='host'}">{lang code='host'}</label>
                        </div>
                        <div class="col-md-8 row-size">
                            <input class="form-control" name="cache_host" id="cache_host" value="{$row.cache_host}"/>
                        </div>
                    </div>
                    <hr/>
                </div>
                <div class="col-md-3">
                    <div class="row">
                        <div class="col-md-4">
                            <label class="nowrap" for="cache_port" title="{lang code='port'}">{lang code='port'}</label>
                        </div>
                        <div class="col-md-8 row-size">
                            <input class="form-control" name="cache_port" id="cache_port" value="{$row.cache_port}"/>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-4">
                            <label class="nowrap" for="cache_password" title="{lang code='password'}">{lang code='password'}</label>
                        </div>
                        <div class="col-md-8 row-size">
                            <input class="form-control" name="cache_password" id="cache_password" value="{$row.cache_password}"/>
                        </div>
                    </div>
                    <hr/>
                </div>
            </div>
        </div>
        <div id="config_dev" class="tab-pane">
            <div class="row">
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-5">
                            <label class="nowrap" for="enable_dev_mode" title="{lang code='dev_mode'}">{lang code='dev_mode'}</label>
                        </div>
                        <div class="col-md-2 row-size">
                            <input value="yes" name="enable_dev_mode" id="enable_dev_mode" {if $DEVELOPMENT_MODE}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                            <span class="lbl"></span>
                        </div>
                    </div>
                    <hr/>
                </div>
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-5">
                            <label class="nowrap" for="discord_error_log" title="{lang code='discord_error_log'}">{lang code='discord_error_log'}</label>
                        </div>
                        <div class="col-md-2 row-size">
                            <input value="yes" name="discord_error_log" id="discord_error_log" {if $discord_error_log}checked{/if} type="checkbox" class="ace ace-switch ace-switch-5"/>
                            <span class="lbl"></span>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-4">
                            <label class="nowrap" for="discord_webhook_url" title="{lang code='discord_webhook_url'}">{lang code='discord_webhook_url'}</label>
                        </div>
                        <div class="col-md-8 row-size">
                            <input class="form-control" name="discord_webhook_url" id="discord_webhook_url" value="{$discord_webhook_url}" {if !$discord_error_log}disabled="disabled"{/if}/>
                        </div>
                    </div>
                    <hr/>
                </div>
            </div>
        </div>
        <div id="config_hosting" class="tab-pane">
            <div class="row">
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="php_path" title="PHP Path"><span class="fa fa-question-circle tips" title="PHP Binary Path"></span> PHP Path</label>
                        </div>
                        <div class="col-md-6">
                            <input class="form-control" name="php_path" id="php_path" value="{$row.php_path}"/>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="media_info" title="Mediainfo Path"><span class="fa fa-question-circle tips" title="Mediainfo Binary Path"></span> Mediainfo Path</label>
                        </div>
                        <div class="col-md-6">
                            <input class="form-control" name="media_info" id="media_info" value="{$row.media_info}"/>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="ffmpegpath" title="FFmpeg Path"><span class="fa fa-question-circle tips" title="FFmpeg Binary Path"></span> FFmpeg Path</label>
                        </div>
                        <div class="col-md-6">
                            <input class="form-control" name="ffmpegpath" id="ffmpegpath" value="{$row.ffmpegpath}"/>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="ffprobe_path" title="FFprobe Path"><span class="fa fa-question-circle tips" title="FFprobe Binary Path"></span> FFprobe Path</label>
                        </div>
                        <div class="col-md-6">
                            <input class="form-control" name="ffprobe_path" id="ffprobe_path" value="{$row.ffprobe_path}"/>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="max_conversion" title="Max videos to convert at once">
                                <span class="fa fa-question-circle tips" title="Video conversion use lot of ressources, be aware of what's you're doing !"></span>
                                Max videos to convert at once
                            </label>
                        </div>
                        <div class="col-md-6">
                            <input class="form-control" name="max_conversion" id="max_conversion" value="{$row.max_conversion}"/>
                        </div>
                    </div>
                    <hr/>
                    <div class="row{if empty($row.base_url)} bg-danger{/if}">
                        <div class="col-md-6">
                            <label class="nowrap" for="base_url" title="{lang('website_base_url')}">
                                <span class="fa fa-question-circle tips" title="{lang('website_base_url_hint')}"></span>
                                {lang('website_base_url')}
                            </label>
                        </div>
                        <div class="col-md-6">
                            <input class="form-control" name="base_url" id="base_url" value="{$row.base_url}"/>
                        </div>
                    </div>
                    <hr/>

                </div>
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="git_path" title="{lang code='option_git_path'}">{lang code='option_git_path'}</label>
                        </div>
                        <div class="col-md-6">
                            <input class="form-control" name="git_path" id="git_path" value="{$row.git_path}"/>
                        </div>
                    </div>
                    <hr/>
                    {if System::is_nginx()}
                        <div class="row">
                            <div class="col-md-6">
                                <label class="nowrap" for="nginx_path" title="{lang code='option_nginx_path'}">{lang code='option_nginx_path'}</label>
                            </div>
                            <div class="col-md-6">
                                <input class="form-control" name="nginx_path" id="nginx_path" value="{$row.nginx_path}"/>
                            </div>
                        </div>
                        <hr/>
                    {/if}
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="cloudflare_upload_limit" title="{lang code='cloudflare_upload_limit'}">
                                <a href="https://developers.cloudflare.com/cache/concepts/default-cache-behavior/#upload-limits" target="_blank" style="text-decoration: none;">
                                    <span class="fa fa-question-circle tips" title="{lang code='cloudflare_documentation'}"></span>
                                </a> {lang code='cloudflare_upload_limit'}
                            </label>
                        </div>
                        <div class="col-md-6">
                            <div class="input-group">
                                <input class="form-control" name="cloudflare_upload_limit" id="cloudflare_upload_limit" value="{$row.cloudflare_upload_limit}" size="45"/>
                                <span class="input-group-addon" title="{lang('in_x',lang('mb'))}">{lang code='mb'}</span>
                            </div>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="automate_launch_mode" title="{lang code='option_automate_launch_mode'}"><span class="fa fa-question-circle tips" title="{lang code='tips_automate_launch_mode'}"></span> {lang code='option_automate_launch_mode'}</label>
                        </div>
                        <div class="col-md-6">
                            <select class="form-control" name="automate_launch_mode" id="automate_launch_mode">
                                {assign var=array_automate value=[
                                'crontab' => 'option_automate_launch_mode_crontab'
                                ,'user_activity' => 'option_automate_launch_mode_user_activity'
                                ,'disabled' => 'option_automate_launch_mode_disabled'
                                ]}
                                {foreach from=$array_automate item=trad key=code}
                                    <option {if $code==$row.automate_launch_mode}selected{/if} value="{$code}">
                                        {lang code=$trad}
                                    </option>
                                {/foreach}
                            </select>
                        </div>
                    </div>
                    <div class="row" id="crontab_details_block">
                        <div class="col-md-12">
                            {lang('crontab_link_label')}
                            <div class="input-group">
                                <input class="form-control" value="{$cron_copy_paste}" size="45" disabled/>
                                <span class="input-group-addon btn_copy_clipboard btn-info input-group-addon glyphicon glyphicon-copy btn_save_frequency" title="{lang('copy_clipboard')}"></span>
                            </div>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="nowrap" for="timezone" title="{lang code='option_timezone'}">{lang code='option_timezone'}</label>
                        </div>
                        <div class="col-md-6">
                            <select class="form-control check_timezone" name="timezone" id="timezone" style="width: 100%;">
                                <option {if ''==$row.timezone}selected{/if} value=""></option>
                                {foreach from=$allTimezone item=label key=code}
                                    <option {if $label==$row.timezone}selected{/if} value="{$label}">
                                        {$label}
                                    </option>
                                {/foreach}
                            </select>
                        </div>
                    </div>
                    <hr/>
                </div>
            </div>
        </div>
    </div>

    </div>

    </div>
    <br/>
    <div style="text-align:center;">
        <input type="submit" name="update" class="btn btn-primary btn-sm" value="Update Settings" id="udpate"/>
    </div>
</form>
<span id="floatingMessage" class="glyphicon glyphicon-ok"></span>