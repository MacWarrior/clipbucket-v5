<div class="modal-dialog" style="width:80%">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">{lang code='tmdb_search'}</h4>
        </div>
        <div class="modal-body">
        <div class="col-md-4">
            <div class="form-group">
                <label for="search_title">{lang code="search"}</label>
                <input name="title" type="text" class="form-control" id="search_title" value="{$search}" />
            </div>
            <div class="form-group">
                <input type="submit" name="search" id="search" value='{lang code="search"}' class="btn btn-success btn-sm"/>
            </div>
        </div>
            <table class="table table-bordered table-striped">
                <tr>
                    <th class="col-md-1" style="cursor:pointer;" title="{sprintf(lang('sort_by'),lang('title'))}">{lang code='title'} <span class="icon-sort{if $sort=='title'}{if $sort_order == 'ASC'}-up{elseif $sort_order=='DESC'}-down{/if}{/if}" style="text-align: right;" data-type="title"></span></th>
                    <th class="col-md-2" style="cursor:pointer;" title="{sprintf(lang('sort_by'),lang('release_date'))}">{lang code='release_date'}<span class="icon-sort{if $sort=='release_date'}{if $sort_order == 'ASC'}-up{elseif $sort_order=='DESC'}-down{/if}{/if}" style="text-align: right;" data-type="release_date"></span></th>
                    <th class="col-md-6">{lang code='description'}</th>
                    <th class="col-md-2">{lang code='poster'}</th>
                    <th class="col-md-1"></th>
                </tr>
                {section name=sub loop=$results}
                <tr>
                    <td>
                        <span>{display_clean($results[sub].title)}</span>
                    </td>
                    <td>
                        <span>{display_clean($results[sub].release_date)}</span>
                    </td>
                    <td>
                        <span>{display_clean($results[sub].overview)}</span>
                    </td>
                    <td>
                        <img class="tmdb_poster" src="{Tmdb::IMAGE_URL}{$results[sub].poster_path}"/>
                    </td>
                    <td>
                        <button onclick="saveInfoTmdb({display_clean($results[sub].id_tmdb_movie)}, {display_clean($videoid)})">{lang code='import'}</button>
                    </td>
                </tr>
                {/section}
            </table>
            {include file="$style_dir/blocks/pagination.html" }
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">{lang code='cancel'}</button>
        </div>
    </div>
</div>
<script>
    $(function () {
        var videoid = $('#button_info_tmdb').data('id');
        $('#search').on('click', function () {
            var video_title = $('#search_title').val();
            getInfoTmdb(videoid, video_title, 1);
        });
        $('.icon-sort').parent().on('click', function () {
            var video_title = $('#search_title').val();
            $(this).children().first().removeClass('icon-sort');
            $(this).children().first().addClass('icon-sort-up');
            getInfoTmdb(videoid, video_title, 1, $(this).children().first().data('type'), 'ASC');
        });
        $('.icon-sort-up').parent().on('click', function () {
            var video_title = $('#search_title').val();
            $(this).children().first().removeClass('icon-sort-up');
            $(this).children().first().addClass('icon-sort-down');
            getInfoTmdb(videoid, video_title, 1, $(this).children().first().data('type'), 'DESC');
        });
        $('.icon-sort-down').parent().on('click', function () {
            var video_title = $('#search_title').val();
            $(this).children().first().removeClass('icon-sort-down');
            $(this).children().first().addClass('icon-sort-up');
            getInfoTmdb(videoid, video_title, 1, $(this).children().first().data('type'), 'ASC');
        });
    });
</script>
