var max_try=5;$(function(){var e=0,s=new EventSource("/actions/progress_tool.php");s.addEventListener("message",function(a){console.log(a.data)},!1),s.addEventListener("open",function(a){console.log("opened"),max_try<e&&s.close(),e++},!1),s.addEventListener("error",function(a){a.readyState==EventSource.CLOSED&&console.log("closed")},!1),$(".launch").on("click",function(){var e,t=$(this);t.parent().hasClass("disabled")||(e=$(this).data("id"),$.ajax({url:"/actions/launch_tool.php",type:"POST",data:{id_tool:e},dataType:"json",success:function(a){$("#progress-"+e).show(),$("#progress-bar-"+e).attr("aria-valuenow",0),$("#span-"+e).html(a.libelle_status),$(".page-content").prepend(a.msg),t.parent().addClass("disabled"),$('.stop[data-id="'+e+'"]').parent().removeClass("disabled")}}))}),$(".stop").on("click",function(){var e,t=$(this);$(this).parent().hasClass("disabled")||(e=t.data("id"),$.ajax({url:"/actions/stop_tool.php",type:"POST",data:{id_tool:e},dataType:"json",success:function(a){$("#span-"+e).html(a.libelle_status),t.parent().addClass("disabled"),$(".page-content").prepend(a.msg),s.close()}}))})});