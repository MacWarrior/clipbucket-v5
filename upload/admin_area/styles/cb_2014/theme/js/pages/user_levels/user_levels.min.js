document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".delete").forEach(function(e){e.addEventListener("click",function(){if(e.hasAttribute("disabled"))return;let t=e.dataset.id,l=e.dataset.confirm;l?confirm(lang.confirm_delete_user_level)&&(window.location.href=`?action=delete&lid=${t}`):window.location.href=`?action=delete&lid=${t}`})}),document.querySelectorAll(".user_level_active").forEach(function(e){e.addEventListener("change",function(){let t=e.dataset.id,l=e.checked,n=new URLSearchParams;n.append("user_level_id",t),n.append("active",l),fetch("/actions/admin_activate_user_level.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}).then(e=>e.json()).then(e=>{document.querySelector(".page-content").insertAdjacentHTML("afterbegin",e.msg);let n=document.querySelector(`.user_level_is_default[data-id="${t}"]`);if(n){l?(n.disabled=!1,n.title=""):(n.disabled=!0,n.title=lang.cannot_be_default_until_activated);let a=document.querySelector(`.delete[data-id="${t}"]`);a&&(!1===n.disabled?(a.disabled=!1,a.title=""):(a.disabled=!0,a.title=lang.default_userlevel_cannot_be_deleted))}}).finally(()=>{hideSpinner()})})}),document.querySelectorAll(".user_level_is_default").forEach(function(e){e.addEventListener("change",function(){let t=e.dataset.id;showSpinner();let l=new URLSearchParams;l.append("user_level_id",t),fetch("/actions/admin_set_default_user_level.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l}).then(e=>e.json()).then(e=>{document.querySelector(".page-content").insertAdjacentHTML("afterbegin",e.msg),e.success&&window.location.reload()}).finally(()=>{hideSpinner()})})})});
