document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".delete").forEach(function(t){t.addEventListener("click",function(){var e;t.hasAttribute("disabled")||(e=t.dataset.id,t.dataset.confirm&&!confirm(lang.confirm_delete_user_level))||(window.location.href="?action=delete&lid="+e)})}),document.querySelectorAll(".user_level_active").forEach(function(t){t.addEventListener("change",function(){const n=t.dataset.id,a=t.checked;var e=new URLSearchParams;e.append("user_level_id",n),e.append("active",a),fetch("actions/user_level_activate.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}).then(e=>e.json()).then(e=>{document.querySelector(".page-content").insertAdjacentHTML("afterbegin",e.msg);var t,e=document.querySelector(`.user_level_is_default[data-id="${n}"]`);e&&(a?(e.disabled=!1,e.title=""):(e.disabled=!0,e.title=lang.cannot_be_default_until_activated),t=document.querySelector(`.delete[data-id="${n}"]`))&&(!1===e.disabled?(t.disabled=!1,t.title=""):(t.disabled=!0,t.title=lang.default_userlevel_cannot_be_deleted))}).finally(()=>{hideSpinner()})})}),document.querySelectorAll(".user_level_is_default").forEach(function(n){n.addEventListener("change",function(){var e=n.dataset.id,t=(showSpinner(),new URLSearchParams);t.append("user_level_id",e),fetch("actions/user_level_set_default.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}).then(e=>e.json()).then(e=>{document.querySelector(".page-content").insertAdjacentHTML("afterbegin",e.msg),e.success&&window.location.reload()}).finally(()=>{hideSpinner()})})})});