$(document).ready(function(){$("#embed_player_hideshow").on("click",function(e){e.preventDefault(),$("#form_add_embed_player").slideDown(),$(this).fadeOut()}),$("#embed_player_cancel").on("click",function(e){e.preventDefault(),$("#form_add_embed_player").slideUp(),$("#embed_player_hideshow").fadeIn()});var e=admin_url+"actions/embed_player_update.php";function t(){$(".edit_embed_player").off("click").on("click",function(){let e=$(this).data("id");$(".input-"+e).show(),$("#ok-"+e).show(),$("#remove-"+e).show(),$(".edit-"+e).hide(),$("#delete-"+e).hide(),$("#edit-"+e).hide()}),$(".cancel_embed_player").off("click").on("click",function(){let e=$(this).data("id");$(".input-"+e).hide(),$("#ok-"+e).hide(),$("#remove-"+e).hide(),$(".edit-"+e).show(),$("#delete-"+e).show(),$("#edit-"+e).show()}),$('input[name="enable"]').off("change").on("change",function(){let t=$(this).data("id");$.post({url:e,data:{mode:"enable",id_video_embed:t,enabled:$(this).is(":checked")},dataType:"json",success:function(e){!0!==e.success&&$(".page-content").prepend(e.msg)}})}),$(".confirm_update_embed_player").off("click").on("click",function(){let t=$(this).data("id");$.ajax({url:e,type:"post",dataType:"json",data:{mode:"update",id_video_embed:t,id_fontawesome_icon:$("#input_id_fontawesome_icon-"+t).val(),title:$("#input_title-"+t).val(),html:$("#input_html-"+t).val(),order:$("#input_order-"+t).val()},success:function(e){$("#icon_"+t+" span.fa").removeClass().addClass("fa").addClass("fa-"+e.data.icon),$("#icon_"+t+" span.text-icon").html(e.data.icon),$("#title_"+t).html(e.data.title),$("#html_"+t).text(e.data.html),$("#order_"+t).html(e.data.social_network_link_order),$(".input-"+t).hide(),$("#ok-"+t).hide(),$("#remove-"+t).hide(),$("#edit-"+t).show(),$(".edit-"+t).show(),$("#delete-"+t).show(),$(".page-content").prepend(e.msg)}})}),$(".delete_embed_player").off("click").on("click",function(){if(!confirm(lang.confirm_delete_embed_player))return;let t=$(this).data("id");$.ajax({url:e,type:"post",dataType:"json",data:{mode:"delete",id_video_embed:t},success:function(e){if(!0===e.success){let a=$("#tr_"+t);a.fadeOut(function(){let e=a.closest("tbody");0===e.children("tr").filter(function(){let e=$(this);return!e.find("th").length&&!e.find(".empty_table").length&&e.is(":visible")}).length&&e.find(".empty_table").closest("tr").fadeIn()})}else alert(lang.technical_error)}})})}$("#embed_player_validate").on("click",function(a){a.preventDefault(),$.ajax({url:e,type:"post",dataType:"json",data:{mode:"create",videoid:videoid,id_fontawesome_icon:$("#new_embed_player_id_fontawesome_icon").val(),title:$("#new_embed_player_title").val(),html:$("#new_embed_player_html").val(),order:$("#new_embed_player_order").val()},success:function(e){if(!0===e.success){$("#form_add_embed_player").slideUp(),$("#embed_player_hideshow").fadeIn(),$("#new_embed_player_id_fontawesome_icon").val(1),$("#new_embed_player_title").val(""),$("#new_embed_player_html").val(""),$("#new_embed_player_order").val("");let a=$(e.data.html).hide();$("#embed_player table tbody").append(a);a.find(".icon_select").each(function(){$(this).select2({templateSelection:select2_format_icon,templateResult:select2_format_icon,allowHtml:!0})}),$(".empty_table")&&$(".empty_table").closest("tr").is(":visible")?$(".empty_table").closest("tr").fadeOut(function(){a.fadeIn()}):a.fadeIn(),t()}else $(".page-content").prepend(e.msg)}})}),t(),$(".icon_select").select2({templateSelection:select2_format_icon,templateResult:select2_format_icon,allowHtml:!0})});function select2_format_icon(e){return $('<span><i class="fa fa-'+e.text+'"></i> '+e.text+"</span>")}
