function regenerateThumbs(e){$.ajax({url:admin_url+"actions/thumbs_regenerate.php",type:"post",data:{videoid:e,origin:"edit_video"},dataType:"json",beforeSend:function(){showSpinner()},success:function(e){$("#thumbnails").html(e.template),$(".page-content").prepend(e.msg),videojs($("#player").find("video")[0]).dispose(),setTimeout(function(){$("#player").html(e.player),hideSpinner()},200)}})}function deleteResolution(e){confirm_it(text_confirm_vid_file.replace("%s",e))&&$.ajax({url:admin_url+"actions/resolution_delete.php",type:"POST",data:{resolution:e,videoid:videoid},dataType:"json",success:function(e){$("#resolutions").html(e.template),$(".close").click(),$(".page-content").prepend(e.msg)}})}function deleteSubtitle(e){confirm_it(text_confirm_sub_file.replace("%s",e))&&$.ajax({url:admin_url+"actions/subtitle_delete.php",type:"POST",data:{number:e,videoid:videoid},dataType:"json",success:function(e){$("#subtitles").html(e.template),$(".close").click(),$(".page-content").prepend(e.msg)}})}function deleteComment(e){confirm_it(text_confirm_comment)&&$.ajax({url:admin_url+"actions/comment_delete.php",type:"POST",data:{comment_id:e},dataType:"json",success:function(t){$(".page-content").prepend(t.msg),t.success&&$("#comment_"+e).remove(),0===$(".comment_line").length&&$("#comments .form-group").html(text_no_comment)}})}function editTitle(e){$("#buttons-"+e).css("display","inline"),$("#edit_sub_"+e).css("display","inline"),$("#span_sub_"+e).hide()}function cancelEditTitle(e){$("#buttons-"+e).hide(),$("#edit_sub_"+e).hide(),$("#span_sub_"+e).show()}function saveSubtitle(e){showSpinner(),$.ajax({url:admin_url+"actions/subtitle_edit.php",type:"POST",data:{title:$("#edit_sub_"+e).val(),videoid:videoid,number:e},dataType:"json",success:function(e){$("#subtitles").html(e.template),hideSpinner(),$(".close").click(),$(".page-content").prepend(e.msg)}})}function getInfoTmdb(e,t,s,i,a,n,o){showSpinner(),$.ajax({url:admin_url+"actions/tmdb_info.php",type:"POST",data:{videoid:e,video_title:s,type:t,page:i,sort:a,sort_order:n,selected_year:o},dataType:"json",success:function(e){hideSpinner();var t=$("#myModal");t.html(e.template),t.modal(),$(".page-content").prepend(e.msg)}})}function saveInfoTmdb(e,t){showSpinner(),$.ajax({url:admin_url+"actions/tmdb_import.php",type:"POST",data:{tmdb_video_id:e,videoid:videoid,type:t},dataType:"json",success:function(e){!1==e.success?($(".close").click(),hideSpinner(),$(".page-content").prepend(e.msg)):location.reload()}})}function pageInfoTmdb(e){let t,s;$(".icon-sort-up").length>0?(t=$(".icon-sort-up").data("type"),s="ASC"):$(".icon-sort-down").length>0&&(t=$(".icon-sort-down").data("type"),s="DESC"),getInfoTmdb(videoid,$("#type_tmdb").val(),$("#search_title").val(),e,t,s,$("#selected_year").val())}function getViewHistory(e,t){showSpinner(),$.ajax({url:admin_url+"actions/video_view_history.php",type:"POST",data:{videoid:e,page:t,modal:!1},dataType:"json",success:function(e){hideSpinner(),$("#view_history_div").html(e.template),$(".page-content").prepend(e.msg)}})}function pageViewHistory(e){getViewHistory(videoid,e)}$(document).ready(function(){$("[id^=tags]").each(function(e){init_tags(this.id,available_tags,"#list_"+this.id)}),$("#list_video_users").tagit({singleField:!0,fieldName:"tags",readOnly:!1,singleFieldNode:$("#video_users"),animate:!0,caseSensitive:!1,allowSpaces:allow_username_spaces,beforeTagAdded:function(e,t){if(t.tagLabel.length<=2)return alert_shown||(alert_shown=!0,alert(tag_too_short)),!1;alert_shown=!1}}),$('[name="broadcast"]').off("click").on("click",function(){"unlisted"===$(this).val()?($(this).closest("form").find("#video_password").attr("disabled",!1).parent().slideDown(),$(this).closest("form").find("#video_users").attr("disabled","disabled").parent().slideUp()):"private"===$(this).val()?($(this).closest("form").find("#video_users").attr("disabled",!1).parent().slideDown(),$(this).closest("form").find("#video_password").attr("disabled","disabled").parent().slideUp()):($(this).closest("form").find("#video_password").attr("disabled","disabled").parent().slideUp(),$(this).closest("form").find("#video_users").attr("disabled","disabled").parent().slideUp())}).trigger("click"),$("#button_info_tmdb").on("click",function(){getInfoTmdb(videoid,"movie",$("#title").val(),1)}),$(".del_cmt").on("click",function(){deleteComment($(this).data("id"))}),$(".poster li").click(function(){$(".poster li.selected").removeClass("selected"),$(this).addClass("selected")}),$(".backdrop li").click(function(){$(".backdrop li.selected").removeClass("selected"),$(this).addClass("selected")}),$(".thumb li").click(function(){$(".thumb li.selected").removeClass("selected"),$(this).addClass("selected")}),visual_editor_comments_enabled&&Array.from(document.querySelectorAll("#comments .itemdiv .body .col-md-7 span")).forEach((e,t)=>{new toastui.Editor.factory({el:e,viewer:!0,usageStatistics:!1,initialValue:e.innerHTML})}),ids_to_check_progress.length>0&&(intervalId=setInterval(function(){$.post({url:admin_url+"actions/video_progress.php",dataType:"json",data:{ids:ids_to_check_progress,output:"edit"},success:function(e){e.data.videos.forEach(function(e){$("#videoplayer").html(e.html),$("#status").val(e.data.status)}),e.all_complete&&clearInterval(intervalId)}})},3e4)),$("#datecreated").datepicker({showOtherMonths:!0,selectOtherMonths:!1,changeMonth:!0,dateFormat:format_date_js,changeYear:!0,yearRange:"-99y:+0",regional:language})});
