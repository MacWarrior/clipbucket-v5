function regenerateThumbs(e){$.ajax({url:"/actions/regenerate_thumbs.php",type:"post",data:{videoid:e,origin:"edit_video"},dataType:"json",beforeSend:function(){showSpinner()},success:function(e){$("#thumbnails").html(e.template),$(".page-content").prepend(e.msg),videojs($("#player").find("video")[0]).dispose(),setTimeout(function(){$("#player").html(e.player),hideSpinner()},200)}})}function deleteResolution(e){confirm_it(text_confirm_vid_file.replace("%s",e))&&$.ajax({url:"/actions/resolution_delete.php",type:"POST",data:{resolution:e,videoid:videoid},dataType:"json",success:function(e){$("#resolutions").html(e.template),$(".close").click(),$(".page-content").prepend(e.msg)}})}function deleteSubtitle(e){confirm_it(text_confirm_sub_file.replace("%s",e))&&$.ajax({url:"/actions/subtitle_delete.php",type:"POST",data:{number:e,videoid:videoid},dataType:"json",success:function(e){$("#subtitiles").html(e.template),$(".close").click(),$(".page-content").prepend(e.msg)}})}function deleteComment(t){confirm_it(text_confirm_comment)&&$.ajax({url:"/actions/admin_comment_delete.php",type:"POST",data:{comment_id:t},dataType:"json",success:function(e){$(".page-content").prepend(e.msg),e.success&&$("#comment_"+t).remove(),0===$(".comment_line").length&&$("#comments .form-group").html(text_no_comment)}})}function editTitle(e){$("#buttons-"+e).css("display","inline"),$("#edit_sub_"+e).css("display","inline"),$("#span_sub_"+e).hide()}function cancelEditTitle(e){$("#buttons-"+e).hide(),$("#edit_sub_"+e).hide(),$("#span_sub_"+e).show()}function saveSubtitle(e){$.ajax({url:"/actions/subtitle_edit.php",type:"POST",data:{title:$("#edit_sub_"+e).val(),videoid:videoid,number:e},dataType:"json",success:function(e){$("#subtitiles").html(e.template),$(".close").click(),$(".page-content").prepend(e.msg)}})}function getInfoTmdb(e,t,i,n,o,s,a){showSpinner(),$.ajax({url:"/actions/admin_info_tmdb.php",type:"POST",data:{videoid:e,video_title:i,type:t,page:n,sort:o,sort_order:s,selected_year:a},dataType:"json",success:function(e){hideSpinner();var t=$("#myModal");t.html(e.template),t.modal(),$(".page-content").prepend(e.msg)}})}function saveInfoTmdb(e){showSpinner(),$.ajax({url:"/actions/admin_import_tmdb.php",type:"POST",data:{tmdb_video_id:e,videoid:videoid,type:type},dataType:"json",success:function(e){0==e.success?($(".close").click(),hideSpinner(),$(".page-content").prepend(e.msg)):location.reload()}})}function pageInfoTmdb(e){let t,i;0<$(".icon-sort-up").length?(t=$(".icon-sort-up").data("type"),i="ASC"):0<$(".icon-sort-down").length&&(t=$(".icon-sort-down").data("type"),i="DESC"),getInfoTmdb(videoid,$("#type_tmdb").val(),$("#search_title").val(),e,t,i,$("#selected_year").val())}function getViewHistory(e,t){showSpinner(),$.ajax({url:"/actions/video_view_history.php",type:"POST",data:{videoid:e,page:t,modal:!1},dataType:"json",success:function(e){hideSpinner(),$("#view_history_div").html(e.template),$(".page-content").prepend(e.msg)}})}function pageViewHistory(e){getViewHistory(videoid,e)}$(document).ready(function(){$("[id^=tags]").each(function(e){init_tags(this.id,available_tags,"#list_"+this.id)}),$("#button_info_tmdb").on("click",function(){var e=$("#title").val();getInfoTmdb(videoid,"movie",e,1)}),$(".del_cmt").on("click",function(){deleteComment($(this).data("id"))}),$(".poster li").click(function(){$(".poster li.selected").removeClass("selected"),$(this).addClass("selected")}),$(".backdrop li").click(function(){$(".backdrop li.selected").removeClass("selected"),$(this).addClass("selected")}),$(".thumb li").click(function(){$(".thumb li.selected").removeClass("selected"),$(this).addClass("selected")}),visual_editor_comments_enabled&&Array.from(document.querySelectorAll("#comments .itemdiv .body .col-md-7 span")).forEach((e,t)=>{new toastui.Editor.factory({el:e,viewer:!0,usageStatistics:!1,initialValue:e.innerHTML})}),0<ids_to_check_progress.length&&(intervalId=setInterval(function(){$.post({url:"/actions/admin_progress_video.php",dataType:"json",data:{ids:ids_to_check_progress,output:"edit"},success:function(e){e.data.videos.forEach(function(e){$("#videoplayer").html(e.html),$("#status").val(e.data.status)}),e.all_complete&&clearInterval(intervalId)}})},3e4))});