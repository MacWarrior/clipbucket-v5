function regenerateThumbs(e){$.ajax({url:baseurl+"actions/regenerate_thumbs.php",type:"post",data:{videoid:e,origin:"edit_video"},dataType:"json",beforeSend:function(){showSpinner()},success:function(e){$("#thumbnails").html(e.template),$(".page-content").prepend(e.msg),videojs($("#player").find("video")[0]).dispose(),setTimeout(function(){$("#player").html(e.player),hideSpinner()},200)}})}function deleteResolution(e){confirm_it(text_confirm_vid_file.replace("%s",e))&&$.ajax({url:baseurl+"actions/resolution_delete.php",type:"POST",data:{resolution:e,videoid:videoid},dataType:"json",success:function(e){$("#resolutions").html(e.template),$(".close").click(),$(".page-content").prepend(e.msg)}})}function deleteSubtitle(e){confirm_it(text_confirm_sub_file.replace("%s",e))&&$.ajax({url:baseurl+"actions/subtitle_delete.php",type:"POST",data:{number:e,videoid:videoid},dataType:"json",success:function(e){$("#subtitiles").html(e.template),$(".close").click(),$(".page-content").prepend(e.msg)}})}function deleteComment(e){confirm_it(text_confirm_comment)&&$.ajax({url:baseurl+"actions/admin_comment_delete.php",type:"POST",data:{comment_id:e},dataType:"json",success:function(t){$(".page-content").prepend(t.msg),t.success&&$("#comment_"+e).remove(),0===$(".comment_line").length&&$("#comments .form-group").html(text_no_comment)}})}function editTitle(e){$("#buttons-"+e).css("display","inline"),$("#edit_sub_"+e).css("display","inline"),$("#span_sub_"+e).hide()}function cancelEditTitle(e){$("#buttons-"+e).hide(),$("#edit_sub_"+e).hide(),$("#span_sub_"+e).show()}function saveSubtitle(e){$.ajax({url:baseurl+"actions/subtitle_edit.php",type:"POST",data:{title:$("#edit_sub_"+e).val(),videoid:videoid,number:e},dataType:"json",success:function(e){$("#subtitiles").html(e.template),$(".close").click(),$(".page-content").prepend(e.msg)}})}function getInfoTmdb(e,t,n,i,s,o,a){showSpinner(),$.ajax({url:baseurl+"actions/admin_info_tmdb.php",type:"POST",data:{videoid:e,video_title:n,type:t,page:i,sort:s,sort_order:o,selected_year:a},dataType:"json",success:function(e){hideSpinner();var t=$("#myModal");t.html(e.template),t.modal(),$(".page-content").prepend(e.msg)}})}function saveInfoTmdb(e){showSpinner(),$.ajax({url:baseurl+"actions/admin_import_tmdb.php",type:"POST",data:{tmdb_video_id:e,videoid:videoid,type:type},dataType:"json",success:function(e){!1==e.success?($(".close").click(),hideSpinner(),$(".page-content").prepend(e.msg)):location.reload()}})}function pageInfoTmdb(e){let t,n;$(".icon-sort-up").length>0?(t=$(".icon-sort-up").data("type"),n="ASC"):$(".icon-sort-down").length>0&&(t=$(".icon-sort-down").data("type"),n="DESC"),getInfoTmdb(videoid,$("#type_tmdb").val(),$("#search_title").val(),e,t,n,$("#selected_year").val())}function getViewHistory(e,t){showSpinner(),$.ajax({url:baseurl+"actions/video_view_history.php",type:"POST",data:{videoid:e,page:t,modal:!1},dataType:"json",success:function(e){hideSpinner(),$("#view_history_div").html(e.template),$(".page-content").prepend(e.msg)}})}function pageViewHistory(e){getViewHistory(videoid,e)}$(document).ready(function(){$("[id^=tags]").each(function(e){init_tags(this.id,available_tags,"#list_"+this.id)}),$("#button_info_tmdb").on("click",function(){getInfoTmdb(videoid,"movie",$("#title").val(),1)}),$(".del_cmt").on("click",function(){deleteComment($(this).data("id"))}),$(".poster li").click(function(){$(".poster li.selected").removeClass("selected"),$(this).addClass("selected")}),$(".backdrop li").click(function(){$(".backdrop li.selected").removeClass("selected"),$(this).addClass("selected")}),$(".thumb li").click(function(){$(".thumb li.selected").removeClass("selected"),$(this).addClass("selected")}),visual_editor_comments_enabled&&Array.from(document.querySelectorAll("#comments .itemdiv .body .col-md-7 span")).forEach((e,t)=>{new toastui.Editor.factory({el:e,viewer:!0,usageStatistics:!1,initialValue:e.innerHTML})}),ids_to_check_progress.length>0&&(intervalId=setInterval(function(){$.post({url:baseurl+"actions/admin_progress_video.php",dataType:"json",data:{ids:ids_to_check_progress,output:"edit"},success:function(e){e.data.videos.forEach(function(e){$("#videoplayer").html(e.html),$("#status").val(e.data.status)}),e.all_complete&&clearInterval(intervalId)}})},3e4)),$("#datecreated").datepicker({showOtherMonths:!0,selectOtherMonths:!1,changeMonth:!0,dateFormat:format_date_js,changeYear:!0,yearRange:"-99y:+0",regional:language})});
