var loading_img="<img style='vertical-align:middle' src='"+imageurl+"/ajax-loader.gif'>";function format_date_to_display(e){return $.datepicker.formatDate(format_display,e)}$(function(){$(".toDatepicker").datepicker({showOtherMonths:!0,selectOtherMonths:!1,changeMonth:!0,dateFormat:format_date_js,changeYear:!0,yearRange:"-99y:+0",regional:language}),$('[id^="released_text_"]').each(function(e,t){var a=new Date($(this).siblings(".hidden_released").val());$(this).text(format_date_to_display(a))}),$(".copy_default_theme").on("click",function(e){showSpinner(),$.ajax({url:admin_url+"actions/template_copy_default.php",type:"POST",dataType:"json",success:function(e){$(".page-content").prepend(e.msg),window.location.reload()}})}),$(".delete_default_theme").on("click",function(e){$("#delete_code_modal").modal(),$("#delete_code_modal").find("#delete_num").val($(this).data("num"))}),$(".confirm_delete").on("click",function(e){showSpinner();var t=$("#delete_num").val(),t=$("#path_"+t).val();$.ajax({url:admin_url+"actions/template_remove.php",type:"POST",data:{template_path:t},dataType:"json",success:function(e){$(".page-content").prepend(e.msg),e.success?((e=new URL(window.location)).search="",window.location=e.toString()):hideSpinner()}})}),$(".edit_theme").on("click",function(e){const o=$(this).data("num");$("#description_group_"+o).hasClass("hidden")?($(".input-group[id$="+o+"]").removeClass("hidden"),$('[id$="text_'+o+'"]').addClass("hidden"),$(this).removeClass("text-primary")):($(".input-group[id$="+o+"]").each(function(e,t){var a=$(this).attr("id").match(/(\w+)_group_\d+/)[1];let n=$(this).find("input").val();"released"===a&&(i=n.replace(/(\d{1,2})th/g,"$1"),n=format_date_to_display(new Date(i))),$(this).addClass("hidden");var i=$("#"+a+"_text_"+o);"link"===a?(i.attr("href",n),$("#author_text_"+o).attr("href",n)):("title"===a?$("#link_text_"+o):i).text(n),i.removeClass("hidden"),$(".save_"+a).removeClass("glyphicon-ok glyphicon-remove").addClass("glyphicon-save").attr("title",lang.save)}),$(this).addClass("text-primary"))}),$(".save_template_field").on("click",function(e){var t,a,n;$(this).hasClass("disabled")||(e.preventDefault(),t=$(this),e=$(this).attr("id").match(/save_(\w+)_\d+/)[1],a=t.data("num"),n=$("#path_"+a).val(),a=$("#"+e+"_"+a).val(),$.ajax({url:admin_url+"actions/template_save_fields.php",type:"POST",data:{field:e,value:a,path:n},dataType:"json",beforeSend:function(){t.removeClass("glyphicon-save glyphicon-ok glyphicon-remove glyphicon-refresh").html(loading_img)},success:function(e){$(".page-content").prepend(e.msg),e.success?t.html("").removeClass("glyphicon-remove glyphicon-refresh").addClass("glyphicon-ok"):t.html("").removeClass("glyphicon-refresh glyphicon-ok").addClass("glyphicon-remove")}}))})});