var loading_img="<img style='vertical-align:middle' src='"+imageurl+"/ajax-loader.gif'>";function format_date_to_display(e){return $.datepicker.formatDate(format_display,e)}$(function(){$(".toDatepicker").datepicker({showOtherMonths:!0,selectOtherMonths:!1,changeMonth:!0,dateFormat:format_date_js,changeYear:!0,yearRange:"-99y:+0",regional:language}),$('[id^="released_text_"]').each(function(e,t){var a=new Date($(this).siblings(".hidden_released").val());$(this).text(format_date_to_display(a))}),$(".copy_default_theme").on("click",function(e){showSpinner(),$.ajax({url:admin_url+"actions/template_copy_default.php",type:"POST",dataType:"json",success:function(e){$(".page-content").prepend(e.msg),window.location.reload()}})}),$(".delete_default_theme").on("click",function(e){$("#delete_code_modal").modal(),$("#delete_code_modal").find("#delete_num").val($(this).data("num"))}),$(".confirm_delete").on("click",function(e){showSpinner();var t=$("#delete_num").val(),t=$("#path_"+t).val();$.ajax({url:admin_url+"actions/template_remove.php",type:"POST",data:{template_path:t},dataType:"json",success:function(e){$(".page-content").prepend(e.msg),e.success?((e=new URL(window.location)).search="",window.location=e.toString()):hideSpinner()}})}),$(".edit_theme").on("click",function(e){const l=$(this).data("num");$("#description_group_"+l).hasClass("hidden")?($(".input-group[id$="+l+"]").removeClass("hidden"),$('[id$="text_'+l+'"]').addClass("hidden"),$(this).removeClass("text-primary").attr("title",lang.end_edition),$(this).siblings(".delete_default_theme").addClass("hidden")):($(".input-group[id$="+l+"]").each(function(e,t){var a=$(this).attr("id").match(/(\w+)_group_\d+/)[1];let i=$(this).find("input").val();"released"===a&&(n=i.replace(/(\d{1,2})th/g,"$1"),i=format_date_to_display(new Date(n))),$(this).addClass("hidden");var n=$("#"+a+"_text_"+l);"link"===a?(n.attr("href",i),$("#author_text_"+l).attr("href",i)):("title"===a?$("#link_text_"+l):n).text(i),n.removeClass("hidden"),$(".save_"+a).removeClass("glyphicon-ok glyphicon-remove").addClass("glyphicon-save").attr("title",lang.save)}),$(this).addClass("text-primary").attr("title",lang.edit_copy),$(this).siblings(".delete_default_theme").removeClass("hidden"))}),$(".save_template_field").on("click",function(e){var t,a,i;$(this).hasClass("disabled")||(e.preventDefault(),t=$(this),e=$(this).attr("id").match(/save_(\w+)_\d+/)[1],a=t.data("num"),i=$("#path_"+a).val(),a=$("#"+e+"_"+a).val(),$.ajax({url:admin_url+"actions/template_save_fields.php",type:"POST",data:{field:e,value:a,path:i},dataType:"json",beforeSend:function(){t.removeClass("glyphicon-save glyphicon-ok glyphicon-remove glyphicon-refresh").html(loading_img)},success:function(e){$(".page-content").prepend(e.msg),e.success?t.html("").removeClass("glyphicon-remove glyphicon-refresh").addClass("glyphicon-ok"):t.html("").removeClass("glyphicon-refresh glyphicon-ok").addClass("glyphicon-remove")}}))})});