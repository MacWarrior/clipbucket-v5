var loading_img="<img style='vertical-align:middle' src='"+imageurl+"/ajax-loader.gif'>";function format_date_to_display(e){return $.datepicker.formatDate(format_display,e)}$(function(){$(".toDatepicker").datepicker({showOtherMonths:!0,selectOtherMonths:!1,changeMonth:!0,dateFormat:format_date_js,changeYear:!0,yearRange:"-99y:+0",regional:language}),$('[id^="released_text_"]').each(function(e,t){let a=new Date($(this).siblings(".hidden_released").val());$(this).text(format_date_to_display(a))}),$(".copy_default_theme").on("click",function(e){showSpinner(),$.ajax({url:admin_url+"actions/template_copy_default.php",type:"POST",dataType:"json",success:function(e){$(".page-content").prepend(e.msg),window.location.reload()}})}),$(".delete_default_theme").on("click",function(e){$("#delete_code_modal").modal(),$("#delete_code_modal").find("#delete_num").val($(this).data("num"))}),$(".confirm_delete").on("click",function(e){showSpinner();let t=$("#delete_num").val(),a=$("#path_"+t).val();$.ajax({url:admin_url+"actions/template_remove.php",type:"POST",data:{template_path:a},dataType:"json",success:function(e){if($(".page-content").prepend(e.msg),e.success){let t=new URL(window.location);t.search="",window.location=t.toString()}else hideSpinner()}})}),$(".edit_theme").on("click",function(e){let t=$(this).data("num");$("#description_group_"+t).hasClass("hidden")?($(".input-group[id$="+t+"]").removeClass("hidden"),$('[id$="text_'+t+'"]').addClass("hidden"),$(this).removeClass("text-primary").attr("title",lang.end_edition),$(this).siblings(".delete_default_theme").addClass("hidden")):($(".input-group[id$="+t+"]").each(function(e,a){let i=$(this).attr("id").match(/(\w+)_group_\d+/)[1],l=$(this).find("input").val();if("released"===i){let n=l.replace(/(\d{1,2})th/g,"$1");l=format_date_to_display(new Date(n))}$(this).addClass("hidden");let s=$("#"+i+"_text_"+t);"link"===i?(s.attr("href",l),$("#author_text_"+t).attr("href",l)):"title"===i?$("#link_text_"+t).text(l):s.text(l),s.removeClass("hidden"),$(".save_"+i).removeClass("glyphicon-ok glyphicon-remove").addClass("glyphicon-save").attr("title",lang.save)}),$(this).addClass("text-primary").attr("title",lang.edit),$(this).siblings(".delete_default_theme").removeClass("hidden"))}),$(".save_template_field").on("click",function(e){!$(this).hasClass("disabled")&&(e.preventDefault(),function e(t,a){let i=t.data("num"),l=$("#path_"+i).val(),n=$("#"+a+"_"+i).val();$.ajax({url:admin_url+"actions/template_save_fields.php",type:"POST",data:{field:a,value:n,path:l},dataType:"json",beforeSend:function(){t.removeClass("glyphicon-save glyphicon-ok glyphicon-remove glyphicon-refresh").html(loading_img)},success:function(e){$(".page-content").prepend(e.msg),e.success?t.html("").removeClass("glyphicon-remove glyphicon-refresh").addClass("glyphicon-ok"):t.html("").removeClass("glyphicon-refresh glyphicon-ok").addClass("glyphicon-remove")}})}($(this),$(this).attr("id").match(/save_(\w+)_\d+/)[1]))})});
