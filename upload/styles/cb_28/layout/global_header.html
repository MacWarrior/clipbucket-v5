<!DOCTYPE HTML>
<html class="{User::getInstance()->getUserTheme()}">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
		<meta name="copyright" content="ClipBucketV5, {lang code='maintained_by'} Oxygenz">

		<meta property="og:site_name" content="{config('site_title')}" />
		{if THIS_PAGE == 'watch_video' && isSectionEnabled('videos') && User::getInstance()->hasPermission('view_video') && video_playable($vdo)}
			<!-- Open Graph -->
			<meta property="og:title" content="🎬 {display_clean($vdo.title)|truncate:60}" />
			<meta property="og:description" content="{display_clean($vdo.description)|truncate:200}" />
			<meta property="og:type" content="video.other" />
			<meta property="og:url" content="{video_link($vdo)}" />
			<meta property="og:image" content="{VideoThumbs::getDefaultThumbFile($vdo.videoid, 768,480)}" />
			<meta property="og:video" content="{video_link($vdo)}" />
			<meta property="og:video:type" content="text/html" />
			<meta property="og:video:width" content="1280" />
			<meta property="og:video:height" content="720" />
			<!-- Twitter Card -->
			<meta name="twitter:card" content="summary_large_image" />
			<meta name="twitter:title" content="🎬 {display_clean($vdo.title)|truncate:60}" />
			<meta name="twitter:description" content="{display_clean($vdo.description)|truncate:200}" />
			<meta name="twitter:image" content="{VideoThumbs::getDefaultThumbFile($vdo.videoid, 768, 480)}" />
			<meta name="twitter:image:alt" content="{display_clean($vdo.title)|truncate:60}" />
		{elseif THIS_PAGE == 'view_item' && isSectionEnabled('photos') && User::getInstance()->hasPermission('view_photos')}
			<!-- Balises Open Graph -->
			<meta property="og:title" content="🖼️ {display_clean($c.collection_name)} - {display_clean($photo.photo_title)|truncate:60}" />
			<meta property="og:description" content="{display_clean($photo.photo_description)|truncate:200}" />
			<meta property="og:type" content="website" />
			<meta property="og:url" content="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" />
			<meta property="og:image" content="{PhotoThumbs::getThumbFile($photo.photo_id, 900)}" />
			<meta property="og:image:width" content="768" />
			<meta property="og:image:height" content="480" />
			<!-- Twitter Card -->
			<meta name="twitter:card" content="summary_large_image" />
			<meta name="twitter:title" content="🖼️ {display_clean($c.collection_name)} - {display_clean($photo.photo_title)|truncate:60}" />
			<meta name="twitter:description" content="{display_clean($photo.photo_description)|truncate:200}" />
			<meta name="twitter:image" content="{PhotoThumbs::getThumbFile($photo.photo_id, 900)}" />
			<meta name="twitter:image:alt" content="{display_clean($photo.photo_title)|truncate:60}" />
		{elseif THIS_PAGE == 'view_channel' && isSectionEnabled('channels') && User::getInstance()->hasPermission('view_channel')}
			<!-- Open Graph -->
			<meta property="og:title" content="👤 {display_clean($user.username)|truncate:60} {lang code='from'} {config('site_title')}" />
			{if Update::IsCurrentDBVersionIsHigherOrEqualTo('5.5.2', '37') && config('enable_channel_slogan') == 'yes' && !empty($p.profile_slogan)}
				<meta property="og:description" content="{User::getClean($p.profile_slogan)|truncate:200}" />
			{elseif !empty($p.profile_desc)}
				<meta property="og:description" content="{User::getClean($p.profile_desc)|truncate:200}" />
			{/if}
			<meta property="og:type" content="profile" />
			<meta property="og:url" content="{userquery::getInstance()->profile_link($user)}" />
			<meta property="og:image" content="{userquery::getInstance()->getUserThumb($user)}" />
			<!-- Twitter Cards -->
			<meta name="twitter:card" content="summary" />
			<meta name="twitter:title" content="👤 {display_clean($user.username)|truncate:60} {lang code='from'} {config('site_title')}" />
			{if Update::IsCurrentDBVersionIsHigherOrEqualTo('5.5.2', '37') && config('enable_channel_slogan') == 'yes' && !empty($p.profile_slogan)}
				<meta property="twitter:description" content="{User::getClean($p.profile_slogan)|truncate:200}" />
			{elseif !empty($p.profile_desc)}
				<meta property="twitter:description" content="{User::getClean($p.profile_desc)|truncate:200}" />
			{/if}
			<meta name="twitter:image" content="{userquery::getInstance()->getUserThumb($user)}" />
			<meta name="twitter:image:alt" content="{display_clean($user.username)|truncate:60}" />
		{else}
			<!-- Open Graph -->
			<meta property="og:title" content="{cbtitle()}" />
			<meta property="og:description" content="{config('site_slogan')|truncate:200}" />
			<meta property="og:type" content="website" />
			<meta property="og:image" content="{get_website_logo_path()}" />
			<!-- Twitter Card -->
			<meta name="twitter:card" content="summary_large_image" />
			<meta name="twitter:title" content="{cbtitle()}" />
			<meta name="twitter:description" content="{config('site_slogan')|truncate:200}" />
			<meta name="twitter:image" content="{get_website_logo_path()}" />
			<meta name="twitter:image:alt" content="{config('site_title')}" />
		{/if}

		<link rel="apple-touch-icon" sizes="57x57" href="{get_website_favicon_path()}">
		<link rel="apple-touch-icon" sizes="60x60" href="{get_website_favicon_path()}">
		<link rel="apple-touch-icon" sizes="72x72" href="{get_website_favicon_path()}">
		<link rel="apple-touch-icon" sizes="76x76" href="{get_website_favicon_path()}">
		<link rel="apple-touch-icon" sizes="114x114" href="{get_website_favicon_path()}">
		<link rel="apple-touch-icon" sizes="120x120" href="{get_website_favicon_path()}">
		<link rel="apple-touch-icon" sizes="144x144" href="{get_website_favicon_path()}">
		<link rel="apple-touch-icon" sizes="152x152" href="{get_website_favicon_path()}">
		<link rel="apple-touch-icon" sizes="180x180" href="{get_website_favicon_path()}">
		<link rel="icon" type="image/png" sizes="192x192" href="{get_website_favicon_path()}">
		<link rel="icon" type="image/png" sizes="32x32" href="{get_website_favicon_path()}">
		<link rel="icon" type="image/png" sizes="96x96" href="{get_website_favicon_path()}">
		<link rel="icon" type="image/png" sizes="16x16" href="{get_website_favicon_path()}">
		<meta name="msapplication-TileImage" content="{get_website_favicon_path()}">
		<meta name="msapplication-TileColor" content="#ffffff">
		<meta name="theme-color" content="#ffffff">
		{rss_feeds link_tag=true}
		<meta name="keywords" content="{config('keywords')}">
		<meta name="description" content="{config('description')}">
		<meta name="distribution" content="global">

		<title>{cbtitle}</title>
		{if config('enable_quicklist') == 'yes' && Session::isCookieConsent('fast_qlist')}
			{assign var=qlist_videos value=get_fast_qlist()}
			{assign var=litems_count value=$qlist_videos|@count}
			{if $litems_count >= 1}
				{assign var=got_qlitems value="yes"}
			{else}
				{assign var=got_qlitems value="no"}
			{/if}
		{/if}
		<script>
			var loadingImg = '<i class="glyphicon glyphicon-refresh animate-spin"></i>';
			var loading = '<i class="glyphicon glyphicon-refresh animate-spin"></i> {lang code="loading"}...';
			var baseurl = "{DirPath::getUrl('root')}",
				imageurl = "{$imageurl}",
				userid = "{user_id()}",
				THIS_PAGE = "{$smarty.const.THIS_PAGE}";

            var lang_subscribe = "{lang code='subscribe'}";
            var lang_unsubscribe = "{lang code='unsubscribe'}";
			let lang_search_too_short = "{lang code='search_too_short'}";
			var fastQitems = "{$got_qlitems}";
			var pageNow = "{$smarty.const.THIS_PAGE}";
			var tag_too_short = "{lang code=tag_too_short}";
			var allow_tag_space = {(config('allow_tag_space') == 'yes') ? 'true' : 'false'};
			var allow_username_spaces = {(config('allow_username_spaces') == 'yes') ? 'true' : 'false'};
		</script>

		{if ClipBucket::getInstance()->JSArray}
			{foreach from=ClipBucket::getInstance()->JSArray key=file item=type}
				{include_js type=$type file=$file}
			{/foreach}
		{/if}

		{if ClipBucket::getInstance()->CSSArray}
			{foreach from=ClipBucket::getInstance()->CSSArray key=file item=type}
				{include_css type=$type file=$file}
			{/foreach}
		{/if}

		{include_header file='global_header'}
		{if ClipBucket::getInstance()->header_files}
		    {foreach from=ClipBucket::getInstance()->header_files key=file item=type}
		        {include_header type=$type file=$file}
		    {/foreach}
		{/if}
		<script>
			$(document).ready(function(){
				$( 'ul#photos li:visible' ).each( function( i ){
					$( this )[ (1&i) ? 'addClass' : 'removeClass' ]( 'photo-land-no' );
				});
			});
		</script>
	</head>
