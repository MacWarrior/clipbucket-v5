{assign var='photo_class' value='img-responsive photo-land no_select'}
{if Photo::getInstance()->isToBlur($photo['photo_id'])}
	{$photo_class = $photo_class|cat:' blur'}
{/if}

{if $display_type == ""}
<div class="item-photo col-lg-4 col-md-4 col-sm-6 col-xs-6">
	<a class="photo-holder" href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">
		{ANCHOR place='in_photo_thumb' data=$photo}
        {PhotoThumbs::getHtmlThumbFile($photo.photo_id, 300, ['class'=>$photo_class, 'crop'=>true])}
		<i class="icon-zoom"></i>
	</a>
	<div class="photo-info {if config('enable_hide_uploader_name') == 'yes'}nouploader{/if}">
		<strong><a href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">{display_clean($photo.photo_title)|truncate:50}</a></strong>
		{if config('enable_hide_uploader_name') != 'yes'}
		<span>
			{if isSectionEnabled('channels') && $photo.userid != $anonymous_id && $photo.disabled_channel !='yes'}
				{lang code="by"}&nbsp;<a href="{userquery::getInstance()->profile_link($photo.userid)}">{display_clean($photo.username)}</a>
			{elseif $anonymous_id != $photo.userid}
				{lang code="by"} {display_clean($photo.username)}
			{/if}
		</span>
		{/if}
	</div>
</div>
{/if}

{if $display_type == "default_photo"}
	<div class="photoAppending">
		<a class="photo-holder no_overflow" href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">
			{ANCHOR place='in_photo_thumb' data=$photo}
            {PhotoThumbs::getHtmlThumbFile($photo.photo_id, 300, ['class'=>$photo_class, 'crop'=>true])}
			<i class="icon-zoom"></i>
		</a>
		<div class="photo-info {if config('enable_hide_uploader_name') == 'yes'}nouploader{/if}">
			<strong><a href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">{display_clean($photo.photo_title)|truncate:30}</a></strong>
			{if config('enable_hide_uploader_name') != 'yes'}
			<span>
				{if isSectionEnabled('channels') && $photo.userid != $anonymous_id && $photo.disabled_channel !='yes'}
					{lang code="by"}&nbsp;<a href="{userquery::getInstance()->profile_link($photo.userid)}">{display_clean($photo.username)}</a>
				{elseif $anonymous_id != $photo.userid}
					{lang code="by"} {display_clean($photo.username)}
				{/if}
				<br>
			</span>
			{/if}
		</div>
	</div>
{/if}

{if $display_type == "view_channelAjax"}
<div style="display: none" class="item-photo col-lg-4 col-md-4 col-sm-6 col-xs-12">
	<a class="photo-holder" href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">
		{ANCHOR place='in_photo_thumb' data=$photo}
        {PhotoThumbs::getHtmlThumbFile($photo.photo_id, 300, ['class'=>$photo_class, 'crop'=>true])}
		<i class="icon-zoom"></i>
	</a>
	<div class="photo-info {if config('enable_hide_uploader_name') == 'yes'}nouploader{/if}">
		<strong><a href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">{display_clean($photo.photo_title)|truncate:50}</a></strong>
		{if config('enable_hide_uploader_name') != 'yes'}
		<span>
			{if isSectionEnabled('channels') && $photo.userid != $anonymous_id && $photo.disabled_channel !='yes'}
				{lang code="by"}&nbsp;<a href="{userquery::getInstance()->profile_link($photo.userid)}">{display_clean($photo.username)}</a>
			{elseif $anonymous_id != $photo.userid}
				{lang code="by"} {display_clean($photo.username)}
			{/if}
		</span>
		{/if}
	</div>
</div>
{/if}

{if $display_type == "user_photos"}
	<a class="photo-holder" href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">
		{ANCHOR place='in_photo_thumb' data=$photo}
        {PhotoThumbs::getHtmlThumbFile($photo.photo_id, 300, ['class'=>$photo_class, 'crop'=>true])}
		<i class="icon-zoom"></i>
	</a>
	<div class="photo-info {if config('enable_hide_uploader_name') == 'yes'}nouploader{/if}">
		<strong><a href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">{display_clean($photo.photo_title)|truncate:50}</a></strong>
		{if config('enable_hide_uploader_name') != 'yes'}
		<span>
			{if isSectionEnabled('channels') && $photo.userid != $anonymous_id && $photo.disabled_channel !='yes'}
				{lang code="by"}&nbsp;<a href="{userquery::getInstance()->profile_link($photo.userid)}">{display_clean($photo.username)}</a>
			{elseif $anonymous_id != $photo.userid}
				{lang code="by"} {display_clean($photo.username)}
			{/if}
		</span>
		{/if}
	</div>
{/if}

{if $display_type == "featuredPhoto_sidebar"}
	<a class="photo-holder" href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">
		{ANCHOR place='in_photo_thumb' data=$photo}
        {PhotoThumbs::getHtmlThumbFile($photo.photo_id, 150, ['class'=>$photo_class, 'crop'=>true])}
		<i class="icon-zoom"></i>
	</a>
{/if}

{if $display_type == "search_photos"}
	<a class="searchresult-photo" href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">
		{ANCHOR place='in_photo_thumb' data=$photo}
        {PhotoThumbs::getHtmlThumbFile($photo.photo_id, 300, ['class'=>$photo_class, 'crop'=>true])}
		<div class="hover hidden-xs hidden-sm">
			<i class="icon-zoom"></i>
		</div>
	</a>
	<div class="photo-info {if config('enable_hide_uploader_name') == 'yes'}nouploader{/if}">
		<strong><a href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">{display_clean($photo.photo_title)|truncate:50}</a></strong>
		{if config('enable_hide_uploader_name') != 'yes'}
		<span>
			{if isSectionEnabled('channels') && $photo.userid != $anonymous_id && $photo.disabled_channel !='yes'}
				{lang code="by"}&nbsp;<a href="{userquery::getInstance()->profile_link($photo.userid)}">{display_clean($photo.username)}</a>
			{elseif $anonymous_id != $photo.userid}
				{lang code="by"} {display_clean($photo.username)}
			{/if}
		</span>
		{/if}
	</div>
{/if}


{if $display_type == "relatedPhoto_sidebar"}
	<a class="photo-holder" href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">
		{ANCHOR place='in_photo_thumb' data=$photo}
        {PhotoThumbs::getHtmlThumbFile($photo.photo_id, 150, ['class'=>'img-responsive', 'crop'=>true])}
		<i class="icon-zoom"></i>
	</a>
{/if}

{if $display_type == 'subscription'}
	<div class="grid_view clearfix" style="width:auto; margin-right:4px;">
		<a href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}">{PhotoThumbs::getHtmlThumbFile($photo_photo_id, 150, ['class'=>'photoThumbBox', 'crop'=>true])}</a>
		<div class="photoTitle" style="margin:5px 0px; font:bold 11px Arial;">
			<a href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">{display_clean($photo.photo_title)|truncate:15}</a>
		</div>
		{show_rating rating=$photo.rating total='10' class='rating'}
		<div style="font-size:10px; margin:2px;">{$photo.views|number_format} {lang code="views"}</div>
		<a href="{userquery::getInstance()->profile_link($photo)}" style="font:bold 10px Arial; text-decoration:none;">{display_clean($photo.username)|truncate:20}</a>
	</div>
{/if}

{if $display_type == "side_photos"}
	<div style="display:inline-block; *display:inline; vertical-align:middle; padding:0 8px 5px 0px;">
		<a href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}">
			{ANCHOR place='in_photo_thumb' data=$photo}
			{PhotoThumbs::getHtmlThumbFile($photo.photo_id, 150, ['class'=>'photoThumbBox', 'crop'=>true])}
		</a>
		<div class="photoTitle" style="font:bold 10px Arial; margin:1px 0px;">
			<a href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">{display_clean($photo.photo_title)|truncate:15}</a>
		</div>
		<div class="watch_video_box_details">
			<span style="color:#666; font:normal 10px Arial;">{lang code='views'}: {$photo.views|number_format}</span><br>
			<a style="font:bold 10px Arial; text-decoration:none;" href="{userquery::getInstance()->profile_link($photo)}" title="{display_clean($photo.username)}" alt="{display_clean($photo.username)}">{display_clean($photo.username)|truncate:12}</a>
		</div>
	</div>
{/if}

{if $display_type == "channel_page"}
	<li class="itemBox" onclick="loadObject(this,'photos','{$photo.photo_id}','viewingArea')">
		{ANCHOR place='in_photo_thumb' data=$photo}
        {PhotoThumbs::getHtmlThumbFile($photo.photo_id, 150, ['style'=>'display:block;margin:0 auto;', 'crop'=>true])}
	</li>
{/if}

{if $display_type == "collection_item"}
<div class="photoAppending">
    <a class="photo-holder no_overflow" href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">
		{ANCHOR place='in_photo_thumb' data=$photo}
        {PhotoThumbs::getHtmlThumbFile($photo.photo_id, 550, ['crop'=>true])}
        <i class="icon-zoom"></i>
    </a>
    <div class="photo-info {if config('enable_hide_uploader_name') == 'yes'}nouploader{/if}">
        <strong><a href="{CBPhotos::getInstance()->photo_links($photo,'view_item')}" title="{display_clean($photo.photo_title)}">{display_clean($photo.photo_title)|truncate:30}</a></strong>
		{if config('enable_hide_uploader_name') != 'yes'}
        <span>
			{if isSectionEnabled('channels') && $photo.userid != $anonymous_id && $photo.disabled_channel !='yes'}
				{lang code="by"}&nbsp;<a href="{userquery::getInstance()->profile_link($photo.userid)}">{display_clean($photo.username)}</a>
			{elseif $anonymous_id != $photo.userid}
				{lang code="by"} {display_clean($photo.username)}
			{/if}
		</span>
		{/if}
    </div>
</div>
{/if}