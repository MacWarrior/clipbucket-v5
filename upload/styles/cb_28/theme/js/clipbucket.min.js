!function(t){var e=function(){this.baseurl=baseurl,this.imageurl="",this.page=baseurl+"actions/ajax.php",this.loading_img="<img alt='loading' style='vertical-align:middle' src='"+imageurl+"/ajax-loader-big.gif'/>",this.loading=this.loading_img+" Loading...",this.download=0,this.count=0,this.hasLoaded=!1,this.current_menu="",this.collectionID=!1,this.ua=navigator.userAgent.toLowerCase(),this.Confirm_Delete=function(t){confirm("Are you sure you want to delete")&&(document.location=t)},this.Confirm_Uninstall=function(t){confirm("Are you sure you want to uninstall this plugin ?")&&(document.location=t)},this.confirm_it=function(t){return!!confirm(t)},this.reloadImage=function(t,e){(img=document.getElementById(e)).src=t+"?"+Math.random()},this.randomString=function(){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e="",s=0;s<8;s++){var o=Math.floor(Math.random()*t.length);e+=t.substring(o,o+1)}return e},this.delete_item=function(t,e,s,o){$("#"+t+"-"+e).click(function(){confirm(s)&&(document.location=o)})},this.delete_video=function(t,e,s,o){return delete_item(t,e,s,o)},this.get_video=function(t,e){$(e).css("display","block"),$(e).html(this.loading),$(e).html(this.loading),$.post(page,{mode:t},function(t){$(e).html(t)},"text")},this.getAjaxPhoto=function(t,e){$(e).css("display","block");var s=$(e).html();$.ajax({url:this.page,type:"POST",dataType:"json",data:{mode:"loadAjaxPhotos",photosType:t},beforeSend:function(){$(e).html(this.loading)},success:function(t){t.failed&&$(e).html(s),t.completed&&$(e).html(t.photoBlocks)}})},this.rating_over=function(t,e){"disabled"!==e&&$("#rating_result_container").html(t)},this.rating_out=function(t,e){"disabled"!==e&&$("#rating_result_container").html(t)},this.submit_share_form=function(t,e){$("#share_form_results").css("display","block").html(this.loading),$.post(page,{mode:"share_object",type:e,users:$("#ShareUsers").val(),message:$("#message").val(),id:$("#objectid").val()},function(t){t?$("#share_form_results").html(t):alert("No data")},"text")},this.flag_object=function(t,e,s){$("#flag_form_result").css("display","block").html(this.loading),$.post(page,{mode:"flag_object",type:s,flag_type:$("#"+t+" select option:selected").val(),id:e},function(t){t?$("#flag_form_result").css("display","block").html(t):alert("No data")},"text")},this.slide_up_watch_video=function(t){"block"!==$(".video_action_result_boxes "+t).css("display")&&$(".video_action_result_boxes > *").slideUp()},this.add_to_fav=function(t,e){$("#video_action_result_cont").css("display","block").html(this.loading),$.post(page,{mode:"add_to_fav",type:t,id:e},function(t){t?$("#video_action_result_cont").css("display","block").html(t):alert("No data")},"text")},this.subscriber=function(t,e,s){$("#"+s).css("display","block").html(this.loading),$.post(page,{mode:e,subscribe_to:t},function(t){t?$("#"+s).css("display","block").html(t):alert("No data")},"text")},this.add_friend=function(t,e){$("#"+e).css("display","block").html(this.loading),$.post(page,{mode:"add_friend",uid:t},function(t){t?$("#"+e).css("display","block").html(t):alert("No data")},"text")},this.block_user=function(t,e){$("#"+e).css("display","block").html(this.loading),$.post(page,{mode:"ban_user",user:t},function(t){t?$("#"+e).css("display","block").html(t):alert("No data")},"text")},this.delete_comment=function(t){$.post(page,{mode:"delete_comment",cid:t},function(e){e?(e.msg&&(alert(e.msg),$("#comment_"+t).fadeOut("slow"),$("#spam_comment_"+t).fadeOut("slow")),e.err&&alert(e.err)):alert("No data")},"json")},this.add_playlist=function(t,e,s,o){switch($("#playlist_form_result").css("display","block").html(this.loading),t){case"add":$.post(page,{mode:"add_playlist",id:e,objtype:o,pid:$("#playlist_id option:selected").val()},function(t){t?(""!==t.err&&$("#playlist_form_result").css("display","block").html(t.err),""!==t.msg&&($("#playlist_form_result").css("display","block").html(t.msg),$("#"+s).css("display","none"))):alert("No data")},"json");break;case"new":$.post(page,{mode:"add_new_playlist",id:e,objtype:o,plname:$("#playlist_name").val()},function(t){t?(t.err&&$("#playlist_form_result").css("display","block").html(t.err),t.msg&&($("#playlist_form_result").css("display","block").html(t.msg),$("#"+s).css("display","none"))):alert("No data")},"json")}},this.get_group_info=function(t,e){"none"===$(t).css("display")&&($("#group_info_cont > div").slideUp(),$("#group_info_cont "+t).slideDown(),$(".group_detail_tabs .selected").removeClass("selected"),$(e).addClass("selected"))},this.show_menu=function(e,s){if(t.location.hash&&s)return show_menu(t.location.hash.substr(9),!1),!1;t.location.hash="current_"+e,this.current_menu!==e&&hide_menu(),$("#"+e).show(),this.current_menu=e,$("."+e).addClass("selected")},this.hide_menu=function(){if(""!==this.current_menu)return $("#"+this.current_menu).hide(),$("."+this.current_menu).removeClass("selected"),!0},this.to_reply=function(e){$("#reply_to").val(e),t.location="#add_comment"},this.spam_comment=function(t,e,s){$.post(page,{mode:"spam_comment",cid:t,type:e,typeid:s},function(e){e?(e.msg&&($("#comment_"+t).hide(),$("#spam_comment_"+t).fadeIn("slow")),e.err&&alert(e.err)):alert("No data")},"json")},this.swap_auto_play=function(){"true"===$.cookie("auto_play_playlist")?(set_cookie_secure("auto_play_playlist","false"),t.location=document.location,$("#ap_status").html("off")):($.cookie("auto_play_playlist","true",{path:"/"}),t.location=document.location,$("#ap_status").html("on"))},this.collection_actions=function(t,e,s,o,i,a){switch($(o).css("display","block"),$(o).html(this.loading),e){case"add_new_item":$.post(page,{mode:e,cid:$("#"+t+" #collection").val(),obj_id:s,type:i},function(t){t?(t.msg&&$(o).html(t.msg),t.err&&$(o).html(t.err)):alert("No Data returned")},"json");break;case"remove_collection_item":$("#"+t).hide(),$.post(page,{mode:e,obj_id:s,type:i,cid:a},function(e){e?(e.err&&(alert(e.err),$(o+"_"+s).hide(),$("#"+t+s).show()),e.msg&&($(o).html(e.msg),$("#"+t+"_"+s).slideUp(350))):(alert("No Data Returned"),$(o+"_"+s).hide(),$("#"+t).show())},"json")}return!1},this.openURL=function(t){document.locati=t},this.get_item=function(t,e,s,o,i){var a=$(t).html();$(t).html(this.loading),$.post(page,{mode:"get_item",ci_id:e,cid:s,type:o,direction:i},function(e){e?(construct_url([o,e.cid,e.key]),$("#collectionItemView").html(e.content)):(alert("No "+o+" returned"),$(t).text(a))},"json")},this.construct_url=function(e){var s;"yes"===Seo?(s="#!/item/"+e[0]+"/"+e[1]+"/"+e[2],t.location.hash=s):(s="#!?item="+e[2]+"&type="+e[0]+"&collection="+e[1],t.location.hash=s)},this.onReload_item=function(){var e,s;t.location.hash&&(e=t.location.href,"yes"===Seo?(s=RegExp("/item.+#!")).test(e)&&(e=e.replace(s,""),t.location.href=e):(s=RegExp("\\?item.+#!")).test(e)&&(e=e.replace(s,""),t.location.href=e))},this.pagination=function(t,e,s,o){var i,a=this,n=$(t),l=(n.id,n.parent()),d=n.html();l.attr("id")?i=parent.attr("id"):(l.attr("id","loadMoreParent"),i=l.attr("id")),$.ajax({url:a.page,type:"post",dataType:"json",data:{mode:"moreItems",page:o,cid:e,type:s},beforeSend:function(){n.removeAttr("onClick"),n.html(a.loading)},success:function(e){e.error?("BUTTON"===t.tagName&&n.attr("disabled","disabled"),n.removeAttr("onClick"),n.html("No more "+s)):($("#collectionItemsList").append(e.content),$("#NewPagination").html(e.pagination),n.html(d))}})},this.ajax_add_collection=function(t){var e,s=$("#"+t.form.id),o=$(t),i=o.html(),a=$("#CollectionResult");e=$.ajax({url:this.page,type:"post",dataType:"json",data:"mode=add_collection&"+s.serialize(),beforeSend:function(){"block"===a.css("display")&&a.slideUp("fast"),o.attr("disabled","disabled"),o.html(this.loading)},success:function(t){t.msg?($("#CollectionDIV").slideUp("fast"),a.html(t.msg).slideDown("fast"),this.collectionID=t.id):(a.html(t.err).slideDown("fast"),o.removeAttr("disabled"),o.html(i))}})},this.getDetails=function(t){var e=getInputs(t),s=Array(e.length);return $.each(e,function(t,e){query=$("#"+e.id+" *").serialize(),query+="&mode=ajaxPhotos",s[t]=query}),s},this.getName=function(t){return t.substring(t.lastIndexOf("/")+1)},this.viewRatings=function(t,e){var s=$(t),o=s.html();document.getElementById("RatingStatContainer")?$("#RatingStatContainer").toggle():loadAjax=$.ajax({url:page,type:"post",dataType:"text",data:{mode:"viewPhotoRating",photoid:e},beforeSend:function(){s.html(this.loading)},success:function(t){s.html(o),t?$("<div/>").attr("id","RatingStatContainer").addClass("clearfix").css({padding:"8px",font:"normal 11px Tahoma",border:"1px solid #ccc",backgroundColor:"#FFF"}).html(t).fadeIn(350).insertAfter(s):(s.removeAttr("onclick"),alert("Photo has not recieved any rating yet."))}})},this.showAdvanceSearch=function(t,e,s,o){$("#"+t);var i=$("#"+e),a=$("#SearchType").val();i.toggle(),"block"===i.css("display")&&i.children().hide().filter("#"+a).show(),$("."+s).toggleClass(o)},this.toggleCategory=function(t,e){var s=$(t),o=s.attr("alt"),i=$("#"+o),a=o.split("_")[0],n=$.browser.msie,l=$.browser.version;"none"===i.css("display")?(i.slideDown(350),n&&"7.0"===l&&i.addClass("internetExplorer7CategoryToggleFix"),set_cookie_secure(a,"expanded"),s.removeClass("none").addClass("block")):(i.slideUp(350),n&&"7.0"===l&&i.removeClass("internetExplorer7CategoryToggleFix"),set_cookie_secure(a,"collapsed"),s.removeClass("block").addClass("none"))},this.loadObject=function(t,e,s,o){var i=[,,,,];i.this=t,i.type=e,i.objID=s,i.container=o;var a=$(i.this);a.parent().css("position","relative"),$.ajax({url:this.page,type:"POST",dataType:"json",data:{mode:"channelFeatured",contentType:i.type,objID:i.objID},beforeSend:function(){a.find("img").animate({opacity:.5}),$("#"+i.container).animate({opacity:.5})},success:function(t){t.error?(a.find("img").animate({opacity:1}),$("#"+i.container).animate({opacity:1}),alert(t.error)):(a.parent().children(".selected").removeClass("selected"),a.addClass("selected"),a.find("img").animate({opacity:1}),$("#"+i.container).html(t.data).animate({opacity:1}))}})},this.getComments=function(t,e,s,o,i,a,n){$("#comments").html("<div style='padding:5px 0;'>"+this.loading+"</div>"),$.ajax({type:"POST",url:this.page,data:{mode:"getComments",page:o,type:t,type_id:e,object_type:a,last_update:s,total_comments:i,comments_voting:"no",admin:n},success:function(t){$("#comments").hide().html(t).fadeIn("slow")},dataType:"text"})},this.checkUncheckAll=function(t){var e=t.form,s=0;for(s=0;s<e.length;s++)"checkbox"===e[s].type&&"checkall"!==e[s].name&&(e[s].checked=t.checked)},this.rate=function(t,e,s){var o=baseurl+"actions/ajax.php";$.post(o,{mode:"rating",id:t,rating:e,type:s},function(t){t?$("#rating_container").html(t):alert("No data")},"text")},this.setPageHash=function(e){var s=e.replace(this.baseurl,"");t.location.hash.replace("#!",""),t.location.hash="#!"+s},this.callURLParser=function(){var e,s=t.location.href.match(/(\#![/a-zA-Z0-9=\.\&\-\_\?]*)/g);s&&(e=s[s.length-1])&&(t.location.href=this.lastVisited.replace("#!",""))},this.getAllComments=function(t,e,s,o,i,a,n){$("#userCommentsList").html("<div style='padding:5px 0;'>"+loading+"</div>"),$.ajax({type:"POST",url:page,data:{mode:"getComments",page:o,type:t,type_id:e,object_type:a,last_update:s,total_comments:i,comments_voting:"no",admin:n},success:function(t){$("#userCommentsList").html(t)},dataType:"text"})},this.getCommentsNew=function(t,e,s,o,i,a,n){$.ajax({type:"POST",url:page,data:{mode:"getCommentsNew",page:o,type:t,type_id:e,object_type:a,last_update:s,total_comments:i,comments_voting:"no",admin:n},beforeSend:function(){$(document).find("#load-more-comments").text(lang_loading)},success:function(t){"none"===t?$("#load-more-comments").text("End of comments list").attr("disabled","disabled"):($("#userCommentsList").append(t),$(document).find("#load-more-comments").text(lang_load_more))},dataType:"text"})},this.addToFav=function(t,e){$("#messageFav").show(),$.post(page,{mode:"add_to_fav",type:t,id:e},function(t){t?($("#messageFav").html(t),setTimeout(function(){$("#messageFav").hide()},5e3)):alert("No data")},"text")},this.subscribeToChannel=function(t,e,s){$("#messageFav").show(),$.post(page,{mode:e,subscribe_to:t},function(t){t?($("#messageFav").html(t),setTimeout(function(){$("#messageFav").hide()},5e3)):alert("No data")},"text")},this.debounce=function(t,e,s){var o;return function(){var i=this,a=arguments,n=function(){o=null,s||t.apply(i,a)},l=s&&!o;clearTimeout(o),o=setTimeout(n,e),l&&t.apply(i,a)}},this.throwHeadMsg=function(t,e,s,o){$(document).find("#headErr").remove(),(s=parseInt(s))<10&&(s=3e3),t.length<3&&(t="info"),$('<div id="headErr" class="alert_messages_holder" style="display:none;"><div class="alert alert-'+t+' alert-messages alert-ajax" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+e+"</div></div>").insertAfter("#header").fadeIn("slow").delay(s).fadeOut()},this.rateNew=function(t,e,s){curObj=this;var o=baseurl+"actions/ajax.php";$.post(o,{mode:"rating",id:t,rating:e,type:s},function(t){t?(likesSect=$(".likes").find("span:nth-child(2)").html(),dislikesSect=$(".dislikes").find("span:nth-child(2)").html(),currLikes=parseInt(likesSect),currDislikes=parseInt(dislikesSect),isError=$(t).find("span.error").html(),isOk=$(t).find("span.msg").html(),isError?isError.length>2&&curObj.throwHeadMsg("danger",isError,5e3,!0):isOk&&isOk.length>2&&(5==e?(newRating=currLikes+1,$(".likes").addClass("rated").find("span:nth-child(2)").html(newRating)):((newRating=currDislikes+1)<0&&(newRating=0),$(".dislikes").addClass("rated").find("span:nth-child(2)").html(newRating)),curObj.throwHeadMsg("success",isOk,5e3,!0))):alert("No data")},"text")},this.showMeTheMsg=function(t,e){curObj=this,isOk=!0==e?$(t).filter("div.msg").find("div.alert").html():$(t).filter("div.msg").html(),(isError=$(t).filter("div.error").html())?isError.length>2&&curObj.throwHeadMsg("danger",isError,5e3,!0):isOk&&isOk.length>2&&curObj.throwHeadMsg("success",isOk,5e3,!0)},this.add_friendNew=function(t,e){curObj=this,$("#"+e).css("display","block").html(this.loading),$.post(page,{mode:"add_friend",uid:t},function(t){t?($("#"+e).html(t.html),curObj.showMeTheMsg(t.msg)):alert("No data")},"json")},this.add_to_favNew=function(t,e){var s=this;$("#video_action_result_cont").css("display","block").html(s.loading),$.post(page,{mode:"add_to_fav",type:t,id:e},function(t){t?($("#video_action_result_cont").hide(),s.showMeTheMsg(t,!0)):alert("No data")},"text")},this.flag_objectNew=function(t,e,s){var o=this;$("#flag_form_result").css("display","block").html(this.loading),$.post(page,{mode:"flag_object",type:s,flag_type:$("#"+t+" select option:selected").val(),id:e},function(t){t?($("#flag_form_result").hide(),o.showMeTheMsg(t)):alert("No data")},"text")},this.addToPlaylist=function(t,e,s){curObj=this,$("#playlist_form_result").html(loading).show(),$.post(page,{mode:"add_playlist",id:t,objtype:s,pid:$("#playlist_id option:selected").val()},function(t){if(t){if(t.err.length>2){cleanedHtml=$.parseHTML(t.err);var e=$(cleanedHtml).html();curObj.throwHeadMsg("danger",e,5e3,!0)}if(t.msg.length>2){cleanedHtml=$.parseHTML(t.msg);var e=$(cleanedHtml).find("div.alert").html();curObj.throwHeadMsg("success",e,5e3,!0),$("#addPlaylistCont").toggle()}}else alert("No data");$("#playlist_form_result").hide()},"json")},this.createPlaylist=function(t,e,s){curObj=this,$("#playlist_form_result").html(loading).show(),$.post(page,{mode:"add_new_playlist",id:t,objtype:s,plname:$("#playlist_name").val()},function(t){if(t){if(t.err.length>2){cleanedHtml=$.parseHTML(t.err);var s=$(cleanedHtml).html();curObj.throwHeadMsg("danger",s,5e3,!0)}if(t.msg){cleanedHtml=$.parseHTML(t.msg);var s=$(cleanedHtml).find("div.alert").html();curObj.throwHeadMsg("success",s,5e3,!0),$("#"+e)[0].reset(),$("#addPlaylistCont").toggle(),$("#add_playlist_form").css("display","block"),$("#new_playlist_form").css("display","none")}}else alert("No data");$("#playlist_form_result").hide()},"json")},this.getModalVideo=function(t){$.ajax({type:"post",url:baseurl+"actions/commonAjax.php",data:{videoid:t,mode:"get_video"},dataType:"json",beforeSend:function(t){$(".my-modal-content").html('<div style="color:#fff;font-size:25px;padding:10px 10px 10px 10px;">'+loadingImg+"</div>")},success:function(t){if(t.success){let e=t.video_details;$(".my-modal-content").attr("id",e.videoid).html(t.video).promise().done(function(){let t=$(".my-modal-content").find("video")[0];$(".cd-popup").addClass("is-visible"),document.querySelector(".player-holder video").addEventListener("loadedmetadata",function(e){adaptRatioPlayer();let s=t.play();null!==s&&s.catch(()=>{t.play()})});let s=$(document).find("video");if(s.length>0)for(let o=0;o<s.length;o++){let i=$(s[o]).attr("id").split("_");i=i[3],e.videoid!==i&&$(s[o])[0].pause()}})}else t.failure&&$(".my-modal-content").html('<div class="alert alert-warning">'+t.message+"</div>")}})},this.getPlayerEl=function(t){var e=$(document).find(".cb_video_js_"+t+"-dimensions");return!!e&&e[0]},this.unsubscribeToChannel=function(t,e){curObj=this;var s=document.getElementsByClassName("subs_"+t);s.length>0&&Array.prototype.forEach.call(s,function(t){t.disabled=!0}),$.post(page,{mode:e,subscribe_to:t},function(e){if(e){if("err"===(e=JSON.parse(e)).typ)return curObj.showMeTheMsg('<div class="error">'+e.msg+"</div>"),Array.prototype.forEach.call(s,function(t){t.disabled=!1}),!1;curObj.showMeTheMsg('<div class="msg">'+e.msg+"</div>"),e.severity<2?s.length>0&&Array.prototype.forEach.call(s,function(e){e.innerHTML=lang_subscribe,e.setAttribute("onclick","_cb.subscribeToChannelNew("+t+",'subscribe_user');"),e.disabled=!1,curObj.updateSubscribersCount(t)}):Array.prototype.forEach.call(s,function(t){t.disabled=!1})}else alert("No data")},"text")},this.subscribeToChannelNew=function(t,e){var s=this,o=document.getElementsByClassName("subs_"+t);o.length>0&&Array.prototype.forEach.call(o,function(t){t.disabled=!0}),$.post(page,{mode:e,subscribe_to:t},function(e){if(e){if("err"===(e=JSON.parse(e)).typ)return s.showMeTheMsg('<div class="error">'+e.msg+"</div>"),Array.prototype.forEach.call(o,function(t){t.disabled=!1}),!1;s.showMeTheMsg('<div class="msg">'+e.msg+"</div>"),e.severity<2?o.length>0&&Array.prototype.forEach.call(o,function(e){e.innerHTML=lang_unsubscribe,e.setAttribute("onclick","_cb.unsubscribeToChannel("+t+",'unsubscribe_user');"),e.disabled=!1,s.updateSubscribersCount(t)}):Array.prototype.forEach.call(o,function(t){t.disabled=!1})}else alert("No data")},"text")},this.updateSubscribersCount=function(t){$.post(page,{mode:"get_subscribers_count",userid:t},function(e){e?(subsObj=JSON.parse(e),$("#user_subscribers_"+t).html(subsObj.subscriber_count)):alert("No data")},"text")}};t._cb=new e}(window);
