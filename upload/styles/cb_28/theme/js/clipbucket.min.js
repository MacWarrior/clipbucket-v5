!function(a){a._cb=new function(){this.baseurl=baseurl,this.imageurl="",this.page=baseurl+"actions/ajax.php",this.loading_img="<img alt='loading' style='vertical-align:middle' src='"+imageurl+"/ajax-loader-big.gif'/>",this.loading=this.loading_img+" Loading...",this.download=0,this.count=0,this.hasLoaded=!1,this.current_menu="",this.collectionID=!1,this.ua=navigator.userAgent.toLowerCase(),this.Confirm_Delete=function(t){confirm("Are you sure you want to delete")&&(document.location=t)},this.Confirm_Uninstall=function(t){confirm("Are you sure you want to uninstall this plugin ?")&&(document.location=t)},this.confirm_it=function(t){return!!confirm(t)},this.reloadImage=function(t,e){(img=document.getElementById(e)).src=t+"?"+Math.random()},this.randomString=function(){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e="",a=0;a<8;a++){var s=Math.floor(Math.random()*t.length);e+=t.substring(s,s+1)}return e},this.delete_item=function(t,e,a,s){$("#"+t+"-"+e).click(function(){confirm(a)&&(document.location=s)})},this.delete_video=function(t,e,a,s){return delete_item(t,e,a,s)},this.get_video=function(t,e){$(e).css("display","block"),$(e).html(this.loading),$(e).html(this.loading),$.post(page,{mode:t},function(t){$(e).html(t)},"text")},this.rating_over=function(t,e){"disabled"!==e&&$("#rating_result_container").html(t)},this.rating_out=function(t,e){"disabled"!==e&&$("#rating_result_container").html(t)},this.submit_share_form=function(t,e){$("#share_form_results").css("display","block").html(this.loading),$.post(page,{mode:"share_object",type:e,users:$("#ShareUsers").val(),message:$("#message").val(),id:$("#objectid").val()},function(t){t?$("#share_form_results").html(t):alert("No data")},"text")},this.flag_object=function(t,e,a){$("#flag_form_result").css("display","block").html(this.loading),$.post(page,{mode:"flag_object",type:a,flag_type:$("#"+t+" select option:selected").val(),id:e},function(t){t?$("#flag_form_result").css("display","block").html(t):alert("No data")},"text")},this.slide_up_watch_video=function(t){"block"!==$(".video_action_result_boxes "+t).css("display")&&$(".video_action_result_boxes > *").slideUp()},this.add_to_fav=function(t,e){$("#video_action_result_cont").css("display","block").html(this.loading),$.post(page,{mode:"add_to_fav",type:t,id:e},function(t){t?$("#video_action_result_cont").css("display","block").html(t):alert("No data")},"text")},this.subscriber=function(t,e,a){$("#"+a).css("display","block").html(this.loading),$.post(page,{mode:e,subscribe_to:t},function(t){t?$("#"+a).css("display","block").html(t):alert("No data")},"text")},this.add_friend=function(t,e){$("#"+e).css("display","block").html(this.loading),$.post(page,{mode:"add_friend",uid:t},function(t){t?$("#"+e).css("display","block").html(t):alert("No data")},"text")},this.block_user=function(t,e){$("#"+e).css("display","block").html(this.loading),$.post(page,{mode:"ban_user",user:t},function(t){t?$("#"+e).css("display","block").html(t):alert("No data")},"text")},this.delete_comment=function(e){$.post(page,{mode:"delete_comment",cid:e},function(t){t?(t.msg&&(alert(t.msg),$("#comment_"+e).fadeOut("slow"),$("#spam_comment_"+e).fadeOut("slow")),t.err&&alert(t.err)):alert("No data")},"json")},this.add_playlist=function(t,e,a,s){switch($("#playlist_form_result").css("display","block").html(this.loading),t){case"add":$.post(page,{mode:"add_playlist",id:e,objtype:s,pid:$("#playlist_id option:selected").val()},function(t){t?(""!==t.err&&$("#playlist_form_result").css("display","block").html(t.err),""!==t.msg&&($("#playlist_form_result").css("display","block").html(t.msg),$("#"+a).css("display","none"))):alert("No data")},"json");break;case"new":$.post(page,{mode:"add_new_playlist",id:e,objtype:s,plname:$("#playlist_name").val()},function(t){t?(t.err&&$("#playlist_form_result").css("display","block").html(t.err),t.msg&&($("#playlist_form_result").css("display","block").html(t.msg),$("#"+a).css("display","none"))):alert("No data")},"json")}},this.get_group_info=function(t,e){"none"===$(t).css("display")&&($("#group_info_cont > div").slideUp(),$("#group_info_cont "+t).slideDown(),$(".group_detail_tabs .selected").removeClass("selected"),$(e).addClass("selected"))},this.show_menu=function(t,e){if(a.location.hash&&e)return e=a.location.hash,show_menu(e.substr(9),!1),!1;a.location.hash="current_"+t,this.current_menu!==t&&hide_menu(),$("#"+t).show(),this.current_menu=t,$("."+t).addClass("selected")},this.hide_menu=function(){if(""!==this.current_menu)return $("#"+this.current_menu).hide(),$("."+this.current_menu).removeClass("selected"),!0},this.to_reply=function(t){$("#reply_to").val(t),a.location="#add_comment"},this.spam_comment=function(e,t,a){$.post(page,{mode:"spam_comment",cid:e,type:t,typeid:a},function(t){t?(t.msg&&($("#comment_"+e).hide(),$("#spam_comment_"+e).fadeIn("slow")),t.err&&alert(t.err)):alert("No data")},"json")},this.swap_auto_play=function(){"true"===$.cookie("auto_play_playlist")?(set_cookie_secure("auto_play_playlist","false"),a.location=document.location,$("#ap_status").html("off")):($.cookie("auto_play_playlist","true",{path:"/"}),a.location=document.location,$("#ap_status").html("on"))},this.collection_actions=function(e,t,a,s,o,i){switch($(s).css("display","block"),$(s).html(this.loading),t){case"add_new_item":$.post(page,{mode:t,cid:$("#"+e+" #collection").val(),obj_id:a,type:o},function(t){t?(t.msg&&$(s).html(t.msg),t.err&&$(s).html(t.err)):alert("No Data returned")},"json");break;case"remove_collection_item":$("#"+e).hide(),$.post(page,{mode:t,obj_id:a,type:o,cid:i},function(t){t?(t.err&&(alert(t.err),$(s+"_"+a).hide(),$("#"+e+a).show()),t.msg&&($(s).html(t.msg),$("#"+e+"_"+a).slideUp(350))):(alert("No Data Returned"),$(s+"_"+a).hide(),$("#"+e).show())},"json")}return!1},this.openURL=function(t){document.locati=t},this.construct_url=function(t){t="yes"===Seo?"#!/item/"+t[0]+"/"+t[1]+"/"+t[2]:"#!?item="+t[2]+"&type="+t[0]+"&collection="+t[1];a.location.hash=t},this.onReload_item=function(){var t,e;a.location.hash&&(t=a.location.href,"yes"===Seo?(e=RegExp("/item.+#!")).test(t)&&(t=t.replace(e,""),a.location.href=t):(e=RegExp("\\?item.+#!")).test(t)&&(t=t.replace(e,""),a.location.href=t))},this.pagination=function(e,t,a,s){var o=this,i=$(e),n=(i.id,i.parent()),l=i.html();(n.attr("id")?parent:(n.attr("id","loadMoreParent"),n)).attr("id"),$.ajax({url:o.page,type:"post",dataType:"json",data:{mode:"more_items",page:s,cid:t,type:a},beforeSend:function(){i.removeAttr("onClick"),i.html(o.loading)},success:function(t){t.error?("BUTTON"===e.tagName&&i.attr("disabled","disabled"),i.removeAttr("onClick"),i.html("No more "+a)):($("#collectionItemsList").append(t.content),$("#NewPagination").html(t.pagination),i.html(l))}})},this.ajax_add_collection=function(t){var e=t.form.id,e=$("#"+e),a=$(t),s=a.html(),o=$("#CollectionResult");$.ajax({url:this.page,type:"post",dataType:"json",data:"mode=add_collection&"+e.serialize(),beforeSend:function(){"block"===o.css("display")&&o.slideUp("fast"),a.attr("disabled","disabled"),a.html(this.loading)},success:function(t){t.msg?($("#CollectionDIV").slideUp("fast"),o.html(t.msg).slideDown("fast"),this.collectionID=t.id):(o.html(t.err).slideDown("fast"),a.removeAttr("disabled"),a.html(s))}})},this.getName=function(t){return t.substring(t.lastIndexOf("/")+1)},this.viewRatings=function(t,e){var a=$(t),s=a.html();document.getElementById("RatingStatContainer")?$("#RatingStatContainer").toggle():loadAjax=$.ajax({url:page,type:"post",dataType:"text",data:{mode:"viewPhotoRating",photoid:e},beforeSend:function(){a.html(this.loading)},success:function(t){a.html(s),t?$("<div/>").attr("id","RatingStatContainer").addClass("clearfix").css({padding:"8px",font:"normal 11px Tahoma",border:"1px solid #ccc",backgroundColor:"#FFF"}).html(t).fadeIn(350).insertAfter(a):(a.removeAttr("onclick"),alert("Photo has not recieved any rating yet."))}})},this.showAdvanceSearch=function(t,e,a,s){$("#"+t);t=$("#"+e),e=$("#SearchType").val();t.toggle(),"block"===t.css("display")&&t.children().hide().filter("#"+e).show(),$("."+a).toggleClass(s)},this.toggleCategory=function(t,e){var t=$(t),a=t.attr("alt"),s=$("#"+a),a=a.split("_")[0],o=$.browser.msie,i=$.browser.version;"none"===s.css("display")?(s.slideDown(350),o&&"7.0"===i&&s.addClass("internetExplorer7CategoryToggleFix"),set_cookie_secure(a,"expanded"),t.removeClass("none").addClass("block")):(s.slideUp(350),o&&"7.0"===i&&s.removeClass("internetExplorer7CategoryToggleFix"),set_cookie_secure(a,"collapsed"),t.removeClass("block").addClass("none"))};this.checkUncheckAll=function(t){for(var e=t.form,a=0,a=0;a<e.length;a++)"checkbox"===e[a].type&&"checkall"!==e[a].name&&(e[a].checked=t.checked)},this.rate=function(t,e,a){var s=baseurl+"actions/ajax.php";$.post(s,{mode:"rating",id:t,rating:e,type:a},function(t){t?$("#rating_container").html(t):alert("No data")},"text")},this.setPageHash=function(t){t=t.replace(this.baseurl,"");a.location.hash.replace("#!","");a.location.hash="#!"+t},this.callURLParser=function(){var t=a.location.href.match(/(\#![/a-zA-Z0-9=\.\&\-\_\?]*)/g);t&&t[t.length-1]&&(a.location.href=this.lastVisited.replace("#!",""))},this.getAllComments=function(t,e,a,s,o,i,n){$("#userCommentsList").html("<div style='padding:5px 0;'>"+loading+"</div>"),$.ajax({type:"POST",url:page,data:{mode:"getComments",page:s,type:t,type_id:e,object_type:i,last_update:a,total_comments:o,comments_voting:"no",admin:n},success:function(t){$("#userCommentsList").html(t)},dataType:"text"})},this.addToFav=function(t,e){$("#messageFav").show(),$.post(page,{mode:"add_to_fav",type:t,id:e},function(t){t?($("#messageFav").html(t),setTimeout(function(){$("#messageFav").hide()},5e3)):alert("No data")},"text")},this.subscribeToChannel=function(t,e,a){$("#messageFav").show(),$.post(page,{mode:e,subscribe_to:t},function(t){t?($("#messageFav").html(t),setTimeout(function(){$("#messageFav").hide()},5e3)):alert("No data")},"text")},this.debounce=function(s,o,i){var n;return function(){var t=this,e=arguments,a=i&&!n;clearTimeout(n),n=setTimeout(function(){n=null,i||s.apply(t,e)},o),a&&s.apply(t,e)}},this.throwHeadMsg=function(t,e,a){$(document).find("#headErr").remove(),(a=parseInt(a))<10&&(a=3e3),t.length<3&&(t="info"),$('<div id="headErr" class="alert_messages_holder" style="display:none;"><div class="alert alert-'+t+' alert-messages alert-ajax" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+e+"</div></div>").insertAfter("#header").fadeIn("slow").delay(a).fadeOut()},this.throwHeadDivMsg=function(t,e){$(document).find("#headErr").remove(),(e=parseInt(e))<10&&(e=3e3),$('<div id="headErr" class="alert_messages_holder alert-ajax" style="display:none;">'+t+"</div>").insertAfter("#header").fadeIn("slow").delay(e).fadeOut()},this.rateNew=function(t,s,e){curObj=this;var a=baseurl+"actions/rating_update.php";$.post(a,{id:t,rating:s,type:e},function(t){if(t.success){var e=parseInt($(".likes").find("span:nth-child(2)").html()),a=parseInt($(".dislikes").find("span:nth-child(2)").html());let t;5==s?$(".likes").hasClass("rated")?((t=e-1)<0&&(t=0),$(".likes").removeClass("rated").find("span:nth-child(2)").html(t)):(t=e+1,$(".likes").addClass("rated").find("span:nth-child(2)").html(t),$(".dislikes").hasClass("rated")&&((t=a-1)<0&&(t=0),$(".dislikes").removeClass("rated").find("span:nth-child(2)").html(t))):$(".dislikes").hasClass("rated")?((t=a-1)<0&&(t=0),$(".dislikes").removeClass("rated").find("span:nth-child(2)").html(t)):(t=a+1,$(".dislikes").addClass("rated").find("span:nth-child(2)").html(t),$(".likes").hasClass("rated")&&((t=e-1)<0&&(t=0),$(".likes").removeClass("rated").find("span:nth-child(2)").html(t)))}curObj.throwHeadDivMsg(t.msg,5e3,!0)},"json")},this.showMeTheMsg=function(t,e){let a;a=(1==e?$(t).filter("div.msg").find("div.alert"):$(t).filter("div.msg")).html();e=$(t).filter("div.error").html();e?2<e.length&&this.throwHeadMsg("danger",e,5e3,!0):a&&2<a.length&&this.throwHeadMsg("success",a,5e3,!0)},this.add_friendNew=function(t,e){curObj=this,$("#"+e).css("display","block").html(this.loading),$.post(page,{mode:"add_friend",uid:t},function(t){t?($("#"+e).html(t.html),curObj.showMeTheMsg(t.msg)):alert("No data")},"json")},this.add_to_favNew=function(t,e){return this.manage_fav("add",t,e)},this.remove_from_fav=function(t,e){return this.manage_fav("remove",t,e)},this.manage_fav=function(t,s,o){var i=this;let n="";if("remove"==t)n=baseurl+"actions/favorite_remove.php";else{if("add"!=t)return!1;n=baseurl+"actions/favorite_add.php"}return $("#video_action_result_cont").css("display","block").html(i.loading),new Promise((e,a)=>{$.post(n,{type:s,id:o},function(t){(t.success?e:a)(t),$("#video_action_result_cont").hide(),i.throwHeadDivMsg(t.msg,5e3,!0)},"json")})},this.flag_objectNew=function(t,e,a){var s=this;$("#flag_form_result").css("display","block").html(this.loading),$.post(page,{mode:"flag_object",type:a,flag_type:$("#"+t+" select option:selected").val(),id:e},function(t){t?($("#flag_form_result").hide(),s.showMeTheMsg(t)):alert("No data")},"text")},this.addToPlaylist=function(t,e,a){curObj=this;var s=$("#playlist_id option:selected").val();"0"==s||""==s||null==s?curObj.throwHeadMsg("danger",please_select_playlist,5e3,!0):($("#playlist_form_result").html(loading).show(),$.post(page,{mode:"add_playlist",id:t,objtype:a,pid:s},function(t){var e;t?(2<t.err.length&&(cleanedHtml=$.parseHTML(t.err),e=$(cleanedHtml).html(),curObj.throwHeadMsg("danger",e,5e3,!0)),2<t.msg.length&&(cleanedHtml=$.parseHTML(t.msg),e=$(cleanedHtml).find("div.alert").html(),curObj.throwHeadMsg("success",e,5e3,!0),$("#addPlaylistCont").toggle()),void 0!==t.total_items&&$("#option_playlist_"+s).html(t.total_items)):alert("No data"),$("#playlist_form_result").hide()},"json"))},this.createPlaylist=function(t,a,e){curObj=this,$("#playlist_form_result").html(loading).show(),$.post(page,{mode:"add_new_playlist",id:t,objtype:e,plname:$("#playlist_name").val()},function(t){var e;t?(2<t.err.length&&(cleanedHtml=$.parseHTML(t.err),e=$(cleanedHtml).html(),curObj.throwHeadMsg("danger",e,5e3,!0)),t.msg&&(cleanedHtml=$.parseHTML(t.msg),e=$(cleanedHtml).find("div.alert").html(),curObj.throwHeadMsg("success",e,5e3,!0),$("#"+a).html(t.html))):alert("No data"),$("#playlist_form_result").hide()},"json")},this.getModalVideo=function(t){$.ajax({type:"post",url:baseurl+"actions/commonAjax.php",data:{videoid:t,mode:"get_video"},dataType:"json",beforeSend:function(t){$(".my-modal-content").html('<div style="color:#fff;font-size:25px;padding:10px 10px 10px 10px;">'+loadingImg+"</div>")},success:function(t){if(t.success){let o=t.video_details;$(".my-modal-content").attr("id",o.videoid).html(t.video).promise().done(function(){let a=$(".my-modal-content").find("video")[0];$(".cd-popup").addClass("is-visible"),document.querySelector(".player-holder video").addEventListener("loadedmetadata",function(t){adaptRatioPlayer();var e=a.play();null!==e&&e.catch(()=>{a.play()})});var e=$(document).find("video");if(0<e.length)for(let t=0;t<e.length;t++){var s=$(e[t]).attr("id").split("_")[3];o.videoid!==s&&$(e[t])[0].pause()}})}else t.failure&&$(".my-modal-content").html('<div class="alert alert-warning">'+t.message+"</div>")}})},this.getPlayerEl=function(t){t=$(document).find(".cb_video_js_"+t+"-dimensions");return!!t&&t[0]},this.unsubscribeToChannel=function(e,t){curObj=this;var a=document.getElementsByClassName("subs_"+e);0<a.length&&Array.prototype.forEach.call(a,function(t){t.disabled=!0}),$.post(page,{mode:t,subscribe_to:e},function(t){if(t){if("err"===(t=JSON.parse(t)).typ)return curObj.showMeTheMsg('<div class="error">'+t.msg+"</div>"),Array.prototype.forEach.call(a,function(t){t.disabled=!1}),!1;curObj.showMeTheMsg('<div class="msg">'+t.msg+"</div>"),t.severity<2?0<a.length&&Array.prototype.forEach.call(a,function(t){t.innerHTML=lang_subscribe,t.setAttribute("onclick","_cb.subscribeToChannelNew("+e+",'subscribe_user');"),t.disabled=!1,curObj.updateSubscribersCount(e)}):Array.prototype.forEach.call(a,function(t){t.disabled=!1})}else alert("No data")},"text")},this.subscribeToChannelNew=function(e,t){var a=this,s=document.getElementsByClassName("subs_"+e);0<s.length&&Array.prototype.forEach.call(s,function(t){t.disabled=!0}),$.post(page,{mode:t,subscribe_to:e},function(t){if(t){if("err"===(t=JSON.parse(t)).typ)return a.showMeTheMsg('<div class="error">'+t.msg+"</div>"),Array.prototype.forEach.call(s,function(t){t.disabled=!1}),!1;a.showMeTheMsg('<div class="msg">'+t.msg+"</div>"),t.severity<2?0<s.length&&Array.prototype.forEach.call(s,function(t){t.innerHTML=lang_unsubscribe,t.setAttribute("onclick","_cb.unsubscribeToChannel("+e+",'unsubscribe_user');"),t.disabled=!1,a.updateSubscribersCount(e)}):Array.prototype.forEach.call(s,function(t){t.disabled=!1})}else alert("No data")},"text")},this.updateSubscribersCount=function(e){$.post(page,{mode:"get_subscribers_count",userid:e},function(t){t?(subsObj=JSON.parse(t),$("#user_subscribers_"+e).html(subsObj.subscriber_count)):alert("No data")},"text")},this.listener_favorite_old=function(a,s){const o=this;$(".manage_favorite").on("click",function(t){let e=$(this);e.hasClass("glyphicon-heart")?(e.removeClass("glyphicon-heart").html(o.loading_img),o.remove_from_fav(a,s).then(function(t){e.html("").addClass("glyphicon-heart-empty"),e.attr("title",lang.add_to_my_favorites)}).catch(function(t){e.addClass("glyphicon-heart").html("")})):(e.removeClass("glyphicon-heart-empty").html(o.loading_img),o.add_to_favNew(a,s).then(function(t){e.html("").addClass("glyphicon-heart"),e.attr("title",lang.remove_from_favorites)}).catch(function(t){e.addClass("glyphicon-heart-empty").html("")}))})},this.listener_favorite=function(a,s){const o=this;$(".manage_favorite").on("click",function(t){let e=$(this);e.hasClass("glyphicon-heart")?(e.removeClass("glyphicon-heart").html(o.loading_img),o.remove_from_fav(a,s).then(function(t){e.html("").addClass("glyphicon-heart-empty"),e.attr("title",lang.add_to_my_favorites)}).catch(function(t){e.addClass("glyphicon-heart").html("")})):(e.removeClass("glyphicon-heart-empty").html(o.loading_img),o.add_to_favNew(a,s).then(function(t){e.html("").addClass("glyphicon-heart"),e.attr("title",lang.remove_from_favorites)}).catch(function(t){e.addClass("glyphicon-heart-empty").html("")}))})},this.listener_favorite_only_remove=function(a,t){const s=this;let e=".manage_favorite";void 0!==t&&(e="."+t+" "+e),$(e).off().on("click",function(t){t.preventDefault(),t.stopPropagation();const e=$(this);e.removeClass("glyphicon-heart").html(s.loading_img),s.remove_from_fav(a,e.data("id")).then(function(t){e.remove()}).catch(function(t){e.addClass("glyphicon-heart").html("")})})}}}(window);