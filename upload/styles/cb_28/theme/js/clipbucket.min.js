!function(o){o._cb=new function(){this.baseurl=baseurl,this.imageurl="",this.page="/ajax.php",this.loading_img="<img alt='loading' style='vertical-align:middle' src='"+imageurl+"/ajax-loader-big.gif'/>",this.loading=this.loading_img+" Loading...",this.download=0,this.total_size=0,this.cur_speed=0,this.status_refesh=1,this.result_page="/actions/file_results.php",this.download_page="/actions/file_downloader.php",this.count=0,this.hasLoaded=!1,this.perc_download=0,this.force_stop=!1,this.remoteObjID="",this.current_menu="",this.collectionID=!1,this.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.ua=navigator.userAgent.toLowerCase(),0<=this.ua.indexOf(" chrome/")||0<=this.ua.indexOf(" firefox/")||this.ua.indexOf(" gecko/"),this.setRemoteId=function(){this.remoteObjID=this.randomString()},this.Confirm_Delete=function(t){confirm("Are you sure you want to delete")&&(document.location=t)},this.Confirm_Uninstall=function(t){confirm("Are you sure you want to uninstall this plugin ?")&&(document.location=t)},this.confirm_it=function(t){return!!confirm(t)},this.reloadImage=function(t,e){(img=document.getElementById(e)).src=t+"?"+Math.random()},this.randomString=function(){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e="",o=0;o<8;o++){var a=Math.floor(Math.random()*t.length);e+=t.substring(a,a+1)}return e},this.check_remote_url=function(){var e=this,o=$("#remote_file_url").val(),t=$("#remoteUploadBttn"),a=$("#remoteUploadBttnStop");if(this.force_stop=!1,o.match(/^e.g/)||void 0===o||0===o.length)return $("#error_msgs").html('<div class="alert alert-danger" role="alert">Given URL is invalid!</div>'),!1;function s(){$(".downloadStatusContainer").addClass("hidden"),a.removeAttr("disabled").hide(),t.removeAttr("disabled").show()}$(".downloadStatusContainer").removeClass("hidden"),t.attr("disabled","disabled").hide(),a.show();var i=$.ajax({url:e.download_page,type:"post",data:{file:o,file_name:file_name},dataType:"JSON",beforeSend:function(){e.remoteUploadStatusUpdate();var t=e.getName(o);$("#loading").html("Downloading"),$("#remoteFileName").replaceWith('"'+t+'"')},success:function(t){if(e.force_stop=!0,t.error)return s(),$("#error_msgs").html('<div class="alert alert-danger" role="alert"> File Type Not Allowed!</div>'),!1;s(),$("#loading").html("");var o=t.vid;$.post("/actions/getVideoDetails.php",{file_name:file_name,vid:o},function(t){var e=$("#updateVideoInfoForm").clone(),t=($(e).find("input[name=title]").val(t.title),$(e).find("textarea#desc").val(t.description),$(e).find("input[name='category[]']:first").attr("checked","checked"),document.createElement("input"));t.name="videoid",t.type="hidden",t.value=o,$(e).append(t),$("#remoteForm").html(""),$(e).removeClass("hidden").attr("id","uploadFormContainer_remote").appendTo("#remoteForm"),$(e).find("form").on({submit:function(t){t.preventDefault();t=$(this),t=$(t).serialize();t+="&updateVideo=yes",$.ajax({url:"/actions/file_uploader.php",type:"post",data:t,success:function(t){msg=$.parseJSON(t),$("#uploadMessage").removeClass("hidden"),msg.error?$("#uploadMessage").html(msg.error).attr("class","alert alert-danger"):$("#uploadMessage").html(msg.msg).attr("class","alert alert-success"),setTimeout(function(){$("#uploadMessage").addClass("hidden")},5e3)}})}}),$(".formSection h4").on({click:function(t){t.preventDefault(),$(this).find("i").hasClass("glyphicon-chevron-down")?$(this).find("i").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"):$(this).find("i").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"),$(this).next().toggleClass("hidden")}}),$(e).on({submit:function(t){t.preventDefault();t=$(this).serialize();t+="&updateVideo=yes",$.ajax({url:"/actions/file_uploader.php",type:"post",data:t,dataType:"json",success:function(t){$("#uploadMessage").removeClass("hidden"),t.error?$("#uploadMessage").html(t.error).attr("class","alert alert-danger"):$("#uploadMessage").html(t.msg).attr("class","alert alert-success"),setTimeout(function(){$("#uploadMessage").addClass("hidden")},5e3)}}).fail(function(t){console.log(t)})}})},"json")}});$("#remoteUploadBttnStop").click(function(){i.abort(),this.force_stop=!0,$("#loading").html(""),$("#remoteDownloadStatus").hide(),$(this).hide(),$("#remoteUploadBttn").attr("disabled","").show()})},this.remoteUploadStatusUpdate=function(){var e=this;$.ajax({url:e.result_page,type:"post",data:{file_name:file_name},dataType:"json",success:function(t){!1===e.force_stop&&(e.updateProgress(t),setTimeout(function(){e.remoteUploadStatusUpdate()},1e3*e.status_refesh))}})},this.updateProgress=function(t){var e,o;null!=t&&(e=(t.downloaded/1048576).toFixed(2),o=(t.total_size/1048576).toFixed(2),t=t.downloaded/t.total_size*100,$("#downloadStatus").find("#downloaded").text(e+" Mb"),$("#downloadStatus").find("#totalSize").text(o+" Mb"),$("#prog_bar").css("width",t+"%"))},this.status_update=function(){var d=this;$.ajax({url:d.result_page,type:"post",data:{file_name:file_name},dataType:"json",success:function(t){t&&(e=parseFloat(t.total_size),o=parseFloat(t.downloaded),a=parseFloat(t.total_size_fm),s=parseFloat(t.downloaded_fm),l=parseFloat(t.speed_download),parseFloat(t.time_eta),i=parseFloat(t.time_eta_fm),parseFloat(t.time_took),n=parseFloat(t.time_took_fm),t=1<l/1024/1024?Math.round(l/1024/1024)+" Mbps":Math.round(l/1024)+" Kbps",d.perc_download=Math.round(o/e*100),isNaN(s)?($("#remoteDownloadStatus").show(),$("#prog_bar").html("Loading"),$("#dspeed").html("Loading"),$("#eta").html("Loading"),$("#status").html("Loading")):($("#remoteDownloadStatus").show(),$("#prog_bar").html(d.perc_download+"%").animate({width:d.perc_download+"%"},1e3),$("#dspeed").html(t),$("#eta").html(i),$("#status").html(s+" of "+a)));var e,o,a,s,i,n,l=1e3*d.status_refesh;99<d.perc_download&&(d.force_stop=!0),d.force_stop?100==d.perc_download&&1<e&&$("#time_took").html("Time Took : "+n):setTimeout(function(){d.status_update()},l)}})},this.upload_file=function(t,e){$.post("/actions/file_downloader.php",{file_url:t,file_name:e},function(t){t?submit_upload_form():alert("No data")},"text")},this.delete_item=function(t,e,o,a){$("#"+t+"-"+e).click(function(){confirm(o)&&(document.location=a)})},this.delete_video=function(t,e,o,a){return delete_item(t,e,o,a)},this.get_video=function(t,e){$(e).css("display","block"),$(e).html(this.loading),$(e).html(this.loading),$.post(page,{mode:t},function(t){$(e).html(t)},"text")},this.getAjaxPhoto=function(t,e){$(e).css("display","block");var o=$(e).html();$.ajax({url:this.page,type:"POST",dataType:"json",data:{mode:"loadAjaxPhotos",photosType:t},beforeSend:function(){$(e).html(this.loading)},success:function(t){t.failed&&$(e).html(o),t.completed&&$(e).html(t.photoBlocks)}})},this.rating_over=function(t,e){"disabled"!==e&&$("#rating_result_container").html(t)},this.rating_out=function(t,e){"disabled"!==e&&$("#rating_result_container").html(t)},this.submit_share_form=function(t,e){$("#share_form_results").css("display","block").html(this.loading),$.post(page,{mode:"share_object",type:e,users:$("#ShareUsers").val(),message:$("#message").val(),id:$("#objectid").val()},function(t){t?$("#share_form_results").html(t):alert("No data")},"text")},this.flag_object=function(t,e,o){$("#flag_form_result").css("display","block").html(this.loading),$.post(page,{mode:"flag_object",type:o,flag_type:$("#"+t+" select option:selected").val(),id:e},function(t){t?$("#flag_form_result").css("display","block").html(t):alert("No data")},"text")},this.slide_up_watch_video=function(t){"block"!==$(".video_action_result_boxes "+t).css("display")&&$(".video_action_result_boxes > *").slideUp()},this.add_to_fav=function(t,e){$("#video_action_result_cont").css("display","block").html(this.loading),$.post(page,{mode:"add_to_fav",type:t,id:e},function(t){t?$("#video_action_result_cont").css("display","block").html(t):alert("No data")},"text")},this.subscriber=function(t,e,o){$("#"+o).css("display","block").html(this.loading),$.post(page,{mode:e,subscribe_to:t},function(t){t?$("#"+o).css("display","block").html(t):alert("No data")},"text")},this.add_friend=function(t,e){$("#"+e).css("display","block").html(this.loading),$.post(page,{mode:"add_friend",uid:t},function(t){t?$("#"+e).css("display","block").html(t):alert("No data")},"text")},this.block_user=function(t,e){$("#"+e).css("display","block").html(this.loading),$.post(page,{mode:"ban_user",user:t},function(t){t?$("#"+e).css("display","block").html(t):alert("No data")},"text")},this.delete_comment=function(e){$.post(page,{mode:"delete_comment",cid:e},function(t){t?(t.msg&&(alert(t.msg),$("#comment_"+e).fadeOut("slow"),$("#spam_comment_"+e).fadeOut("slow")),t.err&&alert(t.err)):alert("No data")},"json")},this.add_comment_js=function(t,e){$("#add_comment_result").css("display","block").html(this.loading),$("#add_comment_button").attr("disabled","disabled");t=$("#"+t).serialize()+"&mode=add_comment";$.post(page,t,function(t){t?($("#add_comment_button").attr("disabled","").css("display","block"),""!==t.err&&$("#add_comment_result").html(t.err),""!==t.msg&&$("#add_comment_result").html(t.msg),t.cid&&get_the_comment(t.cid,"#latest_comment_container")):alert("No data")},"json")},this.get_the_comment=function(t,e){$(e).html(this.loading),$.post(page,{mode:"get_comment",cid:t},function(t){t?($(e).css("display","none"),$(e).html(t).fadeIn("slow")):alert("No data")},"text")},this.add_playlist=function(t,e,o,a){switch($("#playlist_form_result").css("display","block").html(this.loading),t){case"add":$.post(page,{mode:"add_playlist",id:e,objtype:a,pid:$("#playlist_id option:selected").val()},function(t){t?(""!==t.err&&$("#playlist_form_result").css("display","block").html(t.err),""!==t.msg&&($("#playlist_form_result").css("display","block").html(t.msg),$("#"+o).css("display","none"))):alert("No data")},"json");break;case"new":$.post(page,{mode:"add_new_playlist",id:e,objtype:a,plname:$("#playlist_name").val()},function(t){t?(t.err&&$("#playlist_form_result").css("display","block").html(t.err),t.msg&&($("#playlist_form_result").css("display","block").html(t.msg),$("#"+o).css("display","none"))):alert("No data")},"json")}},this.add_quicklist=function(e,t){var o=this;$(e).attr("src",o.imageurl+"/ajax-loader.gif"),$(e).css("background-position","-200px 200px"),$.post(page,{mode:"quicklist",todo:"add",vid:t},function(t){t?($(e).attr("src",o.imageurl+"/dot.gif"),$(e).css("background-position","-0px -0px"),$(e).removeClass("add_icon"),$(e).addClass("check_icon"),$(e).removeAttr("onClick"),load_quicklist_box()):alert("No data")},"text")},this.remove_quicklist=function(e,t){$.post(page,{mode:"quicklist",todo:"remove",vid:t},function(t){t?($(e).slideUp(),$(e).hide()):alert("No data")},"text")},this.load_quicklist_box=function(){$.post(page,{mode:"getquicklistbox"},function(t){(t=$.trim(t))?($("#quicklist_box").css("display","block").html(t),"hide"!==$.cookie("quick_list_box")&&$("#quicklist_cont").css("display","block")):$("#quicklist_box").css("display","none")},"text")},this.clear_quicklist=function(){$.post(page,{mode:"clear_quicklist"},function(t){load_quicklist_box()},"text")},this.quick_show_hide_toggle=function(t){$(t).slideToggle(),"show"===$.cookie("quick_list_box")?set_cookie_secure("quick_list_box","hide"):set_cookie_secure("quick_list_box","show")},this.ini_cookies=function(){$.cookie("quick_list_box")||set_cookie_secure("quick_list_box","show")},this.get_group_info=function(t,e){"none"===$(t).css("display")&&($("#group_info_cont > div").slideUp(),$("#group_info_cont "+t).slideDown(),$(".group_detail_tabs .selected").removeClass("selected"),$(e).addClass("selected"))},this.show_menu=function(t,e){if(o.location.hash&&e)return e=o.location.hash,show_menu(e.substr(9),!1),!1;o.location.hash="current_"+t,this.current_menu!==t&&hide_menu(),$("#"+t).show(),this.current_menu=t,$("."+t).addClass("selected")},this.hide_menu=function(){if(""!==this.current_menu)return $("#"+this.current_menu).hide(),$("."+this.current_menu).removeClass("selected"),!0},this.to_reply=function(t){$("#reply_to").val(t),o.location="#add_comment"},this.spam_comment=function(e,t,o){$.post(page,{mode:"spam_comment",cid:e,type:t,typeid:o},function(t){t?(t.msg&&($("#comment_"+e).hide(),$("#spam_comment_"+e).fadeIn("slow")),t.err&&alert(t.err)):alert("No data")},"json")},this.swap_auto_play=function(){"true"===$.cookie("auto_play_playlist")?(set_cookie_secure("auto_play_playlist","false"),o.location=document.location,$("#ap_status").html("off")):($.cookie("auto_play_playlist","true",{path:"/"}),o.location=document.location,$("#ap_status").html("on"))},this.collection_actions=function(e,t,o,a,s,i){switch($(a).css("display","block"),$(a).html(this.loading),t){case"add_new_item":$.post(page,{mode:t,cid:$("#"+e+" #collection").val(),obj_id:o,type:s},function(t){t?(t.msg&&$(a).html(t.msg),t.err&&$(a).html(t.err)):alert("No Data returned")},"json");break;case"remove_collection_item":$("#"+e).hide(),$.post(page,{mode:t,obj_id:o,type:s,cid:i},function(t){t?(t.err&&(alert(t.err),$(a+"_"+o).hide(),$("#"+e+o).show()),t.msg&&($(a).html(t.msg),$("#"+e+"_"+o).slideUp(350))):(alert("No Data Returned"),$(a+"_"+o).hide(),$("#"+e).show())},"json")}return!1},this.openURL=function(t){document.locati=t},this.get_item=function(o,t,e,a,s){var i=$(o).html();$(o).html(this.loading),$.post(page,{mode:"get_item",ci_id:t,cid:e,type:a,direction:s},function(t){var e;t?(e=new Array(a,t.cid,t.key),construct_url(e),$("#collectionItemView").html(t.content)):(alert("No "+a+" returned"),$(o).text(i))},"json")},this.construct_url=function(t){t="yes"===Seo?"#!/item/"+t[0]+"/"+t[1]+"/"+t[2]:"#!?item="+t[2]+"&type="+t[0]+"&collection="+t[1];o.location.hash=t},this.onReload_item=function(){var t,e;o.location.hash&&(t=o.location.href,"yes"===Seo?(e=RegExp("/item.+#!")).test(t)&&(t=t.replace(e,""),o.location.href=t):(e=RegExp("\\?item.+#!")).test(t)&&(t=t.replace(e,""),o.location.href=t))},this.pagination=function(e,t,o,a){var s=this,i=$(e),n=(i.id,i.parent()),l=i.html();(n.attr("id")?parent:(n.attr("id","loadMoreParent"),n)).attr("id"),$.ajax({url:s.page,type:"post",dataType:"json",data:{mode:"moreItems",page:a,cid:t,type:o},beforeSend:function(){i.removeAttr("onClick"),i.html(s.loading)},success:function(t){t.error?("BUTTON"===e.tagName&&i.attr("disabled","disabled"),i.removeAttr("onClick"),i.html("No more "+o)):($("#collectionItemsList").append(t.content),$("#NewPagination").html(t.pagination),i.html(l))}})},this.ajax_add_collection=function(t){var e=t.form.id,e=$("#"+e),o=$(t),a=o.html(),s=$("#CollectionResult");$.ajax({url:this.page,type:"post",dataType:"json",data:"mode=add_collection&"+e.serialize(),beforeSend:function(){"block"===s.css("display")&&s.slideUp("fast"),o.attr("disabled","disabled"),o.html(this.loading)},success:function(t){t.msg?($("#CollectionDIV").slideUp("fast"),s.html(t.msg).slideDown("fast"),this.collectionID=t.id):(s.html(t.err).slideDown("fast"),o.removeAttr("disabled"),o.html(a))}})},this.getDetails=function(t){var t=getInputs(t),o=new Array(t.length);return $.each(t,function(t,e){query=$("#"+e.id+" *").serialize(),query+="&mode=ajaxPhotos",o[t]=query}),o},this.getName=function(t){return t.substring(t.lastIndexOf("/")+1)},this.viewRatings=function(t,e){var o=$(t),a=o.html();document.getElementById("RatingStatContainer")?$("#RatingStatContainer").toggle():loadAjax=$.ajax({url:page,type:"post",dataType:"text",data:{mode:"viewPhotoRating",photoid:e},beforeSend:function(){o.html(this.loading)},success:function(t){o.html(a),t?$("<div/>").attr("id","RatingStatContainer").addClass("clearfix").css({padding:"8px",font:"normal 11px Tahoma",border:"1px solid #ccc",backgroundColor:"#FFF"}).html(t).fadeIn(350).insertAfter(o):(o.removeAttr("onclick"),alert("Photo has not recieved any rating yet."))}})},this.showAdvanceSearch=function(t,e,o,a){$("#"+t);t=$("#"+e),e=$("#SearchType").val();t.toggle(),"block"===t.css("display")&&t.children().hide().filter("#"+e).show(),$("."+o).toggleClass(a)},this.toggleCategory=function(t,e){var t=$(t),o=t.attr("alt"),a=$("#"+o),o=o.split("_")[0],s=$.browser.msie,i=$.browser.version;"none"===a.css("display")?(a.slideDown(350),s&&"7.0"===i&&a.addClass("internetExplorer7CategoryToggleFix"),set_cookie_secure(o,"expanded"),t.removeClass("none").addClass("block")):(a.slideUp(350),s&&"7.0"===i&&a.removeClass("internetExplorer7CategoryToggleFix"),set_cookie_secure(o,"collapsed"),t.removeClass("block").addClass("none"))},this.loadObject=function(t,e,o,a){var s=new Array(4),i=(s.this=t,s.type=e,s.objID=o,s.container=a,$(s.this));i.parent().css("position","relative"),$.ajax({url:this.page,type:"POST",dataType:"json",data:{mode:"channelFeatured",contentType:s.type,objID:s.objID},beforeSend:function(){i.find("img").animate({opacity:.5}),$("#"+s.container).animate({opacity:.5})},success:function(t){t.error?(i.find("img").animate({opacity:1}),$("#"+s.container).animate({opacity:1}),alert(t.error)):(i.parent().children(".selected").removeClass("selected"),i.addClass("selected"),i.find("img").animate({opacity:1}),$("#"+s.container).html(t.data).animate({opacity:1}))}})};var l="no";this.getComments=function(t,e,o,a,s,i,n){$("#comments").html("<div style='padding:5px 0;'>"+this.loading+"</div>"),$.ajax({type:"POST",url:this.page,data:{mode:"getComments",page:a,type:t,type_id:e,object_type:i,last_update:o,total_comments:s,comments_voting:l,admin:n},success:function(t){$("#comments").hide().html(t).fadeIn("slow")},dataType:"text"})},this.checkUncheckAll=function(t){for(var e=t.form,o=0,o=0;o<e.length;o++)"checkbox"===e[o].type&&"checkall"!==e[o].name&&(e[o].checked=t.checked)},this.rate=function(t,e,o){$.post("/ajax.php",{mode:"rating",id:t,rating:e,type:o},function(t){t?$("#rating_container").html(t):alert("No data")},"text")},this.setPageHash=function(t){t=t.replace(this.baseurl,"");o.location.hash.replace("#!","");o.location.hash="#!"+t},this.callURLParser=function(){var t=o.location.href.match(/(\#![/a-zA-Z0-9=\.\&\-\_\?]*)/g);t&&t[t.length-1]&&(o.location.href=this.lastVisited.replace("#!",""))},this.getAllComments=function(t,e,o,a,s,i,n){$("#userCommentsList").html("<div style='padding:5px 0;'>"+loading+"</div>"),$.ajax({type:"POST",url:page,data:{mode:"getComments",page:a,type:t,type_id:e,object_type:i,last_update:o,total_comments:s,comments_voting:l,admin:n},success:function(t){$("#userCommentsList").html(t)},dataType:"text"})},this.getCommentsNew=function(t,e,o,a,s,i,n){$.ajax({type:"POST",url:page,data:{mode:"getCommentsNew",page:a,type:t,type_id:e,object_type:i,last_update:o,total_comments:s,comments_voting:l,admin:n},beforeSend:function(){$(document).find("#load-more-comments").text(lang_loading)},success:function(t){"none"===t?$("#load-more-comments").text("End of comments list").attr("disabled","disabled"):($("#userCommentsList").append(t),$(document).find("#load-more-comments").text(lang_load_more))},dataType:"text"})},this.addToFav=function(t,e){$("#messageFav").show(),$.post(page,{mode:"add_to_fav",type:t,id:e},function(t){t?($("#messageFav").html(t),setTimeout(function(){$("#messageFav").hide()},5e3)):alert("No data")},"text")},this.subscribeToChannel=function(t,e,o){$("#messageFav").show(),$.post(page,{mode:e,subscribe_to:t},function(t){t?($("#messageFav").html(t),setTimeout(function(){$("#messageFav").hide()},5e3)):alert("No data")},"text")},this.debounce=function(a,s,i){var n;return function(){var t=this,e=arguments,o=i&&!n;clearTimeout(n),n=setTimeout(function(){n=null,i||a.apply(t,e)},s),o&&a.apply(t,e)}},this.throwHeadMsg=function(t,e,o,a){$(document).find("#headErr").remove(),(o=parseInt(o))<10&&(o=3e3),t.length<3&&(t="info"),$('<div id="headErr" class="alert_messages_holder" style="display:none;"><div class="alert alert-'+t+' alert-messages alert-ajax" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+e+"</div></div>").insertAfter("#header").fadeIn("slow").delay(o).fadeOut()},this.rateNew=function(t,e,o){curObj=this;$.post("/ajax.php",{mode:"rating",id:t,rating:e,type:o},function(t){t?(likesSect=$(".likes").find("span:nth-child(2)").html(),dislikesSect=$(".dislikes").find("span:nth-child(2)").html(),currLikes=parseInt(likesSect),currDislikes=parseInt(dislikesSect),isError=$(t).find("span.error").html(),isOk=$(t).find("span.msg").html(),isError?2<isError.length&&curObj.throwHeadMsg("danger",isError,5e3,!0):isOk&&2<isOk.length&&((5==e?(newRating=currLikes+1,$(".likes")):((newRating=currDislikes+1)<0&&(newRating=0),$(".dislikes"))).addClass("rated").find("span:nth-child(2)").html(newRating),curObj.throwHeadMsg("success",isOk,5e3,!0))):alert("No data")},"text")},this.showMeTheMsg=function(t,e){curObj=this,isOk=(1==e?$(t).filter("div.msg").find("div.alert"):$(t).filter("div.msg")).html(),(isError=$(t).filter("div.error").html())?2<isError.length&&curObj.throwHeadMsg("danger",isError,5e3,!0):isOk&&2<isOk.length&&curObj.throwHeadMsg("success",isOk,5e3,!0)},this.subscribeToChannelNew=function(t,e){curObj=this,$.post(page,{mode:e,subscribe_to:t},function(t){t?curObj.showMeTheMsg(t):alert("No data")},"text")},this.add_friendNew=function(t,e){curObj=this,$("#"+e).css("display","block").html(this.loading),$.post(page,{mode:"add_friend",uid:t},function(t){t?($("#"+e).css("display","none"),curObj.showMeTheMsg(t)):alert("No data")},"text")},this.subscribeToChannelNew=function(t,e){var o=this;$.post(page,{mode:e,subscribe_to:t},function(t){t?o.showMeTheMsg(t):alert("No data")},"text")},this.add_to_favNew=function(t,e){var o=this;$("#video_action_result_cont").css("display","block").html(o.loading),$.post(page,{mode:"add_to_fav",type:t,id:e},function(t){t?($("#video_action_result_cont").hide(),o.showMeTheMsg(t,!0)):alert("No data")},"text")},this.flag_objectNew=function(t,e,o){var a=this;$("#flag_form_result").css("display","block").html(this.loading),$.post(page,{mode:"flag_object",type:o,flag_type:$("#"+t+" select option:selected").val(),id:e},function(t){t?($("#flag_form_result").hide(),a.showMeTheMsg(t)):alert("No data")},"text")},this.uploadSubtitle=function(t,e,o){if(o.length<5)return!1;var a=$("#captions").prop("files")[0],s=new FormData;s.append("subtitle_lang",e),s.append("file",a),s.append("videoid",t),$.ajax({type:"post",cache:!1,contentType:!1,processData:!1,url:o,data:s,beforeSend:function(){},success:function(t){}})},this.addToPlaylist=function(t,e,o){curObj=this,$("#playlist_form_result").html(loading).show(),$.post(page,{mode:"add_playlist",id:t,objtype:o,pid:$("#playlist_id option:selected").val()},function(t){var e;t?(2<t.err.length&&(cleanedHtml=$.parseHTML(t.err),e=$(cleanedHtml).html(),curObj.throwHeadMsg("danger",e,5e3,!0)),2<t.msg.length&&(cleanedHtml=$.parseHTML(t.msg),e=$(cleanedHtml).find("div.alert").html(),curObj.throwHeadMsg("success",e,5e3,!0),$("#addPlaylistCont").toggle())):alert("No data"),$("#playlist_form_result").hide()},"json")},this.createPlaylist=function(t,o,e){curObj=this,$("#playlist_form_result").html(loading).show(),$.post(page,{mode:"add_new_playlist",id:t,objtype:e,plname:$("#playlist_name").val()},function(t){var e;t?(2<t.err.length&&(cleanedHtml=$.parseHTML(t.err),e=$(cleanedHtml).html(),curObj.throwHeadMsg("danger",e,5e3,!0)),t.msg&&(cleanedHtml=$.parseHTML(t.msg),e=$(cleanedHtml).find("div.alert").html(),curObj.throwHeadMsg("success",e,5e3,!0),$("#"+o)[0].reset(),$("#addPlaylistCont").toggle(),$("#add_playlist_form").css("display","block"),$("#new_playlist_form").css("display","none"))):alert("No data"),$("#playlist_form_result").hide()},"json")},this.getModalVideo=function(t){$.ajax({type:"post",url:"/ajax/commonAjax.php",data:{videoid:t,mode:"get_video"},dataType:"json",beforeSend:function(t){$(".my-modal-content").html('<div style="color:#fff;font-size:25px;padding:10px 10px 10px 10px;">'+loadingImg+"</div>")},success:function(t){if(t.success){let s=t.video_details;$(".my-modal-content").attr("id",s.videoid).html(t.video).promise().done(function(){let o=$(".my-modal-content").find("video")[0];document.querySelector(".player-holder video").addEventListener("loadedmetadata",function(t){adaptRatioPlayer();var e=o.play();null!==e&&e.catch(()=>{o.play()})});var e=$(document).find("video");if(0<e.length)for(let t=0;t<e.length;t++){var a=$(e[t]).attr("id").split("_")[3];s.videoid!==a&&$(e[t])[0].pause()}})}else t.failure&&$(".my-modal-content").html('<div class="alert alert-warning">'+t.message+"</div>")}})},this.getPlayerEl=function(t){t=$(document).find(".cb_video_js_"+t+"-dimensions");return!!t&&t[0]},this.unsubscribeToChannel=function(e,t){curObj=this;var o=document.getElementsByClassName("subs_"+e);0<o.length&&Array.prototype.forEach.call(o,function(t){t.disabled=!0}),$.post(page,{mode:t,subscribe_to:e},function(t){t?("err"===(t=JSON.parse(t)).typ?curObj.showMeTheMsg('<div class="error">'+t.msg+"</div>"):curObj.showMeTheMsg('<div class="msg">'+t.msg+"</div>"),t.severity<2?0<o.length&&Array.prototype.forEach.call(o,function(t){t.innerHTML=lang_subscribe,t.setAttribute("onclick","_cb.subscribeToChannelNew("+e+",'subscribe_user');"),t.disabled=!1,curObj.updateSubscribersCount(e)}):Array.prototype.forEach.call(o,function(t){t.disabled=!1})):alert("No data")},"text")},this.subscribeToChannelNew=function(e,t){var o=this,a=document.getElementsByClassName("subs_"+e);0<a.length&&Array.prototype.forEach.call(a,function(t){t.disabled=!0}),$.post(page,{mode:t,subscribe_to:e},function(t){t?("err"===(t=JSON.parse(t)).typ?o.showMeTheMsg('<div class="error">'+t.msg+"</div>"):o.showMeTheMsg('<div class="msg">'+t.msg+"</div>"),t.severity<2?0<a.length&&Array.prototype.forEach.call(a,function(t){t.innerHTML=lang_unsubscribe,t.setAttribute("onclick","_cb.unsubscribeToChannel("+e+",'unsubscribe_user');"),t.disabled=!1,o.updateSubscribersCount(e)}):Array.prototype.forEach.call(a,function(t){t.disabled=!1})):alert("No data")},"text")},this.updateSubscribersCount=function(e){$.post(page,{mode:"get_subscribers_count",userid:e},function(t){t?(subsObj=JSON.parse(t),$("#user_subscribers_"+e).html(subsObj.subscriber_count)):alert("No data")},"text")}},o._cb.setRemoteId()}(window);