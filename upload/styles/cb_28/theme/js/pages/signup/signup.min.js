function removeErrClass(r,a=!1){$(r).closest(".form-group").removeClass("invalid-error").removeClass("warning-ind").addClass("success-ind"),$(r).next("span").remove();let s;s=!0===a?lang_password:$(r).val(),$('<span class="help-block"><strong>'+s+"</strong> seems good to go</span>").insertAfter(r)}$(document).ready(function(){jQuery("#dob").datepicker({showOtherMonths:!0,selectOtherMonths:!1,changeMonth:!0,dateFormat:format_date_js,changeYear:!0,yearRange:"-99:+0",regional:language}),$("input#username").on("keyup",function(){let a=$("#username"),r=a.val().trim(),s=config_username_spaces?/^[A-Za-z0-9_. ]+$/:/^[A-Za-z0-9_.]+$/;0===r.length?addErrClass(a,errors.empty_name,!0,!1):r.length<=config_min_username||r.length>=config_max_username?addErrClass(a,errors.name_length,!0,!1):!config_username_spaces&&0<=a.val().indexOf(" ")?addErrClass(a,errors.username_spaces,!0,!1):a.val().match(s)?$.ajax({url:baseurl+"actions/commonAjax.php",type:"post",dataType:"html",data:{mode:"userExists",username:r},beforeSend:function(){$(document).find("#more-view-channel").text("Loading videos..")},success:function(r){"NO"===(r=$.trim(r))?removeErrClass(a):addErrClass(a,errors.user_exists,!0,!1)}}):addErrClass(a,errors.name_invalid_chars,!0,!1)}),$("input#email").on("keyup change",function(){let a=$("#email"),r=a.val().trim();0===r.length?addErrClass(a,errors.empty_email,!0,!1):isValidEmail(r)?$.ajax({url:baseurl+"actions/commonAjax.php",type:"post",dataType:"html",data:{mode:"check_email",email:r},success:function(r){"OK"===(r=$.trim(r))?removeErrClass(a):"emailExists"===r?addErrClass(a,errors.email_exists,!0,!1):"unauthorized"===r?addErrClass(a,errors.email_unauthorized,!0,!1):addErrClass(a,r,!0,!1)}}):addErrClass(a,errors.invalid_email,!0,!1)}),$("input#password").on("keyup",function(){var r=$("#password"),a=r.val();0===a.length?addErrClass(r,errors.empty_pass,!0,!1):a.length<8?addErrClass(r,errors.weak_pass,!0,!1,"warning-ind"):removeErrClass(r,!0)}),$("input#cpassword").on("keyup",function(){var r=$("#cpassword");r.val()!==$("#password").val()?addErrClass(r,errors.pass_mismatch,!0,!1):removeErrClass(r,!0)}),$("#login_btn").on("click",function(r){r.preventDefault(),$("#login_form").submit()}),$("#signup_submit").on("click",function(r){r.preventDefault(),$(".help-block").remove(),$("div").removeClass("invalid-error");let a=$("#email"),s=a.val().trim(),e=$("#password"),n=e.val(),l=$("#cpassword"),o=l.val(),i=!0,t=$("#username"),d=t.val().trim(),m=config_username_spaces?/^[A-Za-z0-9_. ]+$/:/^[A-Za-z0-9_.]+$/;0===d.length?(addErrClass(t,errors.empty_name,!0,!1),i=!1):d.length<=config_min_username||d.length>=config_max_username?(addErrClass(t,errors.name_length,!0,!1),i=!1):!config_username_spaces&&0<=t.val().indexOf(" ")?(addErrClass(t,errors.username_spaces,!0,!1),i=!1):t.val().match(m)||(addErrClass(t,errors.name_invalid_chars,!0,!1),i=!1),0===s.length?(addErrClass(a,errors.empty_email),i=!1):isValidEmail(s)||(addErrClass(a,errors.invalid_email),i=!1),0===n.length&&(addErrClass(e,errors.empty_pass),i=!1),n!==o&&(addErrClass(l,errors.pass_mismatch),i=!1),!0===i&&$("#signup_form").submit()}),$(".glyphicon-calendar").on("click",function(){$(this).siblings("input.hasDatepicker").focus()})});