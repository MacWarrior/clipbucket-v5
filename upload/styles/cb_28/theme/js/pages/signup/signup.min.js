function removeErrClass(e,a=!1){$(e).closest(".form-group").removeClass("invalid-error").removeClass("warning-ind").addClass("success-ind"),$(e).next("span").remove();let n;n=!0===a?lang_password:$(e).val(),$('<span class="help-block"><strong>'+n+"</strong> seems good to go</span>").insertAfter(e)}$(document).ready(function(){jQuery("#dob").datepicker({showOtherMonths:!0,selectOtherMonths:!1,changeMonth:!0,dateFormat:format_date_js,changeYear:!0,yearRange:"-99:+0",regional:language}),$("input#username").on("keyup",function(){let e=$("#username"),a=e.val().trim(),n=config_username_spaces?/^[A-Za-z0-9_. ]+$/:/^[A-Za-z0-9_.]+$/;0===a.length?addErrClass(e,errors.empty_name,!0,!1):a.length<=config_min_username||a.length>=config_max_username?addErrClass(e,errors.name_length,!0,!1):!config_username_spaces&&e.val().indexOf(" ")>=0?addErrClass(e,errors.username_spaces,!0,!1):e.val().match(n)?$.ajax({url:baseurl+"ajax/commonAjax.php",type:"post",dataType:"html",data:{mode:"userExists",username:a},beforeSend:function(){$(document).find("#more-view-channel").text("Loading videos..")},success:function(a){"NO"===(a=$.trim(a))?removeErrClass(e):addErrClass(e,errors.user_exists,!0,!1)}}):addErrClass(e,errors.name_invalid_chars,!0,!1)}),$("input#email").on("keyup change",function(){let e=$("#email"),a=e.val().trim();0===a.length?addErrClass(e,errors.empty_email,!0,!1):isValidEmail(a)?$.ajax({url:baseurl+"ajax/commonAjax.php",type:"post",dataType:"html",data:{mode:"check_email",email:a},success:function(a){"OK"===(a=$.trim(a))?removeErrClass(e):"emailExists"===a?addErrClass(e,errors.email_exists,!0,!1):"unauthorized"===a?addErrClass(e,errors.email_unauthorized,!0,!1):addErrClass(e,a,!0,!1)}}):addErrClass(e,errors.invalid_email,!0,!1)}),$("input#password").on("keyup",function(){let e=$("#password"),a=e.val();0===a.length?addErrClass(e,errors.empty_pass,!0,!1):a.length<8?addErrClass(e,errors.weak_pass,!0,!1,"warning-ind"):removeErrClass(e,!0)}),$("input#cpassword").on("keyup",function(){let e=$("#cpassword"),a;e.val()!==$("#password").val()?addErrClass(e,errors.pass_mismatch,!0,!1):removeErrClass(e,!0)}),$("#login_btn").on("click",function(e){e.preventDefault(),$("#login_form").submit()}),$("#signup_submit").on("click",function(e){e.preventDefault(),$(".help-block").remove(),$("div").removeClass("invalid-error");let a=$("#email"),n=a.val().trim(),s=$("#password"),t=s.val(),l=$("#cpassword"),i=l.val(),r=!0,o=$("#username"),m=o.val().trim(),p=config_username_spaces?/^[A-Za-z0-9_. ]+$/:/^[A-Za-z0-9_.]+$/;0===m.length?(addErrClass(o,errors.empty_name,!0,!1),r=!1):m.length<=config_min_username||m.length>=config_max_username?(addErrClass(o,errors.name_length,!0,!1),r=!1):!config_username_spaces&&o.val().indexOf(" ")>=0?(addErrClass(o,errors.username_spaces,!0,!1),r=!1):o.val().match(p)||(addErrClass(o,errors.name_invalid_chars,!0,!1),r=!1),0===n.length?(addErrClass(a,errors.empty_email),r=!1):isValidEmail(n)||(addErrClass(a,errors.invalid_email),r=!1),0===t.length&&(addErrClass(s,errors.empty_pass),r=!1),t!==i&&(addErrClass(l,errors.pass_mismatch),r=!1),!0===r&&$("#signup_form").submit()})});
