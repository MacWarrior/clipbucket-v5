function initListenerHome(){$(".cd-popup-trigger:not(.thumb-video)").on("click",function(e){e.preventDefault(),$(".cd-popup").addClass("is-visible")}),$(".cd-popup").on("click",function(e){($(e.target).is(".cd-popup-close")||$(e.target).is(".cd-popup")||$(e.target).is(".my-modal-content"))&&(e.preventDefault(),$(this).removeClass("is-visible"),videojs($(".my-modal-content").find("video")[0]).dispose(),$(".my-modal-content").html(""))})}function progressVideoCheckHome(e,s,i){let n,l,a,t="";switch(s){case"home_collection":t=collection_video_style;break;case"home":t=video_style;break;case"home_featured":t=featured_video_style;break;default:n="no"}"home_collection"===s||"home"===s?(n="modern"===t?".slider-video-container":".item-video",l="data-id",a=$("section.videos,section.default-slider")):"home_featured"===s&&(n="modern"===t?".slide.video-link":".item-video",l="modern"===t?"data-videoid":"data-id",a=$("section.featured-videos")),window[i]&&clearInterval(window[i]),e&&0<e.length&&(window[i]=setInterval(function(){$.post({url:"/actions/progress_video.php",dataType:"json",data:{ids:e,output:s},success:function(e){e.data.videos.forEach(function(e){var i,t=n+"["+l+'="'+e.videoid+'"]';"processing"!=e.status.toLowerCase()||0==(i=$('.processing[data-id="'+e.videoid+'"]')).length?(a.find(t).replaceWith(e.html),"home_featured"==s&&"modern"==featured_video_style&&(slider.updateSlideListeners(),1===slider.slidesContainer.children.length)&&slider.scrollToSlide(0),a.find(t).fadeIn("slow")):i.find("span").html(e.percent+"%")}),e.all_complete&&clearInterval(window[i]),AddingListenerModernThumbVideo(),AddingListenerModernThumbVideoPopinView()}})},6e4))}$(function(){document.querySelectorAll(".default-slider").forEach(function(s){let n=null,i=s.getAttribute("data-ratio")??1,l=s.querySelector(".slider-container-overflow"),a=l.querySelectorAll(".slider-video-container, .item-video");if(0===a.length)return;let r=l.getBoundingClientRect();var e=window.getComputedStyle(a[0]);function t(e){var i=150*e,i=(r=l.getBoundingClientRect()).width/i-.5;let t=Math.floor(i);t<=0&&(t=1),i=Math.floor(r.width/(t+.5)-o-o/t),e=i/e,s.style.setProperty("--width",i+"px"),s.style.setProperty("--height",e+"px"),d=.25*i+o}let o=parseInt(e.getPropertyValue("margin-left").replace("px",""))+parseInt(e.getPropertyValue("margin-right").replace("px","")),d=0,h=(t(i),null),c=(setInterval(function(){var e;l.offsetWidth!==h&&(h=l.offsetWidth,t(i),null!==n&&(e=n.getBoundingClientRect(),l.classList.add("scrolling"),c(),l.scrollLeft+=e.left-r.left-d),l.dispatchEvent(new CustomEvent("scroll")))},400),function(){for(let e=0;e<a.length;e++){var i=a[e];i.classList.remove("disabled"),i.classList.remove("disabled-prev"),i.classList.remove("disabled-next"),i.removeAttribute("title")}}),v=function(){s.querySelector(".prev").dispatchEvent(new CustomEvent("click")),this.removeEventListener("click",v)},m=function(){s.querySelector(".next").dispatchEvent(new CustomEvent("click")),this.removeEventListener("click",m)},u=null;l.addEventListener("scroll",function(e){null!==u&&clearTimeout(u),u=setTimeout(function(){c();for(let e=0;e<a.length;e++){var i=a[e],t=i.getBoundingClientRect();if(t.left<r.left&&t.right>r.left){i.classList.add("disabled"),i.classList.add("disabled-prev"),void 0!==previousLang&&i.setAttribute("title",previousLang),i.addEventListener("click",v);break}}for(let e=a.length-1;0<=e;e--){var s=a[e],n=s.getBoundingClientRect();if(n.left<r.right&&n.right>r.right){s.classList.add("disabled"),s.classList.add("disabled-next"),void 0!==nextLang&&s.setAttribute("title",nextLang),s.addEventListener("click",m);break}}l.classList.remove("scrolling"),clearTimeout(u)},100)}),l.dispatchEvent(new CustomEvent("scroll")),s.querySelector(".slider-container-action .next").addEventListener("click",function(){var i=l.getBoundingClientRect();for(let e=0;e<a.length;e++){var t=a[e],s=t.getBoundingClientRect();if(s.right>i.right){l.classList.add("scrolling"),c(),l.scrollLeft+=s.left-i.left-d,n=t;break}}}),s.querySelector(".slider-container-action .prev").addEventListener("click",function(){var i=l.getBoundingClientRect();for(let e=0;e<a.length;e++){var t=a[e],s=t.getBoundingClientRect();if(s.left+l.scrollLeft-i.left>l.scrollLeft-i.width+d){l.classList.add("scrolling"),c(),l.scrollLeft+=s.left-i.left-d,n=t;break}}})});class i{constructor(e){this.slidesContainerMain=e,this.slidesContainer=this.slidesContainerMain.querySelector(".slides"),this.animationTime=parseInt(this.slidesContainerMain.dataset.animationTime)||300,this.timerAutoNext=parseInt(this.slidesContainerMain.dataset.timerAutoNext)||5e3,this.visibleSlides=parseInt(this.slidesContainerMain.dataset.nbLeft)||1,this.main_height=this.slidesContainerMain.dataset.heightSlider??"300px",this.visibleSlides+2>this.getNumberOfSlides()&&(this.visibleSlides=this.getNumberOfSlides()-2),(isNaN(this.visibleSlides)||this.visibleSlides<0)&&(this.visibleSlides=0),(isNaN(this.animationTime)||this.animationTime<0)&&(this.animationTime=0),this.isAnimating=!1,this.initialize()}initialize(){this.updateSlideListeners(),this.addNavigationButtons(),this.initializeResizeObserver(),this.initializeResizeObserverParent();var e=this.slidesContainer.children.length;0===e?this.slidesContainerMain.style.display="none":1===e?this.scrollToSlide(0):(e=e>=this.visibleSlides?this.visibleSlides:1,this.scrollToSlide(e)),this.slidesContainerMain.style.setProperty("--height-slider-featured",this.main_height),this.slidesContainerMain.style.setProperty("--animation-time",this.animationTime+"ms");let i=this;this.slidesContainerMain.addEventListener("mouseover",function(){clearInterval(i.interval)}),this.slidesContainerMain.addEventListener("mouseleave",function(){i.resetTimer()})}resetTimer(){if(!(this.getNumberOfSlides()<=1)){let e=this;clearInterval(this.interval),this.interval=setInterval(function(){e.nextSlide()},this.timerAutoNext+this.animationTime)}}getComputedCSSVariable(e){var i=document.createElement("div"),e=(i.style.position="absolute",i.style.visibility="hidden",i.style.width="var("+e+")",this.slidesContainerMain.appendChild(i),getComputedStyle(i).width);return this.slidesContainerMain.removeChild(i),parseFloat(e)}getNumberOfSlides(){return this.slidesContainer.children.length}canDivGrowWidth(e,i){return i<e.parentElement.offsetWidth}initializeResizeObserver(){new ResizeObserver(e=>{var i,t=this.getComputedCSSVariable("--width-poster-base"),s=this.getComputedCSSVariable("--width-thumb"),n=this.getComputedCSSVariable("--width-collapsed"),l=t+s+(1+this.visibleSlides)*n;for(i of e){i.contentRect.width<=l&&this.getNumberOfSlides()>=2+parseInt(this.visibleSlides)&&!1===this.canDivGrowWidth(this.slidesContainerMain,l)?this.slidesContainerMain.classList.add("without_poster"):this.slidesContainerMain.classList.remove("without_poster");var a,r=this.slidesContainerMain.getBoundingClientRect();if(this.slidesContainer.getBoundingClientRect().width>r.width&&!1===this.isAnimating)return void(void 0!==Array.from(this.slidesContainer.children)[this.visibleSlides]&&(a=(r=Array.from(this.slidesContainer.children)).findIndex(e=>e.classList.contains("active")),this.clearActiveSlide(),r[this.visibleSlides].classList.add("active"),this.scrollToSlide(a)))}}).observe(this.slidesContainerMain)}initializeResizeObserverParent(){new ResizeObserver(e=>{var i,t=this.getComputedCSSVariable("--width-poster-base"),s=this.getComputedCSSVariable("--width-thumb"),n=this.getComputedCSSVariable("--width-collapsed"),l=t+s+(1+this.visibleSlides)*n;for(i of e)i.contentRect.width<=l&&this.getNumberOfSlides()>=2+parseInt(this.visibleSlides)&&!1===this.canDivGrowWidth(this.slidesContainerMain,l)?this.slidesContainerMain.classList.add("without_poster"):this.slidesContainerMain.classList.remove("without_poster")}).observe(this.slidesContainerMain.parentElement)}getCurrentSlideActive(){var e=Array.from(this.slidesContainer.children),i=e.find(e=>e.classList.contains("active"));return i?e.indexOf(i):0}nextSlide(){var e=this.slidesContainer.children.length,e=(this.getCurrentSlideActive()+1)%e;this.scrollToSlide(e)}prevSlide(){var e=this.slidesContainer.children.length,e=(this.getCurrentSlideActive()-1+e)%e;this.scrollToSlide(e)}addNavigationButtons(){var e=this.slidesContainerMain.querySelector(".next-btn"),i=this.slidesContainerMain.querySelector(".prev-btn");e&&(e.onclick=()=>{this.nextSlide()}),i&&(i.onclick=()=>{this.prevSlide()})}moveXSlideToEnd(e,t,s){if(0===s&&(this.clearActiveSlide(),e[t].classList.add("active")),t===s+this.visibleSlides)this.isAnimating=!1;else try{const n=e[s];n.classList.remove("active"),this.slidesContainer.appendChild(n.cloneNode(!0)),n.classList.add("removeAnimation");let i=this.animationTime/this.visibleSlides;if(0<s){let e=t-3;e<=0&&(e=3),(i/=e)<=75&&(i=75)}i===1/0&&(i=250),this.slidesContainerMain.style.setProperty("--animation-time",i+"ms"),n.style.transition="width "+i+"ms linear",setTimeout(()=>{n.remove(),n.style.transition="",this.updateSlideListeners(),this.moveXSlideToEnd(e,t,s+1)},i)}catch(e){throw this.isAnimating=!1,e}}moveXSlideToStart(e,i,t){if(t===this.slidesContainer.children.length-1&&(this.clearActiveSlide(),e[i].classList.add("active")),t===this.slidesContainer.children.length-1-(this.visibleSlides-i))this.isAnimating=!1;else try{const n=e[t];this.slidesContainer.insertBefore(n,this.slidesContainer.firstElementChild);var s=this.animationTime/this.visibleSlides;n.style.transition="width "+s+"ms linear",n.classList.add("animate-slide-in"),this.slidesContainerMain.style.setProperty("--animation-time",s+"ms"),setTimeout(()=>{n.classList.remove("animate-slide-in"),n.style.transition="",this.updateSlideListeners(),this.moveXSlideToStart(e,i,t-1)},s)}catch(e){throw this.isAnimating=!1,e}}scrollToSlide(e){var i,t,s;this.isAnimating||(this.isAnimating=!0,this.resetTimer(),t=(i=Array.from(this.slidesContainer.children)).findIndex(e=>e.classList.contains("active")),s=this.slidesContainerMain.getBoundingClientRect(),this.slidesContainer.getBoundingClientRect().width<=s.width?(this.slidesContainerMain.style.setProperty("--animation-time",this.animationTime+"ms"),this.clearActiveSlide(),i[e].classList.add("active"),this.isAnimating=!1):t<e?this.moveXSlideToEnd(i,e,0):e<t?this.moveXSlideToStart(i,e,this.slidesContainer.children.length-1):this.isAnimating=!1)}clearActiveSlide(){this.slidesContainer.querySelectorAll(".slide.active").forEach(e=>e.classList.remove("active"))}updateSlideListeners(){let n=this;Array.from(this.slidesContainer.children).forEach((t,s)=>{t.onclick=function(e){var i;t.classList.contains("active")?t.classList.contains("cd-popup-trigger-slider")?($(".cd-popup").addClass("is-visible"),i=this.getAttribute("data-videoid"),_cb.getModalVideo(i)):document.location.href=t.getAttribute("data-href"):n.scrollToSlide(s)}})}}document.querySelectorAll(".slider-container-featured").forEach(function(e){slider=new i(e)}),initListenerHome()});