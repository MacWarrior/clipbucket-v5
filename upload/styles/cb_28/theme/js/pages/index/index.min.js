$(function(){document.querySelectorAll(".default-slider").forEach(function(i){let e=null,t=i.getAttribute("data-ratio")??1,s=i.querySelector(".slider-container-overflow"),n=s.querySelectorAll(".slider-video-container, .item-video");if(0===n.length)return;let l=s.getBoundingClientRect(),r=window.getComputedStyle(n[0]),a=parseInt(r.getPropertyValue("margin-left").replace("px",""))+parseInt(r.getPropertyValue("margin-right").replace("px","")),d=0,o=function(e){let t=Math.floor((l=s.getBoundingClientRect()).width/(150*e)-.5);t<=0&&(t=1);let n=Math.floor(l.width/(t+.5)-a-a/t);i.style.setProperty("--width",n+"px"),i.style.setProperty("--height",n/e+"px"),d=.25*n+a};o(t);let h=null;setInterval(function(){if(s.offsetWidth!==h){if(h=s.offsetWidth,o(t),null!==e){let i=e.getBoundingClientRect();s.classList.add("scrolling"),c(),s.scrollLeft+=i.left-l.left-d}s.dispatchEvent(new CustomEvent("scroll"))}},400);let c=function(){for(let i=0;i<n.length;i++){let e=n[i];e.classList.remove("disabled"),e.classList.remove("disabled-prev"),e.classList.remove("disabled-next"),e.removeAttribute("title")}},u=function(){i.querySelector(".prev").dispatchEvent(new CustomEvent("click")),this.removeEventListener("click",u)},v=function(){i.querySelector(".next").dispatchEvent(new CustomEvent("click")),this.removeEventListener("click",v)},m=function(){for(let i=0;i<n.length;i++){let e=n[i],t=e.getBoundingClientRect();if(t.left<l.left&&t.right>l.left){e.classList.add("disabled"),e.classList.add("disabled-prev"),void 0!==previousLang&&e.setAttribute("title",previousLang),e.addEventListener("click",u);break}}for(let s=n.length-1;s>=0;s--){let r=n[s],a=r.getBoundingClientRect();if(a.left<l.right&&a.right>l.right){r.classList.add("disabled"),r.classList.add("disabled-next"),void 0!==nextLang&&r.setAttribute("title",nextLang),r.addEventListener("click",v);break}}},f=null;s.addEventListener("scroll",function(i){null!==f&&clearTimeout(f),f=setTimeout(function(){c(),m(),s.classList.remove("scrolling"),clearTimeout(f)},100)}),s.dispatchEvent(new CustomEvent("scroll")),i.querySelector(".slider-container-action .next").addEventListener("click",function(){let i=s.getBoundingClientRect();for(let t=0;t<n.length;t++){let l=n[t],r=l.getBoundingClientRect();if(r.right>i.right){s.classList.add("scrolling"),c(),s.scrollLeft+=r.left-i.left-d,e=l;break}}}),i.querySelector(".slider-container-action .prev").addEventListener("click",function(){let i=s.getBoundingClientRect();for(let t=0;t<n.length;t++){let l=n[t],r=l.getBoundingClientRect();if(r.left+s.scrollLeft-i.left>s.scrollLeft-i.width+d){s.classList.add("scrolling"),c(),s.scrollLeft+=r.left-i.left-d,e=l;break}}})});class i{constructor(i){this.slidesContainerMain=i,this.slidesContainer=this.slidesContainerMain.querySelector(".slides"),this.animationTime=parseInt(this.slidesContainerMain.dataset.animationTime)||300,this.timerAutoNext=parseInt(this.slidesContainerMain.dataset.timerAutoNext)||5e3,this.visibleSlides=parseInt(this.slidesContainerMain.dataset.nbLeft)||1,this.main_height=this.slidesContainerMain.dataset.heightSlider??"300px",this.visibleSlides+2>this.getNumberOfSlides()&&(this.visibleSlides=this.getNumberOfSlides()-2),(isNaN(this.visibleSlides)||this.visibleSlides<0)&&(this.visibleSlides=0),(isNaN(this.animationTime)||this.animationTime<0)&&(this.animationTime=0),this.isAnimating=!1,this.initialize()}initialize(){this.updateSlideListeners(),this.addNavigationButtons(),this.initializeResizeObserver(),this.initializeResizeObserverParent();let i=this.slidesContainer.children.length;if(0===i)this.slidesContainerMain.style.display="none";else if(1===i)this.scrollToSlide(0);else{let e=i>=this.visibleSlides?this.visibleSlides:1;this.scrollToSlide(e)}this.slidesContainerMain.style.setProperty("--height-slider-featured",this.main_height),this.slidesContainerMain.style.setProperty("--animation-time",this.animationTime+"ms");let t=this;this.slidesContainerMain.addEventListener("mouseover",function(){clearInterval(t.interval)}),this.slidesContainerMain.addEventListener("mouseleave",function(){t.resetTimer()})}resetTimer(){if(1>=this.getNumberOfSlides())return;let i=this;clearInterval(this.interval),this.interval=setInterval(function(){i.nextSlide()},this.timerAutoNext+this.animationTime)}getComputedCSSVariable(i){let e=document.createElement("div");e.style.position="absolute",e.style.visibility="hidden",e.style.width="var("+i+")",this.slidesContainerMain.appendChild(e);let t=getComputedStyle(e).width;return this.slidesContainerMain.removeChild(e),parseFloat(t)}getNumberOfSlides(){return this.slidesContainer.children.length}canDivGrowWidth(i,e){let t=i.parentElement,s=t.offsetWidth;return e<s}initializeResizeObserver(){let i=new ResizeObserver(i=>{let e=this.getComputedCSSVariable("--width-poster-base"),t=this.getComputedCSSVariable("--width-thumb"),s=this.getComputedCSSVariable("--width-collapsed"),n=e+t+(1+this.visibleSlides)*s;for(let l of i){let r=l.contentRect.width;r<=n&&this.getNumberOfSlides()>=2+parseInt(this.visibleSlides)&&!1===this.canDivGrowWidth(this.slidesContainerMain,n)?this.slidesContainerMain.classList.add("without_poster"):this.slidesContainerMain.classList.remove("without_poster");let a=this.slidesContainerMain.getBoundingClientRect(),d=this.slidesContainer.getBoundingClientRect();if(d.width>a.width&&!1===this.isAnimating){let o=Array.from(this.slidesContainer.children);if(void 0!==o[this.visibleSlides]){let h=Array.from(this.slidesContainer.children),c=h.findIndex(i=>i.classList.contains("active"));this.clearActiveSlide(),h[this.visibleSlides].classList.add("active"),this.scrollToSlide(c)}return}}});i.observe(this.slidesContainerMain)}initializeResizeObserverParent(){let i=new ResizeObserver(i=>{let e=this.getComputedCSSVariable("--width-poster-base"),t=this.getComputedCSSVariable("--width-thumb"),s=this.getComputedCSSVariable("--width-collapsed"),n=e+t+(1+this.visibleSlides)*s;for(let l of i){let r=l.contentRect.width;r<=n&&this.getNumberOfSlides()>=2+parseInt(this.visibleSlides)&&!1===this.canDivGrowWidth(this.slidesContainerMain,n)?this.slidesContainerMain.classList.add("without_poster"):this.slidesContainerMain.classList.remove("without_poster")}});i.observe(this.slidesContainerMain.parentElement)}getCurrentSlideActive(){let i=Array.from(this.slidesContainer.children),e=i.find(i=>i.classList.contains("active"));return e?i.indexOf(e):0}nextSlide(){let i=this.slidesContainer.children.length,e=(this.getCurrentSlideActive()+1)%i;this.scrollToSlide(e)}prevSlide(){let i=this.slidesContainer.children.length,e=(this.getCurrentSlideActive()-1+i)%i;this.scrollToSlide(e)}addNavigationButtons(){let i=this.slidesContainerMain.querySelector(".next-btn"),e=this.slidesContainerMain.querySelector(".prev-btn");i&&i.addEventListener("click",()=>this.nextSlide()),e&&e.addEventListener("click",()=>this.prevSlide())}moveXSlideToEnd(i,e,t){if(0===t&&(this.clearActiveSlide(),i[e].classList.add("active")),e===t+this.visibleSlides){this.isAnimating=!1;return}try{let s=i[t];s.classList.remove("active"),this.slidesContainer.appendChild(s.cloneNode(!0)),s.classList.add("removeAnimation");let n=this.animationTime/this.visibleSlides;if(t>0){let l=e-3;l<=0&&(l=3),(n/=l)<=75&&(n=75)}n===1/0&&(n=250),this.slidesContainerMain.style.setProperty("--animation-time",n+"ms"),s.style.transition="width "+n+"ms linear",setTimeout(()=>{s.remove(),s.style.transition="",this.updateSlideListeners(),this.moveXSlideToEnd(i,e,t+1)},n)}catch(r){throw this.isAnimating=!1,r}}moveXSlideToStart(i,e,t){if(t===this.slidesContainer.children.length-1&&(this.clearActiveSlide(),i[e].classList.add("active")),t===this.slidesContainer.children.length-1-(this.visibleSlides-e)){this.isAnimating=!1;return}try{let s=i[t];this.slidesContainer.insertBefore(s,this.slidesContainer.firstElementChild);let n=this.animationTime/this.visibleSlides;s.style.transition="width "+n+"ms linear",s.classList.add("animate-slide-in"),this.slidesContainerMain.style.setProperty("--animation-time",n+"ms"),setTimeout(()=>{s.classList.remove("animate-slide-in"),s.style.transition="",this.updateSlideListeners(),this.moveXSlideToStart(i,e,t-1)},n)}catch(l){throw this.isAnimating=!1,l}}scrollToSlide(i){if(this.isAnimating)return;this.isAnimating=!0,this.resetTimer();let e=Array.from(this.slidesContainer.children),t=e.findIndex(i=>i.classList.contains("active")),s=this.slidesContainerMain.getBoundingClientRect(),n=this.slidesContainer.getBoundingClientRect();if(n.width<=s.width){this.slidesContainerMain.style.setProperty("--animation-time",this.animationTime+"ms"),this.clearActiveSlide(),e[i].classList.add("active"),this.isAnimating=!1;return}i>t?this.moveXSlideToEnd(e,i,0):i<t?this.moveXSlideToStart(e,i,this.slidesContainer.children.length-1):this.isAnimating=!1}clearActiveSlide(){this.slidesContainer.querySelectorAll(".slide.active").forEach(i=>i.classList.remove("active"))}updateSlideListeners(){let i=this,e=Array.from(this.slidesContainer.children);e.forEach((e,t)=>{e.onclick=function(s){if(e.classList.contains("active")){if(e.classList.contains("cd-popup-trigger-slider")){$(".cd-popup").addClass("is-visible");let n=this.getAttribute("data-videoid");_cb.getModalVideo(n)}else document.location.href=e.getAttribute("data-href");return}i.scrollToSlide(t)}})}}document.querySelectorAll(".slider-container-featured").forEach(function(e){new i(e)})});
