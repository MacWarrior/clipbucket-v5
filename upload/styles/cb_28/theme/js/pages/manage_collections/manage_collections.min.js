document.addEventListener("DOMContentLoaded",function(){init_tags("collection_tags",available_tags),document.querySelectorAll(".formSection h4").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var e=this.querySelector("i"),t=this.nextElementSibling;e.classList.contains("glyphicon-chevron-down")?(e.classList.remove("glyphicon-chevron-down"),e.classList.add("glyphicon-chevron-up")):(e.classList.remove("glyphicon-chevron-up"),e.classList.add("glyphicon-chevron-down")),t.classList.toggle("hidden")})});var e=document.querySelector("select#type");e&&e.addEventListener("change",function(){showSpinner();var e=this.value,t=document.querySelector("#collection_id").value;fetch(baseurl+"actions/get_collection_update.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({type:e,id:t})}).then(e=>e.json()).then(e=>{var t;if(e.msg&&(t=document.querySelector(".page-content"))&&t.insertAdjacentHTML("afterbegin",e.msg),e.sort_types&&0<Object.keys(e.sort_types).length){var n=document.querySelector("#sort_type");n.innerHTML="";for(const c in e.sort_types){var o=document.createElement("option");o.value=c,o.textContent=e.sort_types[c],n.appendChild(o)}}e.parents&&(document.querySelector("#collection_id_parent").innerHTML=e.parents)}).catch(e=>console.error(e)).finally(hideSpinner)}),$("#collection_id_parent").select2({width:"100%"})});