$(document).ready(function(){if(visual_editor_comments_enabled)var e=new toastui.Editor({el:document.querySelector("#comment_box_visual_editor"),initialEditType:"wysiwyg",previewStyle:"vertical",height:"200px",usageStatistics:!1,toolbarItems:[["bold","italic","strike"],["ul","ol","task","indent","outdent"],["table","link"]],language:"fr",placeholder:visual_editor_comments_placeholder,theme:default_theme});function t(e){$("#add_comment_result").css("display","block"),$("#add_comment_button").val(lang_loading),$("#add_comment_button").attr("disabled",!0),$(".add-reply").attr("disabled",!0);var t=$("#"+e).serialize()+"&mode=add_comment";$.post(page,t,function(e){if(e){if($("#add_comment_result").css("display","block"),""!=e.err&&null!=e.err&&($("#comment_err_output").fadeIn(),$("#comment_err_output").html(e.err),setTimeout(function(){$("#comment_err_output").fadeOut()},1e4),"Mailer Error"!=e.err.substring(0,12)&&clear_comment_form()),""!=e.msg&&$("#comment_box").val(""),e.cid){$(".no-comments").remove(),t=e.cid,o=e.type_id,$.post(page,{mode:"get_comment",cid:t,type_id:o},function(e){e?e.parent_id?($(".reply-box-"+e.parent_id).hide(),$(".comments-reply-"+e.parent_id).append(e.li_data).slideDown(),$("html, body").animate({scrollTop:$("#reply-"+t).offset().top},1e3),comment_transition(".reply-",t)):$(e.li_data).hide().prependTo("#comments-ul").slideDown("slow"):alert("No data"),clear_comment_form()},"json");var t,o,n=parseInt($("#comment_count").html());$("#comment_count").html((n+1).toString())}}else alert("No data")},"json")}$("#add_comment_button").on("click",function(){visual_editor_comments_enabled&&$("#comment_box").val(e.getMarkdown()),t("comment_form")}),$("#comment_box").keypress(function(e){13!=e.keyCode||e.shiftKey||(e.preventDefault(),t("comment_form"))})});
