var alert_shown=!1,skipBeforeTagAdded=!1,alert_user_tested="";function init_tags_to(e,a,t){void 0===t&&(t="#list_tags"),$(t).tagit({singleField:!0,fieldName:"tags",readOnly:!1,singleFieldNode:$("#"+e),animate:!0,caseSensitive:!1,availableTags:a,allowSpaces:allow_tag_space,beforeTagAdded:function(e,a){if(a.tagLabel.length<=2)alert_shown||(alert_shown=!0,alert(tag_too_short));else{if(alert_shown=!1,skipBeforeTagAdded)return!0;showSpinner(),addUsernameTag(a.tagLabel)}return!1}})}async function addUsernameTag(e){var a=new URLSearchParams;a.append("username",e);a=await(await fetch("actions/user_check.php",{method:"POST",headers:{Accept:"application/json"},body:a})).json();hideSpinner(),a.success||""!==alert_user_tested&&alert_user_tested===e?a.success&&(skipBeforeTagAdded=!(alert_user_tested=""),$("#list_tags").tagit("createTag",e),skipBeforeTagAdded=!1):(alert_user_tested=e,document.querySelector(".manage-page").insertAdjacentHTML("afterbegin",a.msg),skipBeforeTagAdded=!1)}document.addEventListener("DOMContentLoaded",function(){init_tags_to("to")});