var alert_shown=!1;function init_tags_to(e,a,n){void 0===n&&(n="#list_tags"),$(n).tagit({singleField:!0,fieldName:"tags",readOnly:!1,singleFieldNode:$("#"+e),animate:!0,caseSensitive:!1,availableTags:a,allowSpaces:allow_tag_space,beforeTagAdded:function(e,a){if(a.tagLabel.length<=2)return alert_shown||(alert_shown=!0,alert(tag_too_short)),!1;alert_shown=!1},afterTagAdded:function(e,a){var n=new URLSearchParams;a.tagLabel;n.append("username",a.tagLabel),putSpinnerOnTag(a.tag),fetch("actions/user_check.php",{method:"POST",headers:{Accept:"application/json"},body:n}).then(e=>e.json()).then(e=>{e.success?e.success&&(a.tag.addClass("success-important"),a.tag.find("span.tagit-label").append('<i class="fa fa-check"  aria-hidden="true"></i>'),a.tag.find("a").show(),a.tag.prop("title",lang.checked_user)):(document.querySelector(".manage-page").insertAdjacentHTML("afterbegin",e.msg),a.tag.addClass("danger-important"),a.tag.find("span.tagit-label").append('<i class="fa fa-warning" aria-hidden="true"></i>'),a.tag.prop("title",e.text_msg),setTimeout(function(){a.tag.fadeOut(500,function(){a.tag.find("a").trigger("click")})},5e3)),removeSpinnerOnTag(a.tag)})}})}function putSpinnerOnTag(e){e.append('<p class="spinner" style="position: absolute;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n  z-index: 2;"><i class="fa fa-spinner fa-spin"></i></p>'),e.find("span").css("filter","blur(0.8px)"),e.find("a").hide(),e.prop("title",lang.running_verification)}function removeSpinnerOnTag(e){e.find("p").remove(),e.find("span").css("filter","blur(0px)")}document.addEventListener("DOMContentLoaded",function(){init_tags_to("to"),document.querySelectorAll(".manage-page").forEach(e=>{new MutationObserver(e=>{for(const a of e)a.addedNodes.forEach(e=>{1===e.nodeType&&e.classList.contains("alert")&&$(e).fadeOut(5e3,function(){$(this).remove()})})}).observe(e,{childList:!0,subtree:!0})})});