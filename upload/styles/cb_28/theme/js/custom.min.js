function headerFooter(){let e=0;var t,o,n=$("#container").height()-((t=$("#header").outerHeight())+(o=$("#footer").outerHeight())+(e=0<$("#cookie-banner").length?$("#cookie-banner").is(":visible")?$("#cookie-banner").outerHeight():0:e));$("#container").css("padding-top",t+"px"),$("#container").css("padding-bottom",o+e+"px"),$(".account-container, .page-error").css("height",n+"px")}function shortKeys(){$(document).keypress(function(e){var t=e.which;$("#query,textarea,#name,#email").is(":focus")||("index"==pageNow?(70===t&&e.shiftKey&&$("#featured_load_more").trigger("click"),82===t&&e.shiftKey&&$("#recent_load_more").trigger("click")):"watch_video"==pageNow&&(70===t&&e.shiftKey&&($(".icon-plusrounded").trigger("click"),$("#addfav").trigger("click")),82===t&&e.shiftKey&&$(".icon-flag").trigger("click"),84===t&&e.shiftKey&&$("#comment_box").focus().select(),69===t)&&e.shiftKey&&$(".icon-share").trigger("click"),83===t&&e.shiftKey&&$("#query").focus().select(),86===t&&e.shiftKey&&(window.location.href=baseurl+"videos"),80===t&&e.shiftKey&&(window.location.href=baseurl+"photos"),67===t&&e.shiftKey&&(window.location.href=baseurl+"collections"),85===t&&e.shiftKey&&(window.location.href=baseurl+"channels"))})}var flag=0;function responsiveFixes(){var e=$(window).width(),t=$("#header .menu-holder .user_menu").html(),o=$("#header .navbar-header"),n=$("#header .menu-holder");(e<992?(0==o.find(".user_menu").length&&$(o).append('<div class="col btn-holder user_menu text-right logged-out">'+t+"</div>"),$(".menu-holder")):(t=o.find(".user_menu").html(),0==n.find(".user_menu").length&&n.append('<div class="col btn-holder user_menu text-right logged-out">'+t+"</div>"),o)).find(".user_menu").remove(),e<1280?($(".btn-newacc .big").hide(),$(".btn-newacc .little").show()):($(".btn-newacc .big").show(),$(".btn-newacc .little").hide()),userid?($(".user_menu").addClass("logged-in"),$(".user_menu").removeClass("logged-out")):($(".user_menu").removeClass("logged-in"),$(".user_menu").addClass("logged-out")),e<768?0==$(".menu-holder").find(".newuser-links").length&&(n=$(".navbar-right").html(),$(".menu-holder").prepend("<div class='col'><nav class='main-links'><ul class='newuser-links'>"+n+"</ul></nav></div>"),$(".navbar-right").remove()):0==$(".user_menu").find(".right-menu").length&&(t=$(".newuser-links").html(),$(".user_menu").append("<ul class='nav navbar-nav navbar-right right-menu'>"+t+"</ul>"),$(".newuser-links").remove()),0==$(".menu-holder").find(".main-links>ul:not(.newuser-links)>li").length?$("i.icon-search").parent().removeClass("visible-xs").hide():$("i.icon-search").parent().addClass("visible-xs").show()}function thakkiLoading(e){$("html, body").stop(),$("html, body").animate({scrollTop:e},1900,"swing")}function preLoadingBlock(){var e=.625*$(".featured-videos .thumb-video").width();$(".featured-videos .thumb-video").css("height",e+"px");e=.625*$(".videos .thumb-video").width();$(".videos .thumb-video").css("height",e+"px")}function loginHeight(){var e=$("#login_form").outerHeight();e-=40,$(".account-holder .side-box").css("height",e+"px")}function adaptRatioPlayer(){var e,t,o=document.querySelector(".player-holder");null===o||null===(t=document.querySelector(".player-holder video"))||(e=o.querySelector(".cb_player"))&&e.style.aspectRatio&&""!==e.style.aspectRatio||(e=window.innerWidth/window.innerHeight,t=t.videoWidth/t.videoHeight,(o.style.aspectRatio=t)<e?o.classList.add("fix_ratio"):o.classList.remove("fix_ratio"))}let listenerModernThumbVideo=function(e){"IMG"===e.target.tagName&&(document.location.href=this.getAttribute("data-href"))},AddingListenerModernThumbVideo=function(){document.querySelectorAll(".thumb-video:not(.cd-popup-trigger)").forEach(function(e){e.removeEventListener("click",listenerModernThumbVideo),e.addEventListener("click",listenerModernThumbVideo)})},listenerModernThumbVideoPopinView=function(e){"IMG"===e.target.tagName&&($(".cd-popup").addClass("is-visible"),e=this.getAttribute("data-videoid"),_cb.getModalVideo(e))},AddingListenerModernThumbVideoPopinView=function(){document.querySelectorAll(".thumb-video.cd-popup-trigger").forEach(function(e){e.removeEventListener("click",listenerModernThumbVideoPopinView),e.addEventListener("click",listenerModernThumbVideoPopinView)})};function homePageVideos(e){$("#container").on("click","#recent_load_more, #featured_load_more",function(){var t,o,e,n,i=baseurl+"actions/home.php",a=$(this),r=$(a).attr("loadtype"),d=$(a).attr("loadmode"),c=($(a).attr("loadlimit"),""),s=$("#featured_vid_sec .item-video, #featured_vid_sec .slider-video-container").length,l=$("#recent_vids_sec .item-video, #recent_vids_sec .slider-video-container").length,u=$("#container").find(".total_videos_featured").first().text(),m=$("#container").find(".total_videos_recent").first().text();first_launch=!0,first_launch=""!=u||""!=m?(""==u&&(u=0),""==m&&(m=0),t=parseInt(u)-parseInt(s),o=parseInt(m)-parseInt(l),!1):(t=2,o=3,!0),c=2<t?2:t,recentFound=3<o?3:o,n="featured"==d?(e=s,c):(e=l,recentFound),$.ajax({url:i,type:"post",dataType:"json",data:{load_type:r,load_mode:d,current_displayed:e,wanted:n,first_launch:first_launch},beforeSend:function(){if($(a).attr("disabled","disabled"),$(a).text("Loading..."),"count"!=r)if("featured"==d){for(var e=0;e<c;e++)$(document).find("#featured_pre").append('<div class="item-video col-lg-6 col-md-6 col-sm-6 col-xs-12"><div style="height:200px;" class="thumb-video background-masker clearfix"></div></div>');var t=$(window).width();!first_launch&&767<t&&thakkiLoading($(".featAppending").last().offset().top)}else{for(e=0;e<recentFound;e++)$(document).find("#recent_pre").append('<div class="item-video col-lg-4 col-md-4 col-sm-4 col-xs-6"><div class="thumb-video background-masker clearfix"></div><div class="loadingInfo video-info relative clearfix"><div class="background-masker heading clearfix"></div><div class="background-masker paragraph clearfix"></div><div class="background-masker clearfix views-date"></div></div></div>');preLoadingBlock();t=$(window).width();!first_launch&&767<t&&thakkiLoading($("#recent_pre").last().offset().top)}},success:function(e){return e.notice?(first_launch?($(a).remove(),"featured"==d?($("#featured_load_more").hide(),$("#featured_pre").hide(),$("#featured_vid_sec").html('<span class="well well-info btn-block">'+langCo+"</span>")):"recent"==d&&($("#recent_load_more").remove(),$("#recent_pre").remove(),$("#recent_vids_sec").html('<span class="well well-info btn-block">'+noRecent+"</span>"))):_cb.throwHeadMsg("warning",e.notice,3e3,!0),!0):e.error?(_cb.throwHeadMsg("error",e.error,3e3,!0),!0):($(a).removeAttr("disabled"),$(a).text(loadMoreLang),"video"==r&&("recent"==d?($("#recent_load_more").remove(),$("#recent_pre").html(""),$(e.html).appendTo("#recent_vids_sec").fadeIn("slow"),l=$("#recent_vids_sec .item-video, #recent_vids_sec .slider-video-container").length,m=$("#container").find(".total_videos_recent").first().text(),0<(o=parseInt(m)-parseInt(l))&&$(document).find("#recent-loadmore").append('<div class="clearfix text-center"><button id="recent_load_more" class="btn btn-loadmore" loadtype="video" loadmode="recent" title="'+loadMoreLang+'">'+loadMoreLang+"</button></div>"),ids_to_check_progress_recent=[...new Set([...ids_to_check_progress_recent,...e.ids_to_check])],progressVideoCheckHome(ids_to_check_progress_recent,"home","intervalId_recent")):($("#featured_load_more").remove(),$("#featured_pre").html(""),$(e.html).appendTo("#featured_vid_sec").fadeIn("slow"),s=$("#featured_vid_sec .item-video, #featured_vid_sec .slider-video-container").length,u=$("#container").find(".total_videos_featured").first().text(),0<(t=parseInt(u)-parseInt(s))&&$(document).find("#featured-loadmore").append('<div class="clearfix text-center"><button id="featured_load_more" class="btn btn-loadmore" loadtype="video" loadmode="featured" title="'+loadMoreLang+'">'+loadMoreLang+"</button></div>"),ids_to_check_progress_featured=[...new Set([...ids_to_check_progress_featured,...e.ids_to_check])],progressVideoCheckHome(ids_to_check_progress_featured,"home_featured","intervalId_featured"))),$("#container").find(".total_videos_recent").hide(),$("#container").find(".total_videos_featured").hide(),AddingListenerModernThumbVideo(),AddingListenerModernThumbVideoPopinView(),void $(".manage_favorite").on("click",function(){const t=$(this);t.removeClass("glyphicon-heart").html(_cb.loading_img),_cb.remove_from_fav("video",t.data("id")).then(function(e){t.remove(),$('.manage_favorite[data-id="'+t.data("id")+'"]').remove()}).catch(function(e){t.addClass("glyphicon-heart").html("")})}))}})}),$(document).ready(function(){$("#featured_load_more").trigger("click"),$("#featured_load_more").hide(),$("#recent_load_more").trigger("click"),$("#recent_load_more").hide()})}function listenerPreviewThumbs(e){e.forEach(o=>{let n;try{var i=o.getAttribute("data-thumbs");n=JSON.parse(i)}catch(e){return}if(Array.isArray(n)&&0!==n.length){let e=0,t;i=o.closest("div");i.addEventListener("mouseenter",function(){o.src&&(o.dataset.originalSrc=o.src),t=setInterval(()=>{e=(e+1)%n.length,n[e]&&(o.src=n[e])},500)}),i.addEventListener("mouseleave",function(){clearInterval(t),o.dataset.originalSrc&&(o.src=o.dataset.originalSrc),e=0})}})}function updateCookieBannerPosition(){var e,t,o=document.getElementById("cookie-banner"),n=document.getElementById("footer");o&&n&&(t=n.getBoundingClientRect(),e=window.innerHeight||document.documentElement.clientHeight,t.top<e?(o.classList.remove("sticky"),o.classList.add("above-footer"),t=o.offsetHeight,o.style.top=n.offsetTop-t+"px",o.style.bottom=""):(o.classList.remove("above-footer"),o.classList.add("sticky"),o.style.top="",o.style.bottom="0"))}function showCookieBanner(){var e;"undefined"==typeof cookieConsent||cookieConsent||(e=document.getElementById("cookie-banner"))&&(e.style.display="",updateCookieBannerPosition())}function hideCookieBanner(){document.getElementById("cookie-banner").style.display="none"}function showCookieModal(){var e=document.getElementById("cookieListModal");e.classList.add("in"),e.style.display="block",document.querySelector(".modal-backdrop")||((e=document.createElement("div")).className="modal-backdrop fade in",e.onclick=closeCookieModal,document.body.appendChild(e)),document.body.classList.add("modal-open"),document.getElementById("refuse_all_optionnal").onclick=function(){document.getElementById("cookie-preferences-form").querySelectorAll('input[type="checkbox"]:not(:disabled)').forEach(function(e){e.checked=!1}),saveCookiePreferences()},document.getElementById("accept_all_cookies").onclick=function(){document.getElementById("cookie-preferences-form").querySelectorAll('input[type="checkbox"]:not(:disabled)').forEach(function(e){e.checked=!0}),saveCookiePreferences()},document.getElementById("save_cookie_preferences").onclick=function(){saveCookiePreferences()}}function closeCookieModal(){var e=document.getElementById("cookieListModal"),e=(e.classList.remove("in"),e.style.display="none",document.body.classList.remove("modal-open"),document.querySelector(".modal-backdrop"));e&&e.parentNode.removeChild(e)}function renderCookieList(){let t=new XMLHttpRequest;t.open("GET",baseurl+"actions/cookie_consent_get.php",!0),t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE)try{var e=JSON.parse(t.responseText);e&&e.template?(document.getElementById("cookie-list-content").innerHTML=e.template,showCookieModal()):document.getElementById("cookie-list-content").innerHTML='<div class="alert alert-danger">Erreur lors de la r√©cup√©ration du contenu.</div>'}catch(e){document.getElementById("cookie-list-content").innerHTML='<div class="alert alert-danger">R√©ponse inattendue du serveur.</div>'}},t.send()}function ajaxSetConsent(e,t){let o=new XMLHttpRequest;o.open("POST",baseurl+"actions/cookie_consent_set.php",!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&"function"==typeof t&&t(o.responseText)},o.send("consent="+encodeURIComponent(e))}function fade(n,i="in",a=400){let r="in"===i?0:1,d="in"===i?1:0,c=("in"===i&&(n.style.opacity=r,n.style.display=""),null);requestAnimationFrame(function e(t){t-=c=c||t,t=Math.min(t/a,1);let o;"in"===i?(o=r+(d-r)*t,n.style.opacity=o,t<1?requestAnimationFrame(e):n.style.opacity=d):(o=r-(r-d)*t,n.style.opacity=o,t<1?requestAnimationFrame(e):(n.style.opacity=d,n.style.display="none"))})}function checkDisabledFeatured(i){for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){let t=0===i[a]?"out":"in",e,o,n;switch(a){case"fast_qlist":document.querySelectorAll(".cb_quickie").forEach(function(e){o=window.getComputedStyle(e),n="none"!==o.display&&0<parseFloat(o.opacity),("in"==t&&!n||"out"==t&&n)&&fade(e,t,1e3)});var r=document.getElementById("qlist_main"),d=document.getElementById("qlist_count");r&&d&&""!==d.textContent.trim()&&"0"!==d.textContent.trim()&&(o=window.getComputedStyle(r),n="none"!==o.display&&0<parseFloat(o.opacity),"in"==t&&!n||"out"==t&&n)&&fade(r,t,1e3);break;case"user_theme":e=document.querySelector(".theme-switch");break;case"user_theme_os":e=document.querySelector('.theme-switch button[data-theme="auto"]');break;case"cb_lang":e=document.querySelector(".langdrop")}e&&(o=window.getComputedStyle(e),n="none"!==o.display&&0<parseFloat(o.opacity),"in"==t&&!n||"out"==t&&n)&&fade(e,t,1e3)}}function saveCookiePreferences(){var e=document.getElementById("cookie-preferences-form");let t={};e.querySelectorAll('input[type="checkbox"]').forEach(function(e){t[e.name]=e.checked?1:0}),ajaxSetConsent(JSON.stringify(t),function(e){closeCookieModal(),hideCookieBanner(),checkDisabledFeatured(t)})}$(document).ready(function(){userid?($(".user_menu").addClass("logged-in"),$(".user_menu").removeClass("logged-out")):($(".user_menu").removeClass("logged-in"),$(".user_menu").addClass("logged-out")),responsiveFixes(),$(".navbar-sm-login-links a").click(function(){$("body").removeClass("sideactive")}),$(".btn-search-toggle").click(function(){$(".navbar-header").toggleClass("show-search")}),loginHeight(),AddingListenerModernThumbVideo(),AddingListenerModernThumbVideoPopinView(),window.addEventListener("resize",adaptRatioPlayer),$(".cbsearchtype a").on({click:function(e){e.preventDefault();var e=$(this).parents(),t=$(this).attr("valNow");$(".type").val(t),$(".cbsearchtype li").removeClass("active"),e.addClass("active")}}),$(".s-types").on("click",function(){var e=$(this).html();$(".search-type").html(e)}),$("#cbsearch").on("click",function(t){t.preventDefault();t=$("#query").val();if(t.length<=2){let e=lang_search_too_short;e=e.replace("%s","<b>"+t+"</b>"),_cb.throwHeadMsg("warning",e,3e3,!0)}else $(".search-form").submit()});var e=matchMedia("(prefers-color-scheme: dark)").matches;console.log("%cGreetings Adventurers!\n%cHaving a look under the hood? Happy sneaking buddy!üïµÔ∏è‚Äç‚ôÇÔ∏è\n%cüì¨ Drop us an email for any questions : contact+clipbucket@oxygenz.fr\n%cüõ†Ô∏è Check out the project on GitHub: https://github.com/MacWarrior/clipbucket-v5","font-size:18px; font-weight:bold; color:"+(e?"#90ee90":"#2e7d32"),"font-size:14px; color:"+(e?"#ccc":"#444"),"font-size:14px; font-style:italic; color:"+(e?"#80d8ff":"#1565c0"),`font-size:14px; color:${e?"#ffeb3b":"#f57c00"}; font-weight: bold;`),headerFooter()}),$(window).resize(function(){preLoadingBlock(),responsiveFixes(),loginHeight(),headerFooter()}),document.addEventListener("DOMContentLoaded",function(){function o(e){jQuery.post({url:baseurl+"actions/switch_theme.php",dataType:"json",data:{theme:e,os:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},success:function(e){var t=document.createElement("link"),t=(t.rel="stylesheet",t.type="text/css",t.href=e.url,document.head.appendChild(t),document.body.classList.add("theme_transition"),"dark"===e.theme?(document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark")):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light")),setTimeout(()=>{document.body.classList.remove("theme_transition")},1e3),new CustomEvent("postThemeSwitch",{detail:{theme:e.theme}}));document.dispatchEvent(t)}})}listenerPreviewThumbs(document.querySelectorAll("img[data-thumbs]"));document.querySelectorAll(".theme-switch button").forEach(t=>{t.addEventListener("click",()=>{var e;t.classList.contains("active")||((e=document.querySelector(".theme-switch button.active"))&&e.classList.remove("active"),t.classList.add("active"),o(t.dataset.theme))})});var e=document.documentElement;e.classList.contains("auto")&&(e.classList.remove("auto"),o("auto")),document.querySelectorAll(".pick-lang").forEach(n=>{n.addEventListener("click",()=>{var e=n.dataset.lang,t=new URL(window.location.href),o=t.searchParams;o.set("set_site_lang",e),t.search=o.toString(),window.location=t.toString()})})}),window.addEventListener("scroll",updateCookieBannerPosition),window.addEventListener("resize",updateCookieBannerPosition),document.addEventListener("DOMContentLoaded",function(){showCookieBanner();var t=document.querySelectorAll(".show-cookie-list");if(0<t.length){for(let e=0;e<t.length;e++)t[e].onclick=function(e){renderCookieList()};document.getElementById("modal-close-btn").onclick=closeCookieModal,document.querySelectorAll(".accept-cookies").forEach(function(e){e.onclick=function(){ajaxSetConsent("all",function(){closeCookieModal(),hideCookieBanner()})}}),document.addEventListener("keydown",function(e){"Escape"===e.key&&(e=document.getElementById("cookieListModal"))&&"none"!==window.getComputedStyle(e).display&&closeCookieModal()})}});