var page=baseurl+"ajax.php",loading_img="<img style='vertical-align:middle' src='"+imageurl+"/ajax-loader.gif'>",loading=loading_img+" Loading...";function Confirm_Delete(e){confirm("Are you sure you want to delete")&&(document.location=e)}function Confirm_Uninstall(e){confirm("Are you sure you want to uninstall this plugin ?")&&(document.location=e)}function confirm_it(e){return!!confirm(e)}function reloadImage(e,t){(img=document.getElementById(t)).src=e+"?"+Math.random()}function load_more(e,t,o,a,n,i,l){$.ajax({beforeSend:function(e){$("#"+o).html("loading")},type:"POST",url:baseurl+"ajax.php",data:{limit:e,mode:t,inner_mode:o,cat_id:i,total:l},dataType:"json",success:function(e){e&&($("#"+a).append(e.template),$(n).attr({limit:parseInt(e.count)+parseInt(e.total)})),1==e.limit_exceeds&&n.css("display","none"),"limit_exceeds"==e&&n.css("display","none"),$("#"+o).html("Load more...")}})}function randomString(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",t="",o=0;o<8;o++){var a=Math.floor(Math.random()*e.length);t+=e.substring(a,a+1)}return t}var download=0,total_size=0,cur_speed=0,status_refesh=1,result_page=baseurl+"actions/file_results.php",download_page=baseurl+"actions/file_downloader.php",count=0,force_stop=!1,remoteObjID=randomString();function check_remote_url(){$("#remoteUploadBttn").attr("disabled","disabled").hide(),$("#ytUploadBttn").attr("disabled","disabled"),$("#remoteUploadBttnStop").show();var e=$("#remote_file_url").val();if(force_stop=!1,!e||"undefined"==e)return $("#error_msgs").html('<div class="alert alert-danger" role="alert"> Please enter valid remote URL</div>'),$("#remoteUploadBttn").attr("disabled","").show(),$("#remoteUploadBttnStop").attr("disabled","disabled").hide(),!1;var t=getName(e),o=$.ajax({url:download_page,type:"POST",data:{file:e,file_name:t},dataType:"json",beforeSend:function(){status_update(),$("#loading").html('<div style="float:left;display:inline-block;"><img src="'+imageurl+'/ajax-loader.gif"/></div><div style="float:left;line-height:16px;padding-left:5px;">'+lang.remoteUploadFile+'</div><div class="clear"></div>'),$("#remoteFileName").replaceWith('"'+t+'"')},success:function(e){e.error&&(force_stop=!0,$("#remoteUploadBttn").attr("disabled",""),$("#ytUploadBttn").attr("disabled",""),alert(e.error)),$("#loading").html("");var t=e.vid;$.post(baseurl+"actions/file_uploader.php",{getForm:"get_form",title:$("#remote_file_url").val(),objId:remoteObjID,vid:t},function(e){$("#remoteUploadBttnStop").hide(),$("#ytUploadBttn").hide(),$("#remoteForm").append(e),$("#cbSubmitUpload"+remoteObjID).before('<span id="updateVideoDataLoading" style="margin-right:5px"></span>').attr("disabled","").attr("value",lang.saveData).attr("onClick","doUpdateVideo('#uploadForm"+remoteObjID+"','"+remoteObjID+"')").after('<input type="hidden" name="videoid" value="'+t+'" id="videoid" />').after('<input type="hidden" name="updateVideo" value="yes" id="updateVideo" />');var o=!1;$("#remoteForm").find("#list_tags").tagit({singleField:!0,readOnly:!1,singleFieldNode:$("#remoteForm").find("#tags"),animate:!0,caseSensitive:!1,availableTags:available_tags,beforeTagAdded:function(e,t){if(t.tagLabel.length<=2)return o||(o=!0,alert(tag_too_short)),!1;o=!1}})},"text")}});$("#remoteUploadBttnStop").click(function(){o.abort(),force_stop=!0,$("#loading").html(""),$("#remoteDownloadStatus").hide(),$(this).hide(),$("#remoteUploadBttn").attr("disabled","").show()})}var hasLoaded=!1,perc_download=0;function status_update(){var e=getName($("#remote_file_url").val());$.ajax({url:result_page,type:"POST",data:{file_name:e},dataType:"json",success:function(e){e&&(t=e.total_size,o=e.downloaded,a=e.total_size_fm,n=e.downloaded_fm,s=e.speed_download,e.time_eta,i=e.time_eta_fm,e.time_took,l=e.time_took_fm,e=1<s/1024/1024?Math.round(s/1024/1024)+" Mbps":Math.round(s/1024)+" Kbps",perc_download=Math.round(o/t*100),$("#remoteDownloadStatus").show(),$("#prog_bar").animate({width:perc_download+"%"},1e3),$("#prog_bar").html(perc_download+"%"),$("#dspeed").html(e),$("#eta").html(i),$("#status").html(n+" of "+a));var t,o,a,n,i,l,s=1e3*status_refesh;perc_download<100&&!force_stop?setTimeout(function(){status_update()},s):100==perc_download&&1<t&&$("#time_took").html("Time Took : "+l)}})}function upload_file(e,t){var o=baseurl+"actions/file_downloader.php";$.post(o,{file_url:e,file_name:t},function(e){e?submit_upload_form():alert("No data")},"text")}function delete_item(e,t,o,a){$("#"+e+"-"+t).click(function(){confirm(o)&&(document.location=a)})}function delete_video(e,t,o,a){return delete_item(e,t,o,a)}function get_video(e,t){$(t).css("display","block"),$(t).html(loading),$(t).html(loading),$.post(page,{mode:e},function(e){$(t).html(e)},"text")}function getAjaxPhoto(e,t){$(t).css("display","block");var o=$(t).html();$.ajax({url:page,type:"POST",dataType:"json",data:{mode:"loadAjaxPhotos",photosType:e},beforeSend:function(){$(t).html(loading)},success:function(e){e.failed&&$(t).html(o),e.completed&&$(t).html(e.photoBlocks)}})}function rating_over(e,t){"disabled"!=t&&$("#rating_result_container").html(e)}function rating_out(e,t){"disabled"!=t&&$("#rating_result_container").html(e)}function submit_share_form(e,t){$("#share_form_results").css("display","block"),$("#share_form_results").html(loading),$.post(page,{mode:"share_object",type:t,users:$("#ShareUsers").val(),message:$("#message").val(),id:$("#objectid").val()},function(e){e?$("#share_form_results").html(e):alert("No data")},"text")}function flag_object(e,t,o){$("#flag_form_result").css("display","block"),$("#flag_form_result").html(loading),$.post(page,{mode:"flag_object",type:o,flag_type:$("#"+e+" select option:selected").val(),id:t},function(e){e?($("#flag_form_result").css("display","block"),$("#flag_form_result").html(e)):alert("No data")},"text")}function slide_up_watch_video(e){"block"!=$(".video_action_result_boxes "+e).css("display")&&$(".video_action_result_boxes > *").slideUp()}function add_to_fav(e,t){$("#video_action_result_cont").css("display","block"),$("#video_action_result_cont").html(loading),$.post(page,{mode:"add_to_fav",type:e,id:t},function(e){e?($("#video_action_result_cont").css("display","block"),$("#video_action_result_cont").html(e)):alert("No data")},"text")}function subscriber(e,t,o){$("#"+o).css("display","block"),$("#"+o).html(loading),$.post(page,{mode:t,subscribe_to:e},function(e){e?($("#"+o).css("display","none"),$("#"+o).html(e),$("#result_cont").html(e),$("#result_cont").show(0).delay(3e3).fadeOut("slow")):alert("No data")},"text")}function add_friend(e,t){$("#"+t).css("display","block"),$("#"+t).html(loading),$.post(page,{mode:"add_friend",uid:e},function(e){e?($("#result_cont").append(e),$("#result_cont").show(0).delay(3e3).fadeOut("slow")):alert("No data")},"text")}function block_user(e,t){$("#"+t).css("display","block"),$("#"+t).html(loading),$.post(page,{mode:"ban_user",user:e},function(e){e?($("#"+t).css("display","block"),$("#"+t).html(e)):alert("No data")},"text")}function delete_comment(o){$.post(page,{mode:"delete_comment",cid:o},function(e){var t;e?(e.msg&&(void 0===e.nb&&(e.nb=1),$(".reply-"+o).fadeOut("slow"),$("#comment_"+o).fadeOut("slow"),$("#comment_msg_output").html(e.msg+" !"),$("#comment_msg_output").fadeIn("slow"),t=parseInt($("#comment_count").html()),$("#comment_count").html((t-e.nb).toString()),setTimeout(function(){$("#comment_msg_output").fadeOut(),$("#comment_"+o).remove()},3e3)),e.err&&alert(e.err)):alert("No data")},"json")}function get_group_info(e,t){"none"==$(e).css("display")&&($("#group_info_cont > div").slideUp(),$("#group_info_cont "+e).slideDown(),$(".group_detail_tabs .selected").removeClass("selected"),$(t).addClass("selected"))}var collectionID,current_menu="";function show_menu(e,t){if(window.location.hash&&t)return show_menu(window.location.hash.substr(9),!1),!1;window.location.hash="current_"+e,current_menu!=e&&hide_menu(),$("#"+e).show(),current_menu=e,$("."+e).addClass("selected")}function hide_menu(){if(""!=current_menu)return $("#"+current_menu).hide(),$("."+current_menu).removeClass("selected"),!0}function swap_auto_play(){"true"==$.cookie("auto_play_playlist")?(set_cookie_secure("auto_play_playlist","false"),window.location=document.location,$("#ap_status").html("off")):(set_cookie_secure("auto_play_playlist","true"),window.location=document.location,$("#ap_status").html("on"))}function collection_actions(t,e,o,a,n,i){switch($(a).css("display","block"),$(a).html(loading),e){case"add_new_item":var l=$("#"+t+" #collection").val();if(!l||""==l||0==l)return $(a).html("No Data returned"),!1;$.post(baseurl+"actions/add_to_collection.php",{mode:e,cid:l,obj_id:o,type:n},function(e){e?e.msg&&($(a).html(e.msg),$(a).find(".container").css({maxWidth:"100%"})):alert("No Data returned")},"json");break;case"remove_collection_item":$("#"+t).hide(),$.post(page,{mode:e,obj_id:o,type:n,cid:i},function(e){e?(e.err&&(alert(e.err),$(a+"_"+o).hide(),$("#"+t+o).show()),e.msg&&($(a).html(e.msg),$("#"+t+"_"+o).slideUp(350))):(alert("No Data Returned"),$(a+"_"+o).hide(),$("#"+t).show())},"json")}}function openURL(e){document.location=e}function get_item(t,e,o,a,n){var i=$(t).html();$(t).html(loading),$.post(page,{mode:"get_item",ci_id:e,cid:o,type:a,direction:n},function(e){e?(construct_url(new Array(a,e.cid,e.key)),$("#collectionItemView").html(e.content)):(alert("No "+a+" returned"),$(t).text(i))},"json")}function construct_url(e){e="yes"==Seo?"#!/item/"+e[0]+"/"+e[1]+"/"+e[2]:"#!?item="+e[2]+"&type="+e[0]+"&collection="+e[1];window.location.hash=e}function onReload_item(){var e,t;window.location.hash&&(e=window.location.href,"yes"==Seo?(t=RegExp("/item.+#!")).test(e)&&(e=e.replace(t,""),window.location.href=e):(t=RegExp("\\?item.+#!")).test(e)&&(e=e.replace(t,""),window.location.href=e))}function pagination(t,e,o,a){var n=$(t),i=(n.id,n.parent()),l=n.html();(i.attr("id")?parent:(i.attr("id","loadMoreParent"),i)).attr("id");newCall=$.ajax({url:page,type:"post",dataType:"json",data:{mode:"moreItems",page:a,cid:e,type:o},beforeSend:function(){n.removeAttr("onClick"),n.html(loading)},success:function(e){e.error?("BUTTON"==t.tagName&&n.attr("disabled","disabled"),n.removeAttr("onClick"),n.html("No more "+o)):($("#collectionItemsList").append(e.content),$("#NewPagination").html(e.pagination),n.html(l))}})}function ajax_add_collection(e){var t=e.form.id,t=$("#"+t),o=$(e),a=o.html(),n=$("#CollectionResult");$.ajax({url:page,type:"post",dataType:"json",data:"mode=add_collection&"+t.serialize(),beforeSend:function(){"block"==n.css("display")&&n.slideUp("fast"),o.attr("disabled","disabled"),o.html(loading)},success:function(e){e.msg?($("#CollectionDIV").slideUp("fast"),n.html(e.msg).slideDown("fast"),collectionID=e.id):(n.html(e.err).slideDown("fast"),o.removeAttr("disabled"),o.html(a))}})}function getDetails(e){var e=getInputs(e),o=new Array(e.length);return $.each(e,function(e,t){query=$("#"+t.id+" *").serialize(),query+="&mode=ajaxPhotos",o[e]=query}),o}function getName(e){return e.substring(e.lastIndexOf("/")+1)}function viewRatings(e,t){var o=$(e),a=o.html();document.getElementById("RatingStatContainer")?$("#RatingStatContainer").toggle():loadAjax=$.ajax({url:page,type:"post",dataType:"text",data:{mode:"viewPhotoRating",photoid:t},beforeSend:function(){o.html(loading)},success:function(e){o.html(a),e?$("<div />").attr("id","RatingStatContainer").addClass("clearfix").css({padding:"8px",font:"normal 11px Tahoma",border:"1px solid #ccc",backgroundColor:"#FFF"}).html(e).fadeIn(350).insertAfter(o):(o.removeAttr("onclick"),alert("Photo has not recieved any rating yet."))}})}function showAdvanceSearch(e,t,o,a){var e=$("#"+e),t=$("#"+t),n=$("#SearchType").val();e.toggle(),t.toggle(),"block"==t.css("display")&&t.children().hide().filter("#"+n).show(),$("."+o).toggleClass(a)}function toggleCategory(e,t){var e=$(e),o=e.next();o.is(":visible")?(o.slideUp(350),e.removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up")):(o.slideDown(350),e.removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"))}function loadObject(e,t,o,a){var n=new Array(4),i=(n.this=e,n.type=t,n.objID=o,n.container=a,$(n.this));i.parent().css("position","relative"),$.ajax({url:page,type:"POST",dataType:"json",data:{mode:"channelFeatured",contentType:n.type,objID:n.objID},beforeSend:function(){i.find("img").animate({opacity:.5}),$("#"+n.container).animate({opacity:.5})},success:function(e){e.error?(i.find("img").animate({opacity:1}),$("#"+n.container).animate({opacity:1}),alert(e.error)):(i.parent().children(".selected").removeClass("selected"),i.addClass("selected"),i.find("img").animate({opacity:1}),$("#"+n.container).html(e.data),$("#"+n.container).animate({opacity:1}))}})}var comments_voting="no";function getComments(e,t,o,a,n,i,l){$("#comments").html("<div style='padding:5px 0px;'>"+loading+"</div>"),$.ajax({type:"POST",url:page,data:{mode:"getComments",page:a,type:e,type_id:t,object_type:i,last_update:o,total_comments:n,comments_voting:comments_voting,admin:l},success:function(e){$("#comments").hide(),$("#comments").html(e),$("#comments").fadeIn("slow")},dataType:"text"})}function getAllComments(e,t,o,a,n,i,l){$("#userCommentsList").html("<div style='padding:5px 0px;'>"+loading+"</div>"),$.ajax({type:"POST",url:page,data:{mode:"getComments",page:a,type:e,type_id:t,object_type:i,last_update:o,total_comments:n,comments_voting:comments_voting,admin:l},success:function(e){$("#userCommentsList").html(e),visual_editor_comments_enabled&&Array.from(document.querySelectorAll("#userCommentsList .commented-txt p")).forEach((e,t)=>{new toastui.Editor.factory({el:e,viewer:!0,usageStatistics:!1,initialValue:e.innerHTML})})},dataType:"text"})}function checkUncheckAll(e){let t=e.form,o=0;for(console.log(e.form),o=0;o<t.length;o++)"checkbox"===t[o].type&&"checkall"!==t[o].name&&(t[o].checked=e.checked)}function rate(e,t,o){var a=baseurl+"ajax.php";$.post(a,{mode:"rating",id:e,rating:t,type:o},function(e){e?$("#rating_container").html(e):alert("No data")},"text")}function setPageHash(e){e=e.replace(baseurl,"");window.location.hash="#!"+e}function callURLParser(){var e=window.location.href.match(/(\#![/a-zA-Z0-9=\.\&\-\_\?]*)/g);e&&(e=e[e.length-1])&&(window.location.href=e.replace("#!",""))}function comment_transition(e,t){$(e+t).addClass("border-transition"),setTimeout(function(){$(e+t).removeClass("border-transition")},3e3)}function isValidEmail(e){return!!e.match(/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/)&&e}function set_cookie_secure(e,t){"https:"!==location.protocol?document.cookie=e+"="+t+";path=/;samesite=strict;":document.cookie=e+"="+t+";secure;path=/;samesite=strict;"}function unset_cookie(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;samesite=strict;"}function age_disclaimer(e){e?($("#disclaimer").hide(),$("#container").removeClass("blur"),set_cookie_secure("age_restrict","checked")):window.location="https://www.google.com"}function progressVideoCheck(e,a,t){void 0===t&&(t="intervalId"),e&&0<e.length&&(window[t]=setInterval(function(){$.post({url:baseurl+"actions/progress_video.php",dataType:"json",data:{ids:e,output:a},success:function(e){let o=e.data;void 0!==o.videos&&(o.videos.forEach(function(e){var t;"processing"===e.status.toLowerCase()?0===(t=$('.processing[data-id="'+e.videoid+'"]')).length?$('.item-video[data-id="'+e.videoid+'"]').html(e.html):t.find("span").html(e.percent+"%"):($('.item-video[data-id="'+e.videoid+'"]').html(e.html),"view_channel_player"===a&&void 0!==o.player&&o.player.id===e.videoid&&$("#cb_player").html(o.player.html))}),!e.all_complete)||clearInterval(window[t])}})},6e4))}function showSpinner(){$(".taskHandler").show()}function hideSpinner(){$(".taskHandler").hide()}function addErrClass(e,t,o=!1,a=!0,n=!1){$(e).closest(".form-group").removeClass("success-ind"),!1!==n?($(e).closest(".form-group").removeClass("invalid-error"),$(e).closest(".form-group").addClass(n)):($(e).closest(".form-group").removeClass("warning-ind"),$(e).closest(".form-group").addClass("invalid-error")),!0===o&&$(e).next("span").remove(),$('<span class="help-block">'+t+"</span>").insertAfter(e),!0===a&&$("html, body").animate({scrollTop:0},"slow")}function getModalUploadSubtitle(e){showSpinner(),$.ajax({url:"actions/subtitle_popin_upload.php",type:"POST",data:{videoid:e},dataType:"json",success:function(e){hideSpinner();var t=$("#myModal");t.html(e.template),t.modal(),$(".manage-page").prepend(e.msg)}})}