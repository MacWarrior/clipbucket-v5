var collectionID,page=baseurl+"actions/ajax.php",loading_img="<img style='vertical-align:middle' src='"+imageurl+"/ajax-loader.gif'>",loading=loading_img+" Loading...";function Confirm_Delete(t){confirm("Are you sure you want to delete")&&(document.location=t)}function Confirm_Uninstall(t){confirm("Are you sure you want to uninstall this plugin ?")&&(document.location=t)}function confirm_it(t){return!!confirm(t)}function reloadImage(t,e){(img=document.getElementById(e)).src=t+"?"+Math.random()}function load_more(t,e,o,n,a,i,s){$.ajax({beforeSend:function(t){$("#"+o).html("loading")},type:"POST",url:baseurl+"actions/ajax.php",data:{limit:t,mode:e,inner_mode:o,cat_id:i,total:s},dataType:"json",success:function(t){t&&($("#"+n).append(t.template),$(a).attr({limit:parseInt(t.count)+parseInt(t.total)})),!0==t.limit_exceeds&&a.css("display","none"),"limit_exceeds"==t&&a.css("display","none"),$("#"+o).html("Load more...")}})}function randomString(){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e="",o=0;o<8;o++){var n=Math.floor(Math.random()*t.length);e+=t.substring(n,n+1)}return e}var download=0,count=0,hasLoaded=!1;function delete_item(t,e,o,n){$("#"+t+"-"+e).click(function(){confirm(o)&&(document.location=n)})}function delete_video(t,e,o,n){return delete_item(t,e,o,n)}function get_video(t,e){$(e).css("display","block"),$(e).html(loading),$(e).html(loading),$.post(page,{mode:t},function(t){$(e).html(t)},"text")}function getAjaxPhoto(t,e){$(e).css("display","block");var o=$(e).html();$.ajax({url:page,type:"POST",dataType:"json",data:{mode:"loadAjaxPhotos",photosType:t},beforeSend:function(){$(e).html(loading)},success:function(t){t.failed&&$(e).html(o),t.completed&&$(e).html(t.photoBlocks)}})}function rating_over(t,e){"disabled"!=e&&$("#rating_result_container").html(t)}function rating_out(t,e){"disabled"!=e&&$("#rating_result_container").html(t)}function submit_share_form(t,e){$("#share_form_results").css("display","block"),$("#share_form_results").html(loading),$.post(page,{mode:"share_object",type:e,users:$("#ShareUsers").val(),message:$("#message").val(),id:$("#objectid").val()},function(t){t?$("#share_form_results").html(t):alert("No data")},"text")}function flag_object(t,e,o){$("#flag_form_result").css("display","block"),$("#flag_form_result").html(loading),$.post(page,{mode:"flag_object",type:o,flag_type:$("#"+t+" select option:selected").val(),id:e},function(t){t?($("#flag_form_result").css("display","block"),$("#flag_form_result").html(t)):alert("No data")},"text")}function slide_up_watch_video(t){"block"!=$(".video_action_result_boxes "+t).css("display")&&$(".video_action_result_boxes > *").slideUp()}function add_to_fav(t,e){$("#video_action_result_cont").css("display","block"),$("#video_action_result_cont").html(loading),$.post(page,{mode:"add_to_fav",type:t,id:e},function(t){t?($("#video_action_result_cont").css("display","block"),$("#video_action_result_cont").html(t)):alert("No data")},"text")}function subscriber(t,e,o){$("#"+o).css("display","block"),$("#"+o).html(loading),$.post(page,{mode:e,subscribe_to:t},function(t){t?($("#"+o).css("display","none"),$("#"+o).html(t),$("#result_cont").html(t),$("#result_cont").show(0).delay(3e3).fadeOut("slow")):alert("No data")},"text")}function add_friend(t,e){$("#"+e).css("display","block"),$("#"+e).html(loading),$.post(page,{mode:"add_friend",uid:t},function(t){t?($("#result_cont").append(t),$("#result_cont").show(0).delay(3e3).fadeOut("slow")):alert("No data")},"text")}function block_user(t,e){$("#"+e).css("display","block"),$("#"+e).html(loading),$.post(page,{mode:"ban_user",user:t},function(t){t?($("#"+e).css("display","block"),$("#"+e).html(t)):alert("No data")},"text")}function delete_comment(t){$.post(page,{mode:"delete_comment",cid:t},function(e){if(e){if(e.msg){void 0===e.nb&&(e.nb=1),$(".reply-"+t).fadeOut("slow"),$("#comment_"+t).fadeOut("slow"),$("#comment_msg_output").html(e.msg+" !"),$("#comment_msg_output").fadeIn("slow");var o=parseInt($("#comment_count").html());$("#comment_count").html((o-e.nb).toString()),setTimeout(function(){$("#comment_msg_output").fadeOut(),$("#comment_"+t).remove()},3e3)}e.err&&alert(e.err)}else alert("No data")},"json")}function get_group_info(t,e){"none"==$(t).css("display")&&($("#group_info_cont > div").slideUp(),$("#group_info_cont "+t).slideDown(),$(".group_detail_tabs .selected").removeClass("selected"),$(e).addClass("selected"))}var current_menu="";function show_menu(t,e){if(window.location.hash&&e)return show_menu(window.location.hash.substr(9),!1),!1;window.location.hash="current_"+t,current_menu!=t&&hide_menu(),$("#"+t).show(),current_menu=t,$("."+t).addClass("selected")}function hide_menu(){if(""!=current_menu)return $("#"+current_menu).hide(),$("."+current_menu).removeClass("selected"),!0}function swap_auto_play(){"true"==$.cookie("auto_play_playlist")?(set_cookie_secure("auto_play_playlist","false"),window.location=document.location,$("#ap_status").html("off")):(set_cookie_secure("auto_play_playlist","true"),window.location=document.location,$("#ap_status").html("on"))}function collection_actions(t,e,o,n,a,i){switch($(n).css("display","block"),$(n).html(loading),e){case"add_new_item":let s=$("#"+t+" #collection").val();if(!s||""==s||0==s)return $(n).html("No Data returned"),!1;$.post(baseurl+"actions/add_to_collection.php",{mode:e,cid:s,obj_id:o,type:a},function(t){t?t.msg&&($(n).html(t.msg),$(n).find(".container").css({maxWidth:"100%"})):alert("No Data returned")},"json");break;case"remove_collection_item":$("#"+t).hide(),$.post(page,{mode:e,obj_id:o,type:a,cid:i},function(e){e?(e.err&&(alert(e.err),$(n+"_"+o).hide(),$("#"+t+o).show()),e.msg&&($(n).html(e.msg),$("#"+t+"_"+o).slideUp(350))):(alert("No Data Returned"),$(n+"_"+o).hide(),$("#"+t).show())},"json")}}function openURL(t){document.location=t}function get_item(t,e,o,n,a){var i=$(t).html();$(t).html(loading),$.post(page,{mode:"get_item",ci_id:e,cid:o,type:n,direction:a},function(e){e?(construct_url([n,e.cid,e.key]),$("#collectionItemView").html(e.content)):(alert("No "+n+" returned"),$(t).text(i))},"json")}function construct_url(t){var e;"yes"==Seo?(e="#!/item/"+t[0]+"/"+t[1]+"/"+t[2],window.location.hash=e):(e="#!?item="+t[2]+"&type="+t[0]+"&collection="+t[1],window.location.hash=e)}function onReload_item(){var t,e;window.location.hash&&(t=window.location.href,"yes"==Seo?(e=RegExp("/item.+#!")).test(t)&&(t=t.replace(e,""),window.location.href=t):(e=RegExp("\\?item.+#!")).test(t)&&(t=t.replace(e,""),window.location.href=t))}function pagination(t,e,o,n){var a,i=$(t),s=(i.id,i.parent()),l=i.html();s.attr("id")?a=parent.attr("id"):(s.attr("id","loadMoreParent"),a=s.attr("id")),newCall=$.ajax({url:page,type:"post",dataType:"json",data:{mode:"moreItems",page:n,cid:e,type:o},beforeSend:function(){i.removeAttr("onClick"),i.html(loading)},success:function(e){e.error?("BUTTON"==t.tagName&&i.attr("disabled","disabled"),i.removeAttr("onClick"),i.html("No more "+o)):($("#collectionItemsList").append(e.content),$("#NewPagination").html(e.pagination),i.html(l))}})}function ajax_add_collection(t){var e,o=$("#"+t.form.id),n=$(t),a=n.html(),i=$("#CollectionResult");e=$.ajax({url:page,type:"post",dataType:"json",data:"mode=add_collection&"+o.serialize(),beforeSend:function(){"block"==i.css("display")&&i.slideUp("fast"),n.attr("disabled","disabled"),n.html(loading)},success:function(t){t.msg?($("#CollectionDIV").slideUp("fast"),i.html(t.msg).slideDown("fast"),collectionID=t.id):(i.html(t.err).slideDown("fast"),n.removeAttr("disabled"),n.html(a))}})}function getDetails(t){var e=getInputs(t),o=Array(e.length);return $.each(e,function(t,e){query=$("#"+e.id+" *").serialize(),query+="&mode=ajaxPhotos",o[t]=query}),o}function getName(t){var e=t;return e.substring(e.lastIndexOf("/")+1)}function viewRatings(t,e){var o=$(t),n=o.html();document.getElementById("RatingStatContainer")?$("#RatingStatContainer").toggle():loadAjax=$.ajax({url:page,type:"post",dataType:"text",data:{mode:"viewPhotoRating",photoid:e},beforeSend:function(){o.html(loading)},success:function(t){o.html(n),t?$("<div />").attr("id","RatingStatContainer").addClass("clearfix").css({padding:"8px",font:"normal 11px Tahoma",border:"1px solid #ccc",backgroundColor:"#FFF"}).html(t).fadeIn(350).insertAfter(o):(o.removeAttr("onclick"),alert("Photo has not recieved any rating yet."))}})}function showAdvanceSearch(t,e,o,n){var a=$("#"+t),i=$("#"+e),s=$("#SearchType").val();a.toggle(),i.toggle(),"block"==i.css("display")&&i.children().hide().filter("#"+s).show(),$("."+o).toggleClass(n)}function toggleCategory(t,e){var o=$(t),n=o.next();n.is(":visible")?(n.slideUp(350),o.removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up")):(n.slideDown(350),o.removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"))}function loadObject(t,e,o,n){var a=[,,,,];a.this=t,a.type=e,a.objID=o,a.container=n;var i=$(a.this);i.parent().css("position","relative"),$.ajax({url:page,type:"POST",dataType:"json",data:{mode:"channelFeatured",contentType:a.type,objID:a.objID},beforeSend:function(){i.find("img").animate({opacity:.5}),$("#"+a.container).animate({opacity:.5})},success:function(t){t.error?(i.find("img").animate({opacity:1}),$("#"+a.container).animate({opacity:1}),alert(t.error)):(i.parent().children(".selected").removeClass("selected"),i.addClass("selected"),i.find("img").animate({opacity:1}),$("#"+a.container).html(t.data),$("#"+a.container).animate({opacity:1}))}})}var comments_voting="no";function getComments(t,e,o,n,a,i,s){$("#comments").html("<div style='padding:5px 0px;'>"+loading+"</div>"),$.ajax({type:"POST",url:page,data:{mode:"getComments",page:n,type:t,type_id:e,object_type:i,last_update:o,total_comments:a,comments_voting:comments_voting,admin:s},success:function(t){$("#comments").hide(),$("#comments").html(t),$("#comments").fadeIn("slow")},dataType:"text"})}function getAllComments(t,e,o,n,a,i,s){$("#userCommentsList").html("<div style='padding:5px 0px;'>"+loading+"</div>"),$.ajax({type:"POST",url:page,data:{mode:"getComments",page:n,type:t,type_id:e,object_type:i,last_update:o,total_comments:a,comments_voting:comments_voting,admin:s},success:function(t){$("#userCommentsList").html(t),visual_editor_comments_enabled&&Array.from(document.querySelectorAll("#userCommentsList .commented-txt p")).forEach((t,e)=>{new toastui.Editor.factory({el:t,viewer:!0,usageStatistics:!1,initialValue:t.innerHTML})})},dataType:"text"})}function checkUncheckAll(t){let e=t.form,o=0;for(console.log(t.form),o=0;o<e.length;o++)"checkbox"===e[o].type&&"checkall"!==e[o].name&&(e[o].checked=t.checked)}function rate(t,e,o){var n=baseurl+"actions/ajax.php";$.post(n,{mode:"rating",id:t,rating:e,type:o},function(t){t?$("#rating_container").html(t):alert("No data")},"text")}function setPageHash(t){var e=t.replace(baseurl,"");window.location.hash="#!"+e}function callURLParser(){var t,e=window.location.href.match(/(\#![/a-zA-Z0-9=\.\&\-\_\?]*)/g);e&&(t=e[e.length-1])&&(window.location.href=t.replace("#!",""))}function comment_transition(t,e){$(t+e).addClass("border-transition"),setTimeout(function(){$(t+e).removeClass("border-transition")},3e3)}function isValidEmail(t){return!!t.match(/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/)&&t}function set_cookie_secure(t,e){"https:"!==location.protocol?document.cookie=t+"="+e+";path=/;samesite=strict;":document.cookie=t+"="+e+";secure;path=/;samesite=strict;"}function unset_cookie(t){document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;samesite=strict;"}function age_disclaimer(t){t?($("#disclaimer").hide(),$("#container").removeClass("blur"),set_cookie_secure("age_restrict","checked")):window.location="https://www.google.com"}function progressVideoCheck(t,e,o){void 0===o&&(o="intervalId"),t&&t.length>0&&(window[o]=setInterval(function(){$.post({url:baseurl+"actions/progress_video.php",dataType:"json",data:{ids:t,output:e},success:function(t){let n=t.data;if(void 0===n.videos){clearInterval(window[o]);return}n.videos.forEach(function(t){if("processing"===t.status.toLowerCase()){var o=$('.processing[data-id="'+t.videoid+'"]');0===o.length?$('.item-video[data-id="'+t.videoid+'"]').html(t.html):o.find("span").html(t.percent+"%")}else $('.item-video[data-id="'+t.videoid+'"]').html(t.html),"view_channel_player"===e&&void 0!==n.player&&n.player.id===t.videoid&&$("#cb_player").html(n.player.html),"videos"===e?AddingListenerModernThumbVideo():-1!==e.indexOf("home")&&(AddingListenerModernThumbVideo(),AddingListenerModernThumbVideoPopinView())}),t.all_complete&&clearInterval(window[o])}})},6e4))}function showSpinner(){$(".taskHandler").show()}function hideSpinner(){$(".taskHandler").hide()}function addErrClass(t,e,o=!1,n=!0,a=!1){$(t).closest(".form-group").removeClass("success-ind"),!1!==a?($(t).closest(".form-group").removeClass("invalid-error"),$(t).closest(".form-group").addClass(a)):($(t).closest(".form-group").removeClass("warning-ind"),$(t).closest(".form-group").addClass("invalid-error")),!0===o&&$(t).next("span").remove(),$('<span class="help-block">'+e+"</span>").insertAfter(t),!0===n&&$("html, body").animate({scrollTop:0},"slow")}function getModalUploadSubtitle(t){showSpinner(),$.ajax({url:"actions/subtitle_popin_upload.php",type:"POST",data:{videoid:t},dataType:"json",success:function(t){hideSpinner();var e=$("#myModal");e.html(t.template),e.modal(),$(".manage-page").prepend(t.msg)}})}
