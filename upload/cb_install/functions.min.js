var p="ajax.php";function dbconnect(){$("#loading").html('<img src="images/loading.gif"/>');var s=$("#installation").serialize();$.post(p,s,function(s){s.err?($("#dbresult").show().html(s.err),$("#loading").html("")):$("#installation").submit()},"json")}function dodatabase(s){var a=$("#installation").serialize();a+="&step="+s,$.post(p,a,function(s){s.msg&&$("#dbresult").show().append(s.msg),s.err&&($(".errorDiv").show().append(s.err),$("#loading").attr("src","images/cross_arrow.png")),s.status&&$("#current").html(s.status),"forward"==s.step&&$("#installation").submit(),s.step&&"forward"!=s.step&&dodatabase(s.step)},"json")}function password(s,a){var t,e=0,i="";if(void 0==a)var a=!1;for(;e<s;)t=Math.floor(100*Math.random())%94+33,(a||(!(t>=33)||!(t<=47))&&(!(t>=58)||!(t<=64))&&(!(t>=91)||!(t<=96))&&(!(t>=123)||!(t<=126)))&&(e++,i+=String.fromCharCode(t));return i}function newpassword(){var s=password(8,!0);$("#genPass").html(s),$("#password").val(s)}$(document).ready(function(){$("[id^='skip_']").change(function(){this.checked?($(this).parent().find("[id$='_filepath']").val("").prop("disabled",!0),$(this).parent().find("[id$='_filepath_test']").addClass("disabled")):($(this).parent().find("[id$='_filepath']").prop("disabled",!1),$(this).parent().find("[id$='_filepath_test']").removeClass("disabled"))}),$("[id$='_filepath_test']").click(function(){$("#mode").val("precheck"),$("#installation").submit()});var s=$(".check_timezone");s.length>0&&($(".btn-primary").prop("disabled",!0),s.on("change",function(a){$(".alert-dismissable").remove(),$(s).removeClass("has-error"),$("#spinner-content").show(),$.post("check_timezone.php",{timezone:$(this).val()},function(a){a.success?$(".btn-primary").prop("disabled",!1):($(s).addClass("has-error"),$("#sub_container").prepend(a.msg),$(".btn-primary").prop("disabled",!0)),$("#spinner-content").hide()},"JSON")}))});
